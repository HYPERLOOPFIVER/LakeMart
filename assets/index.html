<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QuickMart</title>
  </head>
  <body>
    <style>body{background-color:var(--dark-bg);color:var(--dark-on-background);font-family:Inter,Roboto,-apple-system,BlinkMacSystemFont,sans-serif;margin:0;padding:0;transition:var(--dark-transition-default);line-height:1.5;letter-spacing:.015rem}.home-container{background-color:var(--dark-bg);padding-bottom:80px;min-height:100vh}.header-main{position:sticky;top:0;z-index:100;background:var(--dark-gradient-header);backdrop-filter:blur(15px);-webkit-backdrop-filter:blur(15px);padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.06);box-shadow:0 4px 20px #00000040}.location-bar{margin-bottom:14px}.location-display{display:flex;align-items:center;background-color:var(--dark-surface);padding:10px 14px;border-radius:10px;border:1px solid rgba(255,255,255,.08);cursor:pointer;transition:var(--dark-transition-default)}.location-display:hover{background-color:var(--dark-surface-2);border-color:var(--dark-primary);transform:translateY(-1px)}.location-icon{margin-right:10px;font-size:1.2rem;color:var(--dark-primary)}.location-text{font-size:.95rem;color:var(--dark-on-surface);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:500}.search-bar-container{position:relative;width:100%}.search-bar{display:flex;align-items:center;background-color:var(--dark-surface-2);border-radius:10px;padding:12px 16px;border:1px solid rgba(255,255,255,.08);transition:var(--dark-transition-default)}.search-bar.focused{border-color:var(--dark-primary);box-shadow:0 0 0 3px #a76aff40;background-color:var(--dark-surface-3)}.search-icon{color:var(--dark-primary);opacity:.9;margin-right:12px}.search-input{flex:1;background:transparent;border:none;color:var(--dark-on-background);font-size:1rem;outline:none}.search-input::placeholder{color:var(--dark-on-background);opacity:.6}.clear-search{background:transparent;border:none;color:var(--dark-on-background);cursor:pointer;margin-left:8px;padding:4px;border-radius:50%;display:flex;align-items:center;justify-content:center}.clear-search:hover{background-color:#ffffff1a}.search-suggestions{position:absolute;top:100%;left:0;right:0;background-color:var(--dark-surface-2);border-radius:10px;margin-top:8px;padding:8px 0;box-shadow:var(--dark-card-shadow);z-index:50;max-height:350px;overflow-y:auto;border:1px solid rgba(255,255,255,.08);animation:fadeIn .2s ease-out}@keyframes fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.suggestion-heading{font-size:.85rem;font-weight:600;color:var(--dark-primary);padding:10px 16px;margin-top:4px;text-transform:uppercase;letter-spacing:.05rem}.search-suggestion-item{display:flex;align-items:center;padding:12px 16px;cursor:pointer;transition:var(--dark-transition-default);border-left:3px solid transparent}.search-suggestion-item:hover{background-color:#ffffff0d;border-left:3px solid var(--dark-primary)}.search-suggestion-item svg{margin-right:12px;color:var(--dark-on-background);opacity:.8}.address-edit-container{background-color:var(--dark-surface-2);border-radius:12px;padding:16px;border:1px solid rgba(255,255,255,.08);box-shadow:var(--dark-card-shadow);animation:slideDown .3s ease-out}@keyframes slideDown{0%{opacity:0;transform:translateY(-15px)}to{opacity:1;transform:translateY(0)}}.address-input,.address-detail-input{background-color:var(--dark-surface-3);border:1px solid rgba(255,255,255,.08);border-radius:8px;color:var(--dark-on-background);padding:12px 14px;margin-bottom:10px;width:100%;font-size:.95rem;transition:var(--dark-transition-default)}.address-input:focus,.address-detail-input:focus{border-color:var(--dark-primary);outline:none;box-shadow:0 0 0 2px #a76aff33}.address-detail-fields{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-bottom:12px}.address-actions{display:flex;flex-wrap:wrap;gap:10px}.location-button,.save-button,.cancel-button{padding:12px 16px;border-radius:8px;font-weight:600;font-size:.9rem;cursor:pointer;transition:var(--dark-transition-default);flex-grow:1;min-width:120px;border:none;letter-spacing:.02rem;display:flex;align-items:center;justify-content:center}.location-button{background-color:var(--dark-surface-3);color:var(--dark-on-background);border:1px solid rgba(255,255,255,.08)}.location-button svg{margin-right:8px}.save-button{background:var(--dark-gradient-button);color:var(--dark-on-primary);box-shadow:0 4px 10px #a76aff4d}.cancel-button{background-color:transparent;color:var(--dark-on-background);border:1px solid rgba(255,255,255,.08)}.location-button:hover{background-color:var(--dark-surface-2);border-color:var(--dark-primary)}.save-button:hover{filter:brightness(1.1);transform:translateY(-2px);box-shadow:0 6px 15px #a76aff66}.cancel-button:hover{background-color:#ffffff0d;color:var(--dark-accent)}.delivery-timer{display:flex;align-items:center;background:var(--dark-gradient-banner);margin:16px;padding:16px;border-radius:14px;box-shadow:var(--dark-card-shadow);border:1px solid rgba(255,255,255,.06);transition:var(--dark-transition-default)}.delivery-timer:hover{transform:translateY(-2px);box-shadow:0 10px 20px #0000004d;border-color:#ffffff1a}.timer-icon{font-size:2rem;margin-right:14px;color:var(--dark-secondary);text-shadow:0 0 10px rgba(0,226,195,.5)}.timer-text{display:flex;flex-direction:column}.delivery-heading{font-weight:700;font-size:1.1rem;color:var(--dark-on-surface);margin-bottom:4px}.delivery-subtext{font-size:.9rem;color:var(--dark-on-background);opacity:.9}.active-orders-banner{margin:16px;background:var(--dark-gradient-banner);border-radius:14px;box-shadow:var(--dark-card-shadow);overflow:hidden;border:1px solid rgba(255,255,255,.06);transition:var(--dark-transition-default)}.active-orders-banner:hover{transform:translateY(-2px);box-shadow:0 10px 20px #0000004d;border-color:#ffffff1a}.active-orders-content{padding:16px;display:flex;align-items:center;justify-content:space-between}.truck-icon{color:var(--dark-secondary);margin-right:14px;filter:drop-shadow(0 0 6px rgba(0,226,195,.5))}.active-orders-text{flex:1}.active-orders-text p{margin:0;font-weight:700;font-size:1.1rem}.track-button{background:var(--dark-gradient-button);color:var(--dark-on-primary);border:none;border-radius:8px;padding:10px 18px;font-weight:600;cursor:pointer;transition:var(--dark-transition-default);box-shadow:0 4px 10px #a76aff4d}.track-button:hover{filter:brightness(1.1);transform:translateY(-2px);box-shadow:0 6px 15px #a76aff66}.promotion-banner{margin:16px;background:var(--dark-gradient-primary);border-radius:14px;padding:22px;color:var(--dark-on-primary);box-shadow:var(--dark-card-shadow);position:relative;overflow:hidden;transition:var(--dark-transition-default)}.promotion-banner:hover{transform:translateY(-2px);box-shadow:0 10px 25px #a76aff66}.promotion-banner:after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background:linear-gradient(135deg,#ffffff1a,#fff0);pointer-events:none}.promotion-content h3{margin:0 0 10px;font-size:1.3rem;font-weight:800;letter-spacing:.02rem}.promotion-content p{margin:0;font-size:1rem;opacity:.95;font-weight:500}.products-section{margin:24px 16px;animation:fadeUp .5s ease-out}.section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px}.section-title{margin:0;font-size:1.3rem;font-weight:700;color:var(--dark-on-surface);position:relative;padding-left:14px}.section-title:before{content:"";position:absolute;left:0;top:50%;transform:translateY(-50%);width:4px;height:18px;background:var(--dark-primary);border-radius:2px}.see-all-btn{background:transparent;color:var(--dark-primary);border:1px solid var(--dark-primary);padding:8px 14px;font-size:.9rem;font-weight:600;cursor:pointer;border-radius:8px;transition:var(--dark-transition-default)}.see-all-btn:hover{background-color:#a76aff1a;transform:translateY(-2px)}.products-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:20px}.products-scroll{display:flex;overflow-x:auto;gap:20px;scrollbar-width:thin;padding:10px 0;scroll-behavior:smooth}.products-scroll::-webkit-scrollbar{height:6px}.products-scroll::-webkit-scrollbar-track{background:var(--dark-surface);border-radius:10px}.products-scroll::-webkit-scrollbar-thumb{background:var(--dark-primary);border-radius:10px}.product-card{background:var(--dark-gradient-card);border-radius:14px;overflow:hidden;transition:var(--dark-transition-slow);box-shadow:var(--dark-card-shadow);border:1px solid rgba(255,255,255,.05);position:relative;min-width:180px;max-width:100%;cursor:pointer;transform:perspective(800px) rotateY(0);will-change:transform,box-shadow;display:flex;flex-direction:column}.product-card:hover{transform:perspective(800px) translateY(-5px) rotateY(2deg);box-shadow:0 10px 25px #000000b3;border-color:#a76aff4d;z-index:1}.product-image-container{position:relative;padding-top:100%;background-color:var(--dark-surface-2);overflow:hidden}.product-image-img{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;transition:transform .5s cubic-bezier(.2,0,.2,1)}.product-card:hover .product-image-img{transform:scale(1.08)}.discount-tag{position:absolute;top:10px;left:10px;background-color:var(--dark-accent);color:#fff;font-size:.8rem;font-weight:700;padding:5px 10px;border-radius:6px;z-index:1;box-shadow:0 2px 8px #ff5c8a66;max-width:calc(100% - 54px);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.wishlist-icon{position:absolute;top:10px;right:10px;background-color:#00000080;border:none;color:#fff;width:34px;height:34px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:1;transition:var(--dark-transition-default);backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px)}.wishlist-icon:hover{background-color:#ff5c8ab3;transform:scale(1.1)}.product-details{padding:16px;display:flex;flex-direction:column;flex-grow:1;justify-content:space-between}.product-info{margin-bottom:16px}.product-name{font-weight:600;margin-bottom:8px;font-size:1rem;color:var(--dark-on-surface);display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;min-height:2.7em;line-height:1.35;word-break:break-word}.product-weight{font-size:.85rem;color:var(--dark-on-background);opacity:.8;margin-bottom:10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.product-price-container{display:flex;align-items:baseline;flex-wrap:wrap;margin-bottom:12px;gap:8px}.product-price{font-weight:700;font-size:1.1rem;color:var(--dark-on-surface);white-space:nowrap}.product-original-price{font-size:.85rem;color:var(--dark-on-background);opacity:.7;text-decoration:line-through;white-space:nowrap}.add-to-cart{width:100%;background:var(--dark-gradient-button);color:var(--dark-on-primary);border:none;border-radius:8px;padding:12px 0;font-weight:600;font-size:.95rem;cursor:pointer;transition:var(--dark-transition-default);letter-spacing:.02rem;box-shadow:0 4px 10px #a76aff33;margin-top:auto;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.add-to-cart:hover{filter:brightness(1.1);transform:translateY(-2px);box-shadow:0 6px 15px #a76aff4d}@media (max-width: 600px){.products-grid{grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:16px}.product-card{min-width:150px}.product-details{padding:12px}.product-name{font-size:.95rem}}.feature-banners{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:16px;margin:24px 16px}.feature-banner{background:var(--dark-gradient-card);border-radius:14px;padding:20px 16px;text-align:center;box-shadow:var(--dark-card-shadow);border:1px solid rgba(255,255,255,.05);transition:var(--dark-transition-default);cursor:pointer}.feature-banner:hover{transform:translateY(-5px);border-color:#a76aff4d;box-shadow:0 10px 20px #0006}.feature-icon{font-size:2.2rem;margin-bottom:12px}.feature-details h3{margin:0 0 6px;font-size:1rem;font-weight:700;color:var(--dark-on-surface)}.feature-details p{margin:0;font-size:.85rem;color:var(--dark-on-background);opacity:.9}.loading-spinner{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px}.spinner{width:48px;height:48px;border:3px solid rgba(167,106,255,.2);border-top-color:var(--dark-primary);border-radius:50%;animation:spin 1s cubic-bezier(.6,.2,.4,.8) infinite}.cart-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000c;backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);z-index:1000;display:flex;justify-content:flex-end;animation:fadeIn .3s ease}:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}:root{--app-bg: #0a0a0c;--app-surface: #141418;--app-card: #1c1c22;--app-surface-3: #26262e;--app-primary: #a76aff;--app-primary-dark: #7a29ff;--app-primary-light: #c49aff;--app-accent: #00e2c3;--app-text: #ffffff;--app-text-secondary: #e9e9ec;--app-text-dark: #000000;--app-error: #ff4d65;--app-success: #00d666;--app-warning: #ffcf00;--app-shadow: rgba(0, 0, 0, .6);--app-border: #32323c;--app-transition: all .3s cubic-bezier(.4, 0, .2, 1);--app-radius: 16px;--app-gradient-primary: linear-gradient(135deg, #a76aff 0%, #7a29ff 100%);--app-gradient-card: linear-gradient(145deg, #161620, #1a1a22);--app-blue-glow: 0 0 15px rgba(167, 106, 255, .4);--app-safe-area-top: env(safe-area-inset-top, 0);--app-safe-area-bottom: env(safe-area-inset-bottom, 0)}*,*:before,*:after{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}body{background-color:var(--app-bg);color:var(--app-text);font-family:-apple-system,system-ui,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;font-size:16px;line-height:1.5;padding:0;margin:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.auth-container{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;min-height:100%;width:100%;background:linear-gradient(180deg,var(--app-bg) 0%,var(--app-surface) 100%);position:relative;overflow:hidden;padding:calc(40px + var(--app-safe-area-top)) 0 calc(24px + var(--app-safe-area-bottom)) 0}.particles-container{position:absolute;bottom:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0}.particle{position:absolute;background:radial-gradient(circle at center,#a76aff26,#a76aff00);border-radius:50%;opacity:0;transform:translateY(100%)}.particle.animate{animation:particleFloat 12s infinite ease-in}.particle-1{width:120px;height:120px;left:10%;animation-delay:0s}.particle-2{width:80px;height:80px;left:35%;animation-delay:2s}.particle-3{width:60px;height:60px;left:60%;animation-delay:4s}.particle-4{width:100px;height:100px;left:85%;animation-delay:1s}.particle-5{width:50px;height:50px;left:22%;animation-delay:3s}.particle-6{width:70px;height:70px;left:72%;animation-delay:5s}@keyframes particleFloat{0%{transform:translateY(100%);opacity:0}20%{opacity:.5}80%{opacity:.5}to{transform:translateY(-100vh);opacity:0}}.login-success-ripple{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(0);width:10px;height:10px;background:var(--app-primary);border-radius:50%;opacity:0;pointer-events:none;z-index:100;transition:transform .8s cubic-bezier(.8,0,.2,1),opacity .8s ease}.login-success-ripple.active{transform:translate(-50%,-50%) scale(100);opacity:1}.auth-form{width:100%;display:flex;flex-direction:column;padding:0 1.5rem;z-index:2;animation:slideUp .6s cubic-bezier(.4,0,.2,1) forwards}@keyframes slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.logo-container{display:flex;flex-direction:column;align-items:center;margin:2rem 0 3rem}.logo{position:relative;width:70px;height:70px;display:flex;justify-content:center;align-items:center;margin-bottom:1rem}.logo-wave{position:absolute;width:100%;height:12px;background:var(--app-gradient-primary);border-radius:20px;opacity:.8}.logo-wave:nth-child(1){top:22px;animation:wave 2.5s infinite ease-in-out}.logo-wave:nth-child(2){top:35px;animation:wave 2.5s infinite ease-in-out .3s}.logo-wave:nth-child(3){top:48px;animation:wave 2.5s infinite ease-in-out .6s}@keyframes wave{0%,to{transform:scaleX(.8);opacity:.8}50%{transform:scaleX(1);opacity:1}}.app-name{font-size:2.2rem;font-weight:700;color:var(--app-text);margin:0;background:var(--app-gradient-primary);-webkit-background-clip:text;-webkit-text-fill-color:transparent;letter-spacing:-.5px}.auth-form h2{font-size:1.6rem;font-weight:600;text-align:center;margin-bottom:.5rem}.slogan{color:var(--app-text-secondary);text-align:center;font-size:.95rem;font-weight:400;margin-bottom:2rem;opacity:.9}.error-message{display:flex;align-items:center;background-color:#ff4d651a;border-left:3px solid var(--app-error);color:var(--app-error);padding:.75rem 1rem;margin-bottom:1.5rem;border-radius:8px;font-size:.9rem}.error-message svg{width:18px;height:18px;margin-right:8px;flex-shrink:0}.auth-form.shake{animation:shake .5s cubic-bezier(.36,.07,.19,.97) both}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(2px,0,0)}30%,50%,70%{transform:translate3d(-3px,0,0)}40%,60%{transform:translate3d(3px,0,0)}}.auth-form form{display:flex;flex-direction:column;gap:1.25rem}.input-group{position:relative}.input-icon{position:absolute;left:1rem;top:50%;transform:translateY(-50%);width:20px;height:20px;color:var(--app-text-secondary);transition:var(--app-transition);pointer-events:none;z-index:1}.input-group input{width:100%;background-color:#ffffff0f;border:1px solid var(--app-border);border-radius:var(--app-radius);padding:1rem 1rem 1rem 2.75rem;font-size:1rem;color:var(--app-text);transition:var(--app-transition);outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.input-group input::placeholder{color:transparent}.input-group label{position:absolute;left:2.75rem;top:50%;transform:translateY(-50%);color:var(--app-text-secondary);pointer-events:none;transition:var(--app-transition);font-size:1rem}.input-group input:focus~label,.input-group input.has-value~label{top:.5rem;left:1rem;font-size:.75rem;color:var(--app-primary)}.input-group input:focus{border-color:var(--app-primary);box-shadow:0 0 0 1px #a76aff33;background-color:#ffffff14}.input-group input:focus~.input-icon{color:var(--app-primary)}.password-toggle{position:absolute;right:1rem;top:50%;transform:translateY(-50%);background:transparent;border:none;color:var(--app-text-secondary);cursor:pointer;width:24px;height:24px;padding:0;display:flex;align-items:center;justify-content:center;transition:var(--app-transition)}.password-toggle:hover{color:var(--app-primary)}.password-toggle svg{width:22px;height:22px}.form-options{display:flex;justify-content:space-between;align-items:center;margin-top:.5rem;font-size:.85rem}.remember-me{display:flex;align-items:center;position:relative;padding-left:30px;cursor:pointer;color:var(--app-text-secondary)}.remember-me input{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkmark{position:absolute;top:0;left:0;height:18px;width:18px;background-color:#ffffff14;border:1px solid var(--app-border);border-radius:6px;transition:var(--app-transition)}.remember-me:hover input~.checkmark{background-color:#ffffff1f}.remember-me input:checked~.checkmark{background-color:var(--app-primary);border-color:var(--app-primary)}.checkmark:after{content:"";position:absolute;display:none}.remember-me input:checked~.checkmark:after{display:block}.remember-me .checkmark:after{left:6px;top:2px;width:4px;height:8px;border:solid white;border-width:0 2px 2px 0;transform:rotate(45deg)}.forgot-password{color:var(--app-primary);text-decoration:none;transition:var(--app-transition)}.forgot-password:hover{text-decoration:underline;color:var(--app-primary-light)}.login-button{position:relative;background:var(--app-gradient-primary);color:var(--app-text-dark);border:none;border-radius:var(--app-radius);padding:1rem;font-size:1rem;font-weight:600;cursor:pointer;margin-top:1.5rem;transition:var(--app-transition);overflow:hidden;text-transform:uppercase;letter-spacing:.05em;display:flex;justify-content:center;align-items:center;width:100%;box-shadow:0 4px 10px #0003;-webkit-tap-highlight-color:transparent}.login-button:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:.5s}.login-button:active{transform:scale(.98);background:var(--app-primary-dark)}.login-button:hover:before{left:100%}.button-text{transition:opacity .3s ease}.button-loader{position:absolute;width:20px;height:20px;border:3px solid rgba(0,0,0,.2);border-radius:50%;border-top-color:var(--app-text-dark);opacity:0;visibility:hidden;transition:var(--app-transition);animation:spin 1s infinite linear}.login-button.loading .button-text{opacity:0}.login-button.loading .button-loader{opacity:1;visibility:visible}.social-login{margin-top:2.5rem;text-align:center}.social-login p{color:var(--app-text-secondary);font-size:.9rem;position:relative;margin-bottom:1.25rem}.social-login p:before,.social-login p:after{content:"";position:absolute;top:50%;width:30%;height:1px;background-color:var(--app-border)}.social-login p:before{left:0}.social-login p:after{right:0}.social-buttons{display:flex;justify-content:center;gap:1.25rem}.social-button{width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;border:none;cursor:pointer;transition:transform .3s ease,box-shadow .3s ease;background-color:#ffffff1a;box-shadow:0 2px 5px #0003;-webkit-tap-highlight-color:transparent}.social-button:active{transform:scale(.95)}.social-button svg{width:24px;height:24px}.social-button.google{background-color:#fff}.social-button.facebook{background-color:#1877f2}.social-button.apple{background-color:#fff}.auth-link{text-align:center;margin-top:2rem;color:var(--app-text-secondary);font-size:.95rem}.auth-link a{color:var(--app-primary);text-decoration:none;font-weight:500;transition:var(--app-transition)}.auth-link a:hover{color:var(--app-primary-light);text-decoration:underline}.premium-badge{position:absolute;top:1rem;right:1rem;background:linear-gradient(135deg,var(--app-accent),#00b199);border-radius:12px;padding:4px 10px;font-size:.7rem;font-weight:600;color:var(--app-text-dark);text-transform:uppercase;letter-spacing:.05em;box-shadow:0 2px 6px #00e2c34d;z-index:10}@supports (padding-bottom: env(safe-area-inset-bottom)){.auth-container{padding-bottom:calc(24px + env(safe-area-inset-bottom))}}@media (min-width: 768px){.auth-container{justify-content:center;padding-top:0;padding-bottom:0}.auth-form{max-width:420px;background-color:var(--app-card);border-radius:var(--app-radius);padding:2.5rem 2rem;box-shadow:var(--app-shadow);border:1px solid var(--app-border);position:relative;background:var(--app-gradient-card)}.logo-container{margin:0 0 2rem}}@supports (padding-top: constant(safe-area-inset-top)){body:before{height:calc(20px + constant(safe-area-inset-top))}.auth-container{padding-top:calc(40px + constant(safe-area-inset-top))}}@supports (padding-top: env(safe-area-inset-top)){body:before{height:calc(20px + env(safe-area-inset-top))}.auth-container{padding-top:calc(40px + env(safe-area-inset-top))}}.profile-container{background-color:var(--dark-bg);padding:16px 16px 80px;min-height:100vh;animation:fadeUp .5s ease-out}@keyframes fadeUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.profile-header{display:flex;align-items:center;background:var(--dark-gradient-card);border-radius:14px;padding:20px;margin-bottom:20px;box-shadow:var(--dark-card-shadow);border:1px solid rgba(255,255,255,.06);transition:var(--dark-transition-default);position:relative;overflow:hidden}.profile-header:after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background:linear-gradient(135deg,#ffffff0d,#fff0);pointer-events:none}.profile-header:hover{transform:translateY(-2px);box-shadow:0 10px 20px #0000004d;border-color:#ffffff1a}.profile-avatar{margin-right:20px;width:80px;height:80px;border-radius:50%;overflow:hidden;background:var(--dark-gradient-primary);box-shadow:0 5px 15px #a76aff4d;border:3px solid var(--dark-surface-3);display:flex;justify-content:center;align-items:center;flex-shrink:0}.profile-avatar img{width:100%;height:100%;object-fit:cover}.avatar-placeholder{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:2rem;font-weight:700;color:#fff}.profile-info{flex:1}.profile-info h1{margin:0 0 5px;font-size:1.5rem;font-weight:700;color:var(--dark-on-surface)}.profile-email,.profile-phone{margin:4px 0;font-size:.95rem;color:var(--dark-on-background);opacity:.9}.profile-address-section{background:var(--dark-gradient-card);border-radius:14px;padding:20px;margin-bottom:20px;box-shadow:var(--dark-card-shadow);border:1px solid rgba(255,255,255,.06);transition:var(--dark-transition-default)}.profile-address-section:hover{transform:translateY(-2px);box-shadow:0 10px 20px #0000004d;border-color:#ffffff1a}.profile-address-section .section-header{display:flex;align-items:center;margin-bottom:16px}.profile-address-section .section-header svg{color:var(--dark-primary);margin-right:10px}.profile-address-section .section-header h2{flex:1;margin:0;font-size:1.2rem;font-weight:600;color:var(--dark-on-surface)}.edit-btn{background-color:var(--dark-surface-2);border:1px solid rgba(255,255,255,.08);border-radius:50%;width:36px;height:36px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:var(--dark-transition-default);color:var(--dark-primary)}.edit-btn:hover{background-color:var(--dark-surface-3);transform:translateY(-2px);box-shadow:0 4px 10px #0003}.address-card{background-color:var(--dark-surface-2);border-radius:10px;padding:16px;border:1px solid rgba(255,255,255,.06)}.address-type{margin:0 0 8px;font-size:.9rem;font-weight:600;color:var(--dark-primary);text-transform:uppercase;letter-spacing:.05rem}.address-text{margin:0;font-size:.95rem;color:var(--dark-on-background);line-height:1.5}.no-address{text-align:center;padding:20px;background-color:var(--dark-surface-2);border-radius:10px;border:1px dashed rgba(255,255,255,.1)}.no-address p{margin:0 0 12px;color:var(--dark-on-background);opacity:.8}.add-address-btn{background:var(--dark-gradient-button);color:var(--dark-on-primary);border:none;border-radius:8px;padding:10px 18px;font-weight:600;cursor:pointer;transition:var(--dark-transition-default);box-shadow:0 4px 10px #a76aff4d}.add-address-btn:hover{filter:brightness(1.1);transform:translateY(-2px);box-shadow:0 6px 15px #a76aff66}.profile-tabs{display:flex;background-color:var(--dark-surface);border-radius:12px;overflow:hidden;margin-bottom:20px;border:1px solid rgba(255,255,255,.06)}.tab-btn{flex:1;background-color:transparent;border:none;padding:14px 10px;color:var(--dark-on-background);opacity:.7;font-size:.95rem;font-weight:600;cursor:pointer;transition:var(--dark-transition-default);display:flex;align-items:center;justify-content:center;border-bottom:3px solid transparent}.tab-btn svg{margin-right:8px}.tab-btn.active{background-color:var(--dark-surface-2);color:var(--dark-primary);opacity:1;border-bottom:3px solid var(--dark-primary)}.tab-btn:hover:not(.active){background-color:var(--dark-surface-2);opacity:.9}.tab-content{background:var(--dark-gradient-card);border-radius:14px;padding:20px;margin-bottom:20px;box-shadow:var(--dark-card-shadow);border:1px solid rgba(255,255,255,.06);min-height:250px}.empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;text-align:center}.empty-icon{color:var(--dark-primary);margin-bottom:20px;opacity:.8}.empty-state h3{margin:0 0 10px;font-size:1.3rem;font-weight:700;color:var(--dark-on-surface)}.empty-state p{margin:0 0 20px;font-size:1rem;color:var(--dark-on-background);opacity:.8}.shop-now-btn{background:var(--dark-gradient-button);color:var(--dark-on-primary);text-decoration:none;border-radius:8px;padding:12px 24px;font-weight:600;transition:var(--dark-transition-default);box-shadow:0 4px 10px #a76aff4d;display:inline-block}.shop-now-btn:hover{filter:brightness(1.1);transform:translateY(-2px);box-shadow:0 6px 15px #a76aff66}.order-card{background-color:var(--dark-surface-2);border-radius:12px;padding:16px;border:1px solid rgba(255,255,255,.06);transition:var(--dark-transition-default)}.order-card:hover{transform:translateY(-2px);box-shadow:0 8px 16px #0003;border-color:#ffffff1a}.order-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;padding-bottom:12px;border-bottom:1px solid rgba(255,255,255,.06)}.order-status{display:flex;align-items:center;font-weight:600}.order-status svg{margin-right:8px;color:var(--dark-secondary)}.order-date{font-size:.9rem;color:var(--dark-on-background);opacity:.8}.order-shop{margin-bottom:12px;font-size:.95rem}.order-shop span{color:var(--dark-on-background);opacity:.8;margin-right:5px}.order-items-preview{display:flex;flex-direction:column;gap:10px;margin-bottom:12px;padding-bottom:12px;border-bottom:1px solid rgba(255,255,255,.06)}.item-image{width:50px;height:50px;border-radius:8px;overflow:hidden;margin-right:12px;background-color:var(--dark-surface);flex-shrink:0}.item-image img{width:100%;height:100%;object-fit:cover}.item-image-placeholder{width:100%;height:100%;background-color:var(--dark-surface-3)}.item-details{flex:1}.item-name{margin:0 0 4px;font-size:.95rem;font-weight:500}.item-quantity{margin:0;font-size:.85rem;color:var(--dark-on-background);opacity:.8}.more-items{font-size:.9rem;color:var(--dark-primary);padding:8px 0;text-align:center;background-color:var(--dark-surface);border-radius:8px;margin-top:5px;font-weight:500}.order-footer{display:flex;justify-content:space-between;align-items:center}.order-total{font-size:1rem;font-weight:600}.order-total span{color:var(--dark-on-background);opacity:.8;margin-right:5px;font-weight:400}.order-details-btn{background-color:var(--dark-surface-3);color:var(--dark-primary);border:1px solid var(--dark-primary);border-radius:8px;padding:8px 16px;font-size:.9rem;font-weight:600;text-decoration:none;transition:var(--dark-transition-default)}.order-details-btn:hover{background-color:#a76aff1a;transform:translateY(-2px)}.wishlist-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px}.wishlist-item{background:var(--dark-gradient-card);border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,.06);text-decoration:none;color:var(--dark-on-background);transition:var(--dark-transition-default);display:flex;flex-direction:column}.wishlist-item:hover{transform:translateY(-5px);box-shadow:var(--dark-card-shadow);border-color:#ffffff1a}.wishlist-item-image{height:150px;overflow:hidden}.wishlist-item-image img{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.wishlist-item:hover .wishlist-item-image img{transform:scale(1.05)}.wishlist-item-details{padding:14px}.wishlist-item-details h3{margin:0 0 8px;font-size:1rem;font-weight:600;color:var(--dark-on-surface);display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;height:40px}.wishlist-item-price{font-weight:700;font-size:1.1rem;color:var(--dark-on-surface);margin-bottom:10px;display:flex;align-items:center}.original-price{font-size:.9rem;text-decoration:line-through;color:var(--dark-on-background);opacity:.7;margin-left:8px;font-weight:400}.wishlist-item-actions{display:flex;flex-direction:column;gap:8px}.move-to-cart-btn{background:var(--dark-gradient-button);color:var(--dark-on-primary);border:none;border-radius:6px;padding:8px 0;font-weight:600;cursor:pointer;transition:var(--dark-transition-default)}.remove-wishlist-btn{background-color:transparent;color:var(--dark-on-background);border:1px solid rgba(255,255,255,.1);border-radius:6px;padding:8px 0;font-weight:500;cursor:pointer;transition:var(--dark-transition-default)}.move-to-cart-btn:hover{filter:brightness(1.1)}.remove-wishlist-btn:hover{background-color:#ffffff0d;color:var(--dark-error);border-color:var(--dark-error)}.recently-viewed-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:16px}.recent-item{background:var(--dark-gradient-card);border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,.06);text-decoration:none;color:var(--dark-on-background);transition:var(--dark-transition-default)}.recent-item:hover{transform:translateY(-5px);box-shadow:var(--dark-card-shadow);border-color:#ffffff1a}.recent-item-image{height:130px;overflow:hidden}.recent-item-image img{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.recent-item:hover .recent-item-image img{transform:scale(1.05)}.recent-item-details{padding:12px}.recent-item-details h3{margin:0 0 8px;font-size:.95rem;font-weight:600;color:var(--dark-on-surface);display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;height:38px}.recent-item-price{font-weight:600;font-size:1rem;color:var(--dark-on-surface);display:flex;align-items:center}.account-actions{display:flex;flex-direction:column;gap:10px;margin-top:24px}.account-action-btn{display:flex;align-items:center;background-color:var(--dark-surface-2);border:1px solid rgba(255,255,255,.06);border-radius:10px;padding:16px;cursor:pointer;transition:var(--dark-transition-default);color:var(--dark-on-background);font-weight:600;font-size:1rem}.account-action-btn svg{margin-right:12px;color:var(--dark-primary)}.account-action-btn:hover{background-color:var(--dark-surface-3);transform:translateY(-2px);box-shadow:0 6px 12px #00000026}.account-action-btn:last-child{color:var(--dark-error)}.account-action-btn:last-child svg{color:var(--dark-error)}@media (max-width: 768px){.profile-header{flex-direction:column;align-items:center;text-align:center}.profile-avatar{margin-right:0;margin-bottom:16px}.wishlist-grid,.recently-viewed-grid{grid-template-columns:repeat(auto-fill,minmax(140px,1fr))}.order-footer{flex-direction:column;gap:10px}.order-details-btn{width:100%;text-align:center}}@media (max-width: 480px){.profile-tabs{flex-direction:column}.tab-btn{border-bottom:none;border-left:3px solid transparent}.tab-btn.active{border-bottom:none;border-left:3px solid var(--dark-primary)}.wishlist-grid,.recently-viewed-grid{grid-template-columns:repeat(2,1fr)}}:root{--dark-bg: #0a0a0c;--dark-surface: #141418;--dark-surface-2: #1c1c22;--dark-surface-3: #26262e;--dark-primary: #a76aff;--dark-primary-variant: #7a29ff;--dark-secondary: #00e2c3;--dark-accent: #ff5c8a;--dark-error: #ff4d65;--dark-on-primary: #000000;--dark-on-background: #e9e9ec;--dark-on-surface: #ffffff;--dark-on-error: #000000;--dark-border: #32323c;--dark-card-shadow: 0 8px 16px rgba(0, 0, 0, .6);--dark-success: #00d666;--dark-warning: #ffcf00;--dark-gradient-primary: linear-gradient(135deg, #a76aff 0%, #8040ff 100%);--dark-gradient-header: linear-gradient(to bottom, rgba(14, 14, 18, .98), rgba(12, 12, 16, .95));--dark-gradient-card: linear-gradient(145deg, #161620, #1a1a22);--dark-gradient-cart: linear-gradient(135deg, #141418, #1c1c22);--dark-gradient-banner: linear-gradient(135deg, #1e1e26, #16161e);--dark-gradient-button: linear-gradient(135deg, #a76aff, #6933ff);--dark-transition-default: all .3s cubic-bezier(.4, 0, .2, 1);--dark-transition-slow: all .5s cubic-bezier(.4, 0, .2, 1)}.cart-ovrlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000c;backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);z-index:1000;display:flex;justify-content:flex-end;animation:fadeIn .3s ease}.cart-sidebar{width:90%;max-width:420px;height:100%;background:var(--dark-gradient-cart);display:flex;flex-direction:column;box-shadow:-8px 0 20px #0009;animation:slideIn .4s cubic-bezier(.16,1,.3,1);overflow-y:auto}@keyframes slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.cart-header{display:flex;justify-content:space-between;align-items:center;padding:18px;border-bottom:1px solid rgba(255,255,255,.08);background-color:var(--dark-surface-2);position:sticky;top:0;z-index:10}.cart-header h3{margin:0;font-size:1.2rem;font-weight:700;color:var(--dark-on-surface)}.close-cart{background:transparent;border:none;color:var(--dark-on-background);cursor:pointer;display:flex;align-items:center;justify-content:center;width:38px;height:38px;border-radius:50%;transition:var(--dark-transition-default)}.close-cart:hover{background-color:#ffffff1a;color:var(--dark-accent)}.empty-cart{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 24px;color:var(--dark-on-background);opacity:.9;text-align:center}.empty-cart-icon{margin-bottom:20px;opacity:.6;font-size:4rem;color:var(--dark-primary);animation:pulse 2s infinite}@keyframes pulse{0%,to{transform:scale(1);opacity:.6}50%{transform:scale(1.1);opacity:.8}}.empty-cart p{margin:0 0 30px;font-size:1.2rem;font-weight:600}.start-shopping{background:var(--dark-gradient-button);color:var(--dark-on-primary);border:none;border-radius:10px;padding:14px 28px;font-weight:600;font-size:1.05rem;cursor:pointer;transition:var(--dark-transition-default);box-shadow:0 6px 15px #a76aff4d}.start-shopping:hover{filter:brightness(1.1);transform:translateY(-3px);box-shadow:0 10px 20px #a76aff66}.cart-items{flex:1;overflow-y:auto;padding:16px}.cart-item{display:flex;margin-bottom:18px;padding-bottom:18px;border-bottom:1px solid rgba(255,255,255,.08);transition:var(--dark-transition-default)}.cart-item:hover{background-color:#ffffff05;border-radius:10px;padding-left:8px;padding-right:8px}.cart-item-image{width:80px;height:80px;object-fit:cover;border-radius:10px;margin-right:14px;cursor:pointer;transition:var(--dark-transition-default);border:1px solid rgba(255,255,255,.05)}.cart-item-image:hover{transform:scale(1.05);box-shadow:0 4px 12px #0003;border-color:#a76aff33}.cart-item-details{flex:1;margin-right:12px}.cart-item-name{font-weight:600;font-size:.95rem;color:var(--dark-on-surface);margin-bottom:4px;cursor:pointer}.cart-item-name:hover{color:var(--dark-primary)}.cart-item-weight{font-size:.8rem;color:var(--dark-on-background);opacity:.8;margin-bottom:4px}.cart-item-price{font-weight:700;font-size:1rem;color:var(--dark-on-surface)}.cart-item-controls{display:flex;flex-direction:column;align-items:center;justify-content:space-between}.quantity-controls{display:flex;align-items:center;background-color:var(--dark-surface-2);border-radius:8px;overflow:hidden;border:1px solid rgba(255,255,255,.08);margin-bottom:10px}.quantity-btn{width:30px;height:30px;background-color:transparent;border:none;color:var(--dark-on-background);font-size:1rem;font-weight:600;cursor:pointer;transition:var(--dark-transition-default);display:flex;align-items:center;justify-content:center}.quantity-btn:hover{background-color:#a76aff33;color:var(--dark-primary)}.quantity{padding:0 8px;font-weight:600;font-size:.95rem;color:var(--dark-on-background);min-width:24px;text-align:center}.remove-item{background:transparent;border:none;color:var(--dark-on-background);opacity:.7;cursor:pointer;display:flex;align-items:center;justify-content:center;width:30px;height:30px;border-radius:50%;transition:var(--dark-transition-default)}.remove-item:hover{background-color:#ff4d6533;color:var(--dark-error);opacity:1}.order-notes{padding:16px;border-bottom:1px solid rgba(255,255,255,.08)}.order-notes h4{margin:0 0 10px;font-size:1rem;font-weight:600;color:var(--dark-on-surface)}.notes-input{width:100%;min-height:80px;background-color:var(--dark-surface-2);border:1px solid rgba(255,255,255,.08);border-radius:10px;padding:12px;color:var(--dark-on-background);font-size:.95rem;resize:vertical;transition:var(--dark-transition-default)}.notes-input:focus{border-color:var(--dark-primary);outline:none;box-shadow:0 0 0 2px #a76aff33}.payment-method-selection{padding:16px;border-bottom:1px solid rgba(255,255,255,.08)}.payment-method-selection h4{margin:0 0 12px;font-size:1rem;font-weight:600;color:var(--dark-on-surface)}.payment-options{display:flex;flex-direction:column;gap:12px}.payment-option{display:flex;align-items:center;background-color:var(--dark-surface-2);border-radius:10px;padding:12px 16px;cursor:pointer;transition:var(--dark-transition-default);border:1px solid rgba(255,255,255,.08)}.payment-option:hover{background-color:var(--dark-surface-3);border-color:var(--dark-primary)}.payment-option input[type=radio]{margin-right:12px;accent-color:var(--dark-primary);width:18px;height:18px}.payment-option-content{display:flex;align-items:center}.payment-option-icon{font-size:1.2rem;margin-right:10px}.payment-label{font-weight:500;color:var(--dark-on-background)}.card-details{margin-top:12px;display:flex;flex-direction:column;gap:10px;animation:fadeIn .3s ease-out}.card-input{background-color:var(--dark-surface-3);border:1px solid rgba(255,255,255,.08);border-radius:8px;color:var(--dark-on-background);padding:12px 14px;font-size:.95rem;transition:var(--dark-transition-default)}.card-input:focus{border-color:var(--dark-primary);outline:none;box-shadow:0 0 0 2px #a76aff33}.card-row{display:flex;gap:10px}.card-input.expiry{flex:2}.card-input.cvc{flex:1}.cart-summary{padding:16px;background-color:var(--dark-surface-2);position:sticky;bottom:0;box-shadow:0 -4px 10px #0003}.summary-row{display:flex;justify-content:space-between;margin-bottom:10px;font-size:.95rem;color:var(--dark-on-background)}.summary-row.total{padding-top:10px;margin-top:10px;border-top:1px solid rgba(255,255,255,.08);font-weight:700;font-size:1.1rem;color:var(--dark-on-surface)}.checkout-button{display:block;width:100%;background:var(--dark-gradient-button);color:var(--dark-on-primary);border:none;border-radius:10px;padding:14px;font-weight:600;font-size:1rem;cursor:pointer;transition:var(--dark-transition-default);margin-top:16px;box-shadow:0 4px 10px #a76aff4d;letter-spacing:.02rem}.checkout-button:hover{filter:brightness(1.1);transform:translateY(-2px);box-shadow:0 6px 15px #a76aff66}.bottom-nav{position:fixed;bottom:0;left:0;right:0;background:var(--dark-gradient-header);backdrop-filter:blur(15px);-webkit-backdrop-filter:blur(15px);display:flex;justify-content:space-around;border-top:1px solid rgba(255,255,255,.06);box-shadow:0 -4px 20px #00000040;padding:10px 0 6px;z-index:99}.nav-item{display:flex;flex-direction:column;align-items:center;color:var(--dark-on-background);opacity:.7;text-decoration:none;padding:8px 10px;border-radius:8px;transition:var(--dark-transition-default)}.nav-item.active{color:var(--dark-primary);opacity:1}.nav-item:hover{opacity:1;background-color:#ffffff0d}.cart-icon-container{position:relative}.cart-nav-badge{position:absolute;top:-8px;right:-8px;background-color:var(--dark-accent);color:var(--dark-on-primary);font-size:.7rem;font-weight:700;width:18px;height:18px;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 5px #0000004d}.cart-nav-item{transform:translateY(-20px);background:var(--dark-gradient-button);width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px #a76aff66;color:var(--dark-on-primary);opacity:1;transition:var(--dark-transition-slow)}.cart-nav-item:hover{transform:translateY(-25px) scale(1.05);filter:brightness(1.1);box-shadow:0 8px 20px #a76aff80;background:var(--dark-gradient-button);opacity:1}.home-container{padding-bottom:80px}.categories-container{padding:16px;margin-bottom:80px}.categories-header{margin-bottom:20px;padding:4px 0}.categories-header h1{color:var(--dark-on-surface);font-size:1.5rem;font-weight:700;margin:0;letter-spacing:.02rem;position:relative;display:inline-block}.categories-header h1:after{content:"";position:absolute;bottom:-8px;left:0;width:40px;height:3px;background:var(--dark-primary);border-radius:2px}.categories-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-top:24px}.category-card{background:var(--dark-gradient-card);border-radius:16px;padding:20px 16px;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;border:1px solid var(--dark-border);transition:var(--dark-transition-default);box-shadow:var(--dark-card-shadow);position:relative;overflow:hidden;min-height:140px}.category-card:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg,rgba(167,106,255,.1),transparent);opacity:0;transition:var(--dark-transition-default);z-index:1}.category-card:hover{transform:translateY(-5px);box-shadow:0 12px 24px #00000040;border-color:var(--dark-primary-variant)}.category-card:hover:before{opacity:1}.category-card:active{transform:translateY(0);transition:var(--dark-transition-default)}.category-icon{width:60px;height:60px;object-fit:contain;margin-bottom:14px;filter:drop-shadow(0 4px 8px rgba(0,0,0,.5));transition:var(--dark-transition-default);z-index:2}.category-card:hover .category-icon{transform:scale(1.1)}.category-card h2{font-size:1.1rem;font-weight:600;color:var(--dark-on-surface);margin:0;text-align:center;transition:var(--dark-transition-default);z-index:2}.category-card:hover h2{color:var(--dark-primary)}.category-card .category-icon[alt=Image]{font-size:2.5rem;background:none;filter:none}@media (min-width: 640px){.categories-grid{grid-template-columns:repeat(3,1fr)}.categories-header h1{font-size:1.8rem}}@media (min-width: 1024px){.categories-grid{grid-template-columns:repeat(4,1fr)}}@keyframes pulseGlow{0%{box-shadow:0 5px 15px #a76aff33}50%{box-shadow:0 5px 25px #a76aff66}to{box-shadow:0 5px 15px #a76aff33}}.category-card:hover{animation:pulseGlow 2s infinite ease-in-out}.categories-empty{text-align:center;padding:40px 20px;color:var(--dark-on-background);opacity:.7}.categories-empty svg{font-size:3rem;margin-bottom:16px;color:var(--dark-primary);opacity:.6}:root{--primary-color: #000000;--primary-light: #1b0101;--secondary-color: #ff5722;--text-color: #ffffff;--text-light: #ffffff;--border-color: #fcd6d600;--background-light: #635959;--shadow: 0 2px 8px rgba(0, 0, 0, 0);--status-pending: #f0ad4e;--status-processing: #5bc0de;--status-shipped: #337ab7;--status-delivered: #5cb85c;--status-cancelled: #d9534f}.user-orders-container{max-width:1200px;margin:0 auto;padding:20px;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.user-orders-container h1{font-size:24px;font-weight:600;margin-bottom:24px;color:var(--text-color)}.orders-list{display:flex;flex-direction:column;gap:16px}.order-card{background:linear-gradient(145deg,#000,#5c5ca3);border-radius:10px;box-shadow:var(rgba(255, 255, 255, 0), 0 4px 20px rgba(0, 0, 0, .1));padding:16px;transition:transform .2s ease}.order-card:hover{transform:translateY(-2px)}.order-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px;padding-bottom:12px;border-bottom:1px solid var(--border-color)}.order-id-date h3{font-size:16px;font-weight:600;margin:0;color:var(--text-color)}.order-date{font-size:13px;color:var(--text-light);display:block;margin-top:4px}.status-badge{padding:6px 12px;border-radius:20px;font-size:12px;font-weight:500;text-transform:uppercase}.status-badge.pending{background-color:#fff3cd;color:#856404}.status-badge.processing{background-color:#d1ecf1;color:#0c5460}.status-badge.shipped{background-color:#cce5ff;color:#004085}.status-badge.delivered{background-color:#d4edda;color:#155724}.status-badge.cancelled{background-color:#f8d7da;color:#721c24}.order-items-preview{display:flex;overflow-x:auto;gap:12px;padding-bottom:12px;scrollbar-width:thin}.order-items-preview::-webkit-scrollbar{height:4px}.order-items-preview::-webkit-scrollbar-thumb{background-color:var(--border-color);border-radius:4px}.item-preview{min-width:80px;max-width:80px;text-align:center}.item-image-container{position:relative;width:70px;height:70px;margin:0 auto}.item-image{width:100%;height:100%;object-fit:cover;border-radius:8px;border:1px solid var(--border-color)}.item-quantity{position:absolute;top:-5px;right:-5px;background-color:var(--primary-color);color:#fff;border-radius:12px;padding:2px 6px;font-size:10px;font-weight:600}.item-name{font-size:12px;margin-top:6px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.more-items{display:flex;align-items:center;justify-content:center;min-width:70px;height:70px;background-color:var(--background-light);border-radius:8px;font-size:12px;color:var(--text-light)}.order-summary{display:flex;justify-content:space-between;align-items:center;margin-top:16px;padding-top:12px;border-top:1px solid var(--border-color)}.order-total{font-size:14px}.order-total p{margin:4px 0}.payment-status{color:var(--text-light);font-size:13px}.order-actions{display:flex;gap:8px}button{cursor:pointer;border:none;border-radius:6px;padding:8px 16px;font-size:14px;font-weight:500;transition:all .2s ease}button:disabled{opacity:.5;cursor:not-allowed}.btn-primary{background-color:var(--primary-color);color:#fff}.btn-primary:hover{background-color:#0a701a}.btn-details{background-color:#fff;color:var(--primary-color);border:1px solid var(--primary-color)}.btn-details:hover{background-color:var(--primary-light)}.btn-confirm-delivery{background-color:var(--primary-color);color:#fff}.btn-confirm-delivery:hover{background-color:#0a701a}.btn-confirm-payment{background-color:#337ab7;color:#fff}.btn-confirm-payment:hover{background-color:#286090}.btn-cancel{background-color:#fff;color:var(--status-cancelled);border:1px solid var(--status-cancelled)}.btn-cancel:hover{background-color:#fff5f5}.btn-close{background-color:var(--background-light);color:var(--text-color)}.order-details-modal{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content{background-color:#fff;border-radius:12px;box-shadow:0 4px 20px #00000026;width:90%;max-width:700px;max-height:90vh;overflow-y:auto;padding:24px;position:relative}.modal-header h2{font-size:20px;font-weight:600;margin:0}.close-button{font-size:24px;cursor:pointer;color:var(--text-light)}.close-button:hover{color:var(--text-color)}.order-status-timeline{display:flex;justify-content:space-between;margin:30px 0;position:relative}.order-status-timeline:before{content:"";position:absolute;top:15px;left:20px;right:20px;height:2px;background-color:var(--border-color);z-index:0}.status-step{display:flex;flex-direction:column;align-items:center;position:relative;z-index:1;flex:1;text-align:center}.status-icon{width:30px;height:30px;background-color:#fff;border:2px solid var(--border-color);border-radius:50%;display:flex;align-items:center;justify-content:center;margin-bottom:8px;font-size:14px;color:var(--text-light)}.status-step.completed .status-icon{background-color:var(--primary-color);border-color:var(--primary-color);color:#fff}.status-step.cancelled .status-icon{background-color:var(--status-cancelled);border-color:var(--status-cancelled);color:#fff}.status-label{font-size:12px;font-weight:500;margin-bottom:4px}.status-time{font-size:10px;color:var(--text-light)}.order-info{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:24px}@media (max-width: 768px){.order-info{grid-template-columns:1fr}}.info-section{background-color:var(--background-light);padding:16px;border-radius:8px}.info-section h3{font-size:16px;font-weight:600;margin-top:0;margin-bottom:12px}.info-section p{margin:8px 0;font-size:14px}.order-items-detail{margin-bottom:24px}.order-item{display:flex;padding:12px 0;border-bottom:1px solid var(--border-color)}.order-item:last-child{border-bottom:none}.order-item .item-image-container{width:60px;height:60px;margin-right:16px}.order-item .item-details{flex:1}.order-item h4{font-size:16px;margin:0 0 4px}.item-price{font-size:14px;color:var(--text-light);margin:4px 0}.item-subtotal{font-size:14px;font-weight:600;margin:4px 0}.order-summary-detail{background-color:var(--background-light);padding:16px;border-radius:8px;margin-bottom:24px}.summary-row{display:flex;justify-content:space-between;padding:8px 0;font-size:14px}.summary-row.discount{color:var(--secondary-color)}.summary-row.total{border-top:1px solid var(--border-color);padding-top:12px;margin-top:4px;font-weight:600;font-size:16px}.modal-actions{display:flex;justify-content:flex-end;gap:12px;margin-top:24px}.loading-container{display:flex;flex-direction:column;align-items:center;justify-content:center;height:200px}.loading-spinner{border:4px solid rgba(0,0,0,.1);border-left-color:var(--primary-color);border-radius:50%;width:40px;height:40px;animation:spin 1s linear infinite;margin-bottom:16px}@keyframes spin{to{transform:rotate(360deg)}}.error-container{background-color:#f8d7da;color:#721c24;padding:16px;border-radius:8px;margin:24px 0;text-align:center}.empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.empty-icon{width:120px;height:120px;margin-bottom:24px;opacity:.7}.empty-state h2{font-size:20px;margin-bottom:12px}.empty-state p{color:var(--text-light);margin-bottom:24px}@media (max-width: 768px){.user-orders-container{padding:16px}.order-summary{flex-direction:column;align-items:flex-start;gap:16px}.order-actions{width:100%;justify-content:space-between}.modal-content{width:95%;padding:16px}.order-info{grid-template-columns:1fr}button{padding:8px 12px;font-size:13px}}@media (max-width: 480px){.order-actions{flex-wrap:wrap;gap:8px}.order-actions button{flex:1;min-width:120px;margin-bottom:8px}.order-header{flex-direction:column;gap:8px}.status-badge{align-self:flex-start}.modal-actions{flex-direction:column}.modal-actions button{width:100%}.order-status-timeline{flex-direction:column;align-items:flex-start;gap:24px}.order-status-timeline:before{top:0;bottom:0;left:15px;right:auto;height:100%;width:2px}.status-step{width:100%;flex-direction:row;align-items:flex-start;text-align:left;gap:16px}.status-icon,.status-label{margin-bottom:0}}.order-card.shipped .status-badge{position:relative;overflow:hidden}.order-card.shipped .status-badge:after{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);animation:shine 2s infinite}@keyframes shine{to{left:100%}}.refresh-orders{background-color:transparent;color:var(--primary-color);display:flex;align-items:center;gap:8px;padding:8px 12px;margin-left:auto;margin-bottom:16px;cursor:pointer;border:1px solid var(--border-color);border-radius:8px;transition:all .2s ease}.refresh-orders:hover{background-color:var(--primary-light)}.refresh-icon{width:16px;height:16px}.order-filters{display:flex;gap:12px;margin-bottom:20px;flex-wrap:wrap}.filter-chip{background-color:var(--background-light);border:1px solid var(--border-color);padding:6px 12px;border-radius:20px;font-size:13px;cursor:pointer;transition:all .2s ease}.filter-chip.active{background-color:var(--primary-color);color:#fff;border-color:var(--primary-color)}.filter-chip:hover:not(.active){border-color:var(--primary-color);color:var(--primary-color)}.order-card{position:relative;overflow:hidden}.order-card:after{content:"";position:absolute;top:0;left:0;width:4px;height:100%;opacity:0;transition:opacity .3s ease}.order-card.pending:after{background-color:var(--status-pending)}.order-card.processing:after{background-color:var(--status-processing)}.order-card.shipped:after{background-color:var(--status-shipped)}.order-card.delivered:after{background-color:var(--status-delivered)}.order-card.cancelled:after{background-color:var(--status-cancelled)}.order-card:hover:after{opacity:1}.tooltip{position:relative}.tooltip .tooltip-text{visibility:hidden;width:120px;background-color:#333;color:#fff;text-align:center;border-radius:6px;padding:5px;position:absolute;z-index:1;bottom:125%;left:50%;transform:translate(-50%);opacity:0;transition:opacity .3s;font-size:12px}.tooltip:hover .tooltip-text{visibility:visible;opacity:1}.btn-details{position:relative;overflow:hidden}.btn-details:after{content:"";position:absolute;top:50%;left:50%;width:0;height:0;background:#0c831f1a;border-radius:50%;transform:translate(-50%,-50%);transition:width .5s,height .5s}.btn-details:hover:after{width:300px;height:300px}.btn-reorder{background-color:#fff;color:var(--primary-color);border:1px solid var(--primary-color);display:flex;align-items:center;gap:4px}.btn-reorder:hover{background-color:var(--primary-light)}.reorder-icon{width:14px;height:14px}.orders-date-group{margin-bottom:20px}.date-group-header{font-size:14px;font-weight:500;color:var(--text-light);margin-bottom:12px;display:flex;align-items:center}.date-group-header:after{content:"";flex:1;height:1px;background-color:var(--border-color);margin-left:12px}.order-card.processing .status-badge{position:relative}.order-card.processing .status-badge:before{content:"";position:absolute;width:10px;height:10px;border-radius:50%;background-color:#0c5460;left:8px;top:50%;transform:translateY(-50%);animation:pulse 1.5s infinite}@keyframes pulse{0%{transform:translateY(-50%) scale(.95);box-shadow:0 0 #0c546080}70%{transform:translateY(-50%) scale(1);box-shadow:0 0 0 10px #0c546000}to{transform:translateY(-50%) scale(.95);box-shadow:0 0 #0c546000}}.item-details-header{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--border-color);padding-bottom:12px;margin-bottom:12px;font-weight:600;font-size:14px}.item-details-header span:first-child{flex:3}.item-details-header span:nth-child(2),.item-details-header span:nth-child(3){flex:1;text-align:center}.item-details-header span:last-child{flex:1;text-align:right}.order-item{display:flex;align-items:center}.item-name-section{flex:3;display:flex;align-items:center}.item-price-section,.item-quantity-section{flex:1;text-align:center}.item-subtotal-section{flex:1;text-align:right}@keyframes shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}.order-skeleton{background-color:#fff;border-radius:10px;box-shadow:var(--shadow);padding:16px;margin-bottom:16px}.skeleton-line{height:16px;border-radius:4px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:shimmer 1.5s infinite;margin-bottom:12px}.skeleton-line.short{width:30%}.skeleton-line.medium{width:60%}.skeleton-line.long{width:90%}.offline-notice{background-color:#fff3cd;color:#856404;border:1px solid #ffeeba;padding:12px;border-radius:8px;text-align:center;margin-bottom:16px;display:flex;align-items:center;justify-content:center;gap:8px}.offline-notice svg{width:18px;height:18px}.toast{position:fixed;bottom:24px;left:50%;transform:translate(-50%);padding:12px 24px;border-radius:8px;box-shadow:0 4px 12px #00000026;z-index:1100;font-size:14px;display:flex;align-items:center;gap:8px;animation:fadeInUp .3s ease-out}.toast.success{background-color:#d4edda;color:#155724;border-left:4px solid #155724}.toast.error{background-color:#f8d7da;color:#721c24;border-left:4px solid #721c24}@keyframes fadeInUp{0%{opacity:0;transform:translate(-50%,20px)}to{opacity:1;transform:translate(-50%)}}.btn-print{background-color:#fff;color:var(--text-color);border:1px solid var(--border-color);display:flex;align-items:center;gap:4px}.btn-print:hover{background-color:var(--background-light)}@media print{body *{visibility:hidden}.modal-content,.modal-content *{visibility:visible}.modal-content{position:absolute;left:0;top:0;width:100%;height:auto;box-shadow:none;background-color:#fff}.close-button,.modal-actions{display:none!important}}.usero{display:flex}.user-orders-container{max-width:1200px;margin:0 auto;padding:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.usero{font-size:28px;font-weight:600;color:#333;margin-bottom:24px;text-align:center}.orders-list{display:flex;flex-direction:column;gap:20px;margin-bottom:60px}.order-card{background-color:#fff;border-radius:12px;box-shadow:0 4px 8px #0000001a;padding:20px;transition:transform .2s}.order-card:hover{transform:translateY(-3px);box-shadow:0 6px 12px #00000026}.order-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;border-bottom:1px solid #f0f0f0;padding-bottom:12px}.order-id-date h3{font-size:18px;margin:0 0 4px;color:#333}.order-date{color:#666;font-size:14px}.status-badge{padding:6px 12px;border-radius:20px;font-size:14px;font-weight:500}.status-pending{background-color:#fff8e1;color:#f9a825}.status-processing{background-color:#e3f2fd;color:#1976d2}.status-shipped{background-color:#e0f7fa;color:#00acc1}.status-arrived{background-color:#e8f5e9;color:#388e3c}.status-paymentneed{background-color:#ffebee;color:#d32f2f}.status-payment,.status-delivered{background-color:#e8f5e9;color:#388e3c}.status-cancelled{background-color:#fafafa;color:#9e9e9e}.btn-view-details,.btn-confirm-delivery,.btn-confirm-received,.btn-confirm-payment,.btn-cancel,.btn-close{padding:8px 16px;border-radius:6px;font-size:14px;cursor:pointer;transition:all .2s;border:none;font-weight:500}.btn-view-details{background-color:#f5f5f5;color:#333}.btn-view-details:hover{background-color:#e0e0e0}.btn-confirm-delivery,.btn-confirm-received,.btn-confirm-payment{background-color:#4caf50;color:#fff}.btn-confirm-delivery:hover,.btn-confirm-received:hover,.btn-confirm-payment:hover{background-color:#43a047}.btn-cancel{background-color:#f44336;color:#fff}.btn-cancel:hover{background-color:#e53935}.btn-cancel:disabled{background-color:#ffcdd2;cursor:not-allowed}.btn-close{background-color:#f5f5f5;color:#333}.btn-close:hover{background-color:#e0e0e0}.order-details-modal{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px;overflow-y:auto}.modal-content{background-color:#fff;border-radius:12px;box-shadow:0 10px 25px #0003;width:100%;max-width:800px;max-height:90vh;overflow-y:auto;padding:24px;position:relative}.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.modal-header h2{margin:0;font-size:24px;color:#333}.close-button{font-size:28px;color:#777;cursor:pointer;line-height:1}.close-button:hover{color:#333}.order-status-timeline{display:flex;justify-content:space-between;margin:30px 0;position:relative;overflow-x:auto;padding-bottom:10px}.order-status-timeline:before{content:"";position:absolute;top:16px;left:0;right:0;height:2px;background-color:#e0e0e0;z-index:1}.status-step{display:flex;flex-direction:column;align-items:center;position:relative;z-index:2}.product-details-page{background-color:var(--dark-bg);min-height:100vh;padding:16px 16px 80px}.product-details-container{max-width:1200px;margin:0 auto;background:var(--dark-gradient-card);border-radius:16px;overflow:hidden;box-shadow:var(--dark-card-shadow);border:1px solid rgba(255,255,255,.08)}.back-nav{padding:16px 20px;background:#0a0a0c99;backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px)}.back-link{display:inline-flex;align-items:center;padding:8px 16px;background-color:var(--dark-surface-2);color:var(--dark-on-background);border:none;border-radius:8px;cursor:pointer;font-size:.95rem;font-weight:500;transition:var(--dark-transition-default);text-decoration:none;border:1px solid rgba(255,255,255,.08)}.back-link:hover{background-color:var(--dark-surface-3);transform:translateY(-2px);border-color:var(--dark-primary);color:var(--dark-primary)}.product-content{display:grid;grid-template-columns:45% 55%;gap:0}@media (max-width: 768px){.product-content{grid-template-columns:1fr}}.product-image-section{padding:24px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#0f0f14,#13131a);border-right:1px solid rgba(255,255,255,.05)}.product-image-wrapper{width:100%;height:0;padding-bottom:100%;position:relative;border-radius:12px;overflow:hidden;box-shadow:0 12px 24px #0000004d;transition:var(--dark-transition-slow);background:linear-gradient(145deg,#0c0c10,#16161e)}.product-image-wrapper:hover{transform:scale(1.02);box-shadow:0 16px 32px #0006}.product-image{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:contain;transition:var(--dark-transition-default)}.product-image-placeholder{width:100%;aspect-ratio:1/1;display:flex;align-items:center;justify-content:center;background:linear-gradient(145deg,#0c0c10,#16161e);color:#ffffff80;font-size:1rem;border-radius:12px;border:1px dashed rgba(255,255,255,.2)}.product-info-section{padding:32px;display:flex;flex-direction:column;gap:20px}.product-category{margin-bottom:-10px}.product-category span{background-color:var(--dark-surface-2);color:var(--dark-primary);padding:6px 12px;border-radius:20px;font-size:.8rem;font-weight:600;text-transform:uppercase;letter-spacing:.05rem;display:inline-block;border:1px solid rgba(167,106,255,.3)}.product-title{font-size:2.5rem;font-weight:700;margin:0;color:var(--dark-on-surface);letter-spacing:-.02em;line-height:1.2;background:linear-gradient(to right,var(--dark-on-surface),rgba(255,255,255,.8));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}.product-price{display:flex;align-items:baseline;gap:12px;margin-top:-5px}.current-price{font-size:2rem;font-weight:700;color:var(--dark-primary)}.discount-info{display:flex;align-items:center;gap:8px}.original-price{font-size:1.1rem;color:#ffffff80;text-decoration:line-through}.discount-badge{background:var(--dark-gradient-primary);color:#fff;font-size:.75rem;font-weight:700;padding:4px 8px;border-radius:4px;box-shadow:0 2px 8px #a76aff80;animation:pulse 2s infinite}@keyframes pulse{0%{box-shadow:0 0 #a76affb3}70%{box-shadow:0 0 0 8px #a76aff00}to{box-shadow:0 0 #a76aff00}}.product-description{margin-top:10px;border-radius:12px;padding:16px;background-color:var(--dark-surface);border:1px solid rgba(255,255,255,.08)}.product-description h3{font-size:1.2rem;font-weight:600;margin-top:0;margin-bottom:12px;color:var(--dark-primary)}.product-description p{font-size:1rem;line-height:1.6;color:var(--dark-on-background);margin:0}.product-meta{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:16px;padding:16px;background-color:var(--dark-surface);border-radius:12px;border:1px solid rgba(255,255,255,.08)}.meta-item{display:flex;flex-direction:column;gap:4px}.meta-label{font-size:.75rem;color:#fff9;text-transform:uppercase;font-weight:600;letter-spacing:.05rem}.meta-value{font-size:.95rem;font-weight:500;color:var(--dark-on-background)}.in-stock{color:var(--dark-success);font-weight:600}.out-of-stock{color:var(--dark-error);font-weight:600}.order-notes{margin-top:5px}.order-notes textarea{width:100%;padding:16px;background-color:var(--dark-surface);border:1px solid rgba(255,255,255,.08);border-radius:12px;resize:vertical;min-height:80px;color:var(--dark-on-background);font-family:inherit;font-size:.95rem;line-height:1.5;transition:var(--dark-transition-default)}.order-notes textarea:focus{outline:none;border-color:var(--dark-primary);box-shadow:0 0 0 2px #a76aff40}.order-notes textarea::placeholder{color:#fff6}.product-actions{display:flex;gap:16px;margin-top:10px}.add-to-cart-button,.wishlist-button{display:flex;align-items:center;justify-content:center;gap:8px;padding:14px 24px;border-radius:10px;font-size:1rem;font-weight:600;border:none;cursor:pointer;transition:var(--dark-transition-default)}.add-to-cart-button{background:var(--dark-gradient-button);color:#fff;flex:3;box-shadow:0 6px 12px #7a29ff4d}.add-to-cart-button:hover{transform:translateY(-3px);box-shadow:0 10px 18px #7a29ff66}.add-to-cart-button:active{transform:translateY(-1px)}.add-to-cart-button:disabled{background:linear-gradient(135deg,#656565,#454545);opacity:.7;cursor:not-allowed;transform:none;box-shadow:none}.wishlist-button{background-color:transparent;border:2px solid var(--dark-primary);color:var(--dark-primary);flex:2}.wishlist-button:hover{background-color:#a76aff1a;transform:translateY(-3px)}.wishlist-button .button-icon{font-size:1.2rem;transition:transform .3s ease}.wishlist-button:hover .button-icon{transform:scale(1.2)}.loading-container{display:flex;justify-content:center;align-items:center;height:80vh;background-color:var(--dark-bg)}.loading-spinner{width:50px;height:50px;border:4px solid rgba(167,106,255,.1);border-radius:50%;border-top:4px solid var(--dark-primary);animation:spin 1s cubic-bezier(.68,-.55,.27,1.55) infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-container{display:flex;justify-content:center;align-items:center;height:80vh;background-color:var(--dark-bg)}.error-box{background:var(--dark-surface-2);border-radius:12px;padding:32px;text-align:center;max-width:400px;border:1px solid rgba(255,0,76,.2);box-shadow:0 10px 25px #0000004d}.error-title{color:var(--dark-error);font-size:1.5rem;margin-top:0}.error-message{color:var(--dark-on-background);margin-bottom:24px}.back-button{background-color:var(--dark-surface-3);color:var(--dark-on-background);border:none;padding:12px 24px;border-radius:8px;font-weight:600;cursor:pointer;transition:var(--dark-transition-default)}.back-button:hover{background-color:var(--dark-primary);color:var(--dark-on-primary);transform:translateY(-2px)}@media (max-width: 992px){.product-title{font-size:2rem}.current-price{font-size:1.75rem}}@media (max-width: 768px){.product-content{grid-template-columns:1fr}.product-image-section{border-right:none;border-bottom:1px solid rgba(255,255,255,.05);padding:20px}.product-image-wrapper{max-width:400px;margin:0 auto}.product-info-section{padding:24px}.product-actions{flex-direction:column}.add-to-cart-button,.wishlist-button{width:100%}}@media (max-width: 480px){.product-title{font-size:1.5rem}.product-price{flex-direction:column;align-items:flex-start}.current-price{font-size:1.5rem}.product-meta{grid-template-columns:1fr}}@keyframes fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.product-content{animation:fadeIn .5s ease-out}.product-image-section{animation:fadeIn .5s ease-out .1s backwards}.product-info-section{animation:fadeIn .5s ease-out .2s backwards}@media (min-width: 769px){.product-image-wrapper{overflow:hidden}.product-image-wrapper:hover .product-image{transform:scale(1.1)}}.electronics-container{max-width:1200px;margin:0 auto;padding:20px}.electronics-title{font-size:28px;font-weight:700;margin-bottom:24px}.loading-message{text-align:center;padding:20px;font-size:18px}.error-message{color:#e74c3c;padding:20px;font-size:16px}.no-products-message{padding:20px;font-size:16px}.products-grid{display:grid;grid-template-columns:repeat(1,1fr);gap:20px}@media (min-width: 768px){.products-grid{grid-template-columns:repeat(2,1fr)}}@media (min-width: 1024px){.products-grid{grid-template-columns:repeat(3,1fr)}}.product-card{border:1px solid #e2e2e2;border-radius:8px;box-shadow:0 2px 8px #0000001a;padding:16px;transition:transform .2s}.product-card:hover{transform:translateY(-5px)}.product-image{width:100%;height:200px;object-fit:cover;border-radius:4px;margin-bottom:16px}.product-name{font-size:20px;font-weight:600;margin-bottom:8px}.product-description{color:#666;margin-bottom:10px;line-height:1.5}.product-details{display:flex;justify-content:space-between;align-items:center;margin-top:16px}.product-price{font-size:18px;font-weight:700}.in-stock{color:#27ae60}.out-of-stock{color:#e74c3c}.add-to-cart-button{display:block;width:100%;margin-top:16px;padding:10px;background-color:#3498db;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:16px;transition:background-color .3s}.add-to-cart-button:hover{background-color:#2980b9}
</style>
    <script type="module" >(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var wm={exports:{}},Kl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jv;function uS(){if(jv)return Kl;jv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:r,type:s,key:d,ref:o!==void 0?o:null,props:c}}return Kl.Fragment=e,Kl.jsx=n,Kl.jsxs=n,Kl}var Uv;function hS(){return Uv||(Uv=1,wm.exports=uS()),wm.exports}var g=hS(),Am={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lv;function dS(){if(Lv)return Fe;Lv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.iterator;function S(D){return D===null||typeof D!="object"?null:(D=A&&D[A]||D["@@iterator"],typeof D=="function"?D:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,q={};function z(D,ie,fe){this.props=D,this.context=ie,this.refs=q,this.updater=fe||P}z.prototype.isReactComponent={},z.prototype.setState=function(D,ie){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,ie,"setState")},z.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function Y(){}Y.prototype=z.prototype;function ae(D,ie,fe){this.props=D,this.context=ie,this.refs=q,this.updater=fe||P}var W=ae.prototype=new Y;W.constructor=ae,U(W,z.prototype),W.isPureReactComponent=!0;var de=Array.isArray,ce={H:null,A:null,T:null,S:null,V:null},le=Object.prototype.hasOwnProperty;function x(D,ie,fe,he,xe,Ce){return fe=Ce.ref,{$$typeof:r,type:D,key:ie,ref:fe!==void 0?fe:null,props:Ce}}function R(D,ie){return x(D.type,ie,void 0,void 0,void 0,D.props)}function I(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function O(D){var ie={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(fe){return ie[fe]})}var M=/\/+/g;function L(D,ie){return typeof D=="object"&&D!==null&&D.key!=null?O(""+D.key):ie.toString(36)}function N(){}function ge(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(N,N):(D.status="pending",D.then(function(ie){D.status==="pending"&&(D.status="fulfilled",D.value=ie)},function(ie){D.status==="pending"&&(D.status="rejected",D.reason=ie)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function Oe(D,ie,fe,he,xe){var Ce=typeof D;(Ce==="undefined"||Ce==="boolean")&&(D=null);var ke=!1;if(D===null)ke=!0;else switch(Ce){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(D.$$typeof){case r:case e:ke=!0;break;case T:return ke=D._init,Oe(ke(D._payload),ie,fe,he,xe)}}if(ke)return xe=xe(D),ke=he===""?"."+L(D,0):he,de(xe)?(fe="",ke!=null&&(fe=ke.replace(M,"$&/")+"/"),Oe(xe,ie,fe,"",function(Hn){return Hn})):xe!=null&&(I(xe)&&(xe=R(xe,fe+(xe.key==null||D&&D.key===xe.key?"":(""+xe.key).replace(M,"$&/")+"/")+ke)),ie.push(xe)),1;ke=0;var Se=he===""?".":he+":";if(de(D))for(var et=0;et<D.length;et++)he=D[et],Ce=Se+L(he,et),ke+=Oe(he,ie,fe,Ce,xe);else if(et=S(D),typeof et=="function")for(D=et.call(D),et=0;!(he=D.next()).done;)he=he.value,Ce=Se+L(he,et++),ke+=Oe(he,ie,fe,Ce,xe);else if(Ce==="object"){if(typeof D.then=="function")return Oe(ge(D),ie,fe,he,xe);throw ie=String(D),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return ke}function K(D,ie,fe){if(D==null)return D;var he=[],xe=0;return Oe(D,he,"","",function(Ce){return ie.call(fe,Ce,xe++)}),he}function ue(D){if(D._status===-1){var ie=D._result;ie=ie(),ie.then(function(fe){(D._status===0||D._status===-1)&&(D._status=1,D._result=fe)},function(fe){(D._status===0||D._status===-1)&&(D._status=2,D._result=fe)}),D._status===-1&&(D._status=0,D._result=ie)}if(D._status===1)return D._result.default;throw D._result}var Ae=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function Ye(){}return Fe.Children={map:K,forEach:function(D,ie,fe){K(D,function(){ie.apply(this,arguments)},fe)},count:function(D){var ie=0;return K(D,function(){ie++}),ie},toArray:function(D){return K(D,function(ie){return ie})||[]},only:function(D){if(!I(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Fe.Component=z,Fe.Fragment=n,Fe.Profiler=o,Fe.PureComponent=ae,Fe.StrictMode=s,Fe.Suspense=p,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ce,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(D){return ce.H.useMemoCache(D)}},Fe.cache=function(D){return function(){return D.apply(null,arguments)}},Fe.cloneElement=function(D,ie,fe){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var he=U({},D.props),xe=D.key,Ce=void 0;if(ie!=null)for(ke in ie.ref!==void 0&&(Ce=void 0),ie.key!==void 0&&(xe=""+ie.key),ie)!le.call(ie,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&ie.ref===void 0||(he[ke]=ie[ke]);var ke=arguments.length-2;if(ke===1)he.children=fe;else if(1<ke){for(var Se=Array(ke),et=0;et<ke;et++)Se[et]=arguments[et+2];he.children=Se}return x(D.type,xe,void 0,void 0,Ce,he)},Fe.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},Fe.createElement=function(D,ie,fe){var he,xe={},Ce=null;if(ie!=null)for(he in ie.key!==void 0&&(Ce=""+ie.key),ie)le.call(ie,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(xe[he]=ie[he]);var ke=arguments.length-2;if(ke===1)xe.children=fe;else if(1<ke){for(var Se=Array(ke),et=0;et<ke;et++)Se[et]=arguments[et+2];xe.children=Se}if(D&&D.defaultProps)for(he in ke=D.defaultProps,ke)xe[he]===void 0&&(xe[he]=ke[he]);return x(D,Ce,void 0,void 0,null,xe)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(D){return{$$typeof:m,render:D}},Fe.isValidElement=I,Fe.lazy=function(D){return{$$typeof:T,_payload:{_status:-1,_result:D},_init:ue}},Fe.memo=function(D,ie){return{$$typeof:y,type:D,compare:ie===void 0?null:ie}},Fe.startTransition=function(D){var ie=ce.T,fe={};ce.T=fe;try{var he=D(),xe=ce.S;xe!==null&&xe(fe,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(Ye,Ae)}catch(Ce){Ae(Ce)}finally{ce.T=ie}},Fe.unstable_useCacheRefresh=function(){return ce.H.useCacheRefresh()},Fe.use=function(D){return ce.H.use(D)},Fe.useActionState=function(D,ie,fe){return ce.H.useActionState(D,ie,fe)},Fe.useCallback=function(D,ie){return ce.H.useCallback(D,ie)},Fe.useContext=function(D){return ce.H.useContext(D)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(D,ie){return ce.H.useDeferredValue(D,ie)},Fe.useEffect=function(D,ie,fe){var he=ce.H;if(typeof fe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return he.useEffect(D,ie)},Fe.useId=function(){return ce.H.useId()},Fe.useImperativeHandle=function(D,ie,fe){return ce.H.useImperativeHandle(D,ie,fe)},Fe.useInsertionEffect=function(D,ie){return ce.H.useInsertionEffect(D,ie)},Fe.useLayoutEffect=function(D,ie){return ce.H.useLayoutEffect(D,ie)},Fe.useMemo=function(D,ie){return ce.H.useMemo(D,ie)},Fe.useOptimistic=function(D,ie){return ce.H.useOptimistic(D,ie)},Fe.useReducer=function(D,ie,fe){return ce.H.useReducer(D,ie,fe)},Fe.useRef=function(D){return ce.H.useRef(D)},Fe.useState=function(D){return ce.H.useState(D)},Fe.useSyncExternalStore=function(D,ie,fe){return ce.H.useSyncExternalStore(D,ie,fe)},Fe.useTransition=function(){return ce.H.useTransition()},Fe.version="19.1.0",Fe}var zv;function Tp(){return zv||(zv=1,Am.exports=dS()),Am.exports}var k=Tp(),Sm={exports:{}},Ql={},Rm={exports:{}},Im={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bv;function fS(){return Bv||(Bv=1,function(r){function e(K,ue){var Ae=K.length;K.push(ue);e:for(;0<Ae;){var Ye=Ae-1>>>1,D=K[Ye];if(0<o(D,ue))K[Ye]=ue,K[Ae]=D,Ae=Ye;else break e}}function n(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var ue=K[0],Ae=K.pop();if(Ae!==ue){K[0]=Ae;e:for(var Ye=0,D=K.length,ie=D>>>1;Ye<ie;){var fe=2*(Ye+1)-1,he=K[fe],xe=fe+1,Ce=K[xe];if(0>o(he,Ae))xe<D&&0>o(Ce,he)?(K[Ye]=Ce,K[xe]=Ae,Ye=xe):(K[Ye]=he,K[fe]=Ae,Ye=fe);else if(xe<D&&0>o(Ce,Ae))K[Ye]=Ce,K[xe]=Ae,Ye=xe;else break e}}return ue}function o(K,ue){var Ae=K.sortIndex-ue.sortIndex;return Ae!==0?Ae:K.id-ue.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();r.unstable_now=function(){return d.now()-m}}var p=[],y=[],T=1,A=null,S=3,P=!1,U=!1,q=!1,z=!1,Y=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function de(K){for(var ue=n(y);ue!==null;){if(ue.callback===null)s(y);else if(ue.startTime<=K)s(y),ue.sortIndex=ue.expirationTime,e(p,ue);else break;ue=n(y)}}function ce(K){if(q=!1,de(K),!U)if(n(p)!==null)U=!0,le||(le=!0,L());else{var ue=n(y);ue!==null&&Oe(ce,ue.startTime-K)}}var le=!1,x=-1,R=5,I=-1;function O(){return z?!0:!(r.unstable_now()-I<R)}function M(){if(z=!1,le){var K=r.unstable_now();I=K;var ue=!0;try{e:{U=!1,q&&(q=!1,ae(x),x=-1),P=!0;var Ae=S;try{t:{for(de(K),A=n(p);A!==null&&!(A.expirationTime>K&&O());){var Ye=A.callback;if(typeof Ye=="function"){A.callback=null,S=A.priorityLevel;var D=Ye(A.expirationTime<=K);if(K=r.unstable_now(),typeof D=="function"){A.callback=D,de(K),ue=!0;break t}A===n(p)&&s(p),de(K)}else s(p);A=n(p)}if(A!==null)ue=!0;else{var ie=n(y);ie!==null&&Oe(ce,ie.startTime-K),ue=!1}}break e}finally{A=null,S=Ae,P=!1}ue=void 0}}finally{ue?L():le=!1}}}var L;if(typeof W=="function")L=function(){W(M)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,ge=N.port2;N.port1.onmessage=M,L=function(){ge.postMessage(null)}}else L=function(){Y(M,0)};function Oe(K,ue){x=Y(function(){K(r.unstable_now())},ue)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(K){K.callback=null},r.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<K?Math.floor(1e3/K):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(K){switch(S){case 1:case 2:case 3:var ue=3;break;default:ue=S}var Ae=S;S=ue;try{return K()}finally{S=Ae}},r.unstable_requestPaint=function(){z=!0},r.unstable_runWithPriority=function(K,ue){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var Ae=S;S=K;try{return ue()}finally{S=Ae}},r.unstable_scheduleCallback=function(K,ue,Ae){var Ye=r.unstable_now();switch(typeof Ae=="object"&&Ae!==null?(Ae=Ae.delay,Ae=typeof Ae=="number"&&0<Ae?Ye+Ae:Ye):Ae=Ye,K){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=Ae+D,K={id:T++,callback:ue,priorityLevel:K,startTime:Ae,expirationTime:D,sortIndex:-1},Ae>Ye?(K.sortIndex=Ae,e(y,K),n(p)===null&&K===n(y)&&(q?(ae(x),x=-1):q=!0,Oe(ce,Ae-Ye))):(K.sortIndex=D,e(p,K),U||P||(U=!0,le||(le=!0,L()))),K},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(K){var ue=S;return function(){var Ae=S;S=ue;try{return K.apply(this,arguments)}finally{S=Ae}}}}(Im)),Im}var qv;function mS(){return qv||(qv=1,Rm.exports=fS()),Rm.exports}var xm={exports:{}},Rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv;function pS(){if(Hv)return Rn;Hv=1;var r=Tp();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(p,y,T){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:p,containerInfo:y,implementation:T}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Rn.createPortal=function(p,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(p,y,null,T)},Rn.flushSync=function(p){var y=d.T,T=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=y,s.p=T,s.d.f()}},Rn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(p,y))},Rn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Rn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var T=y.as,A=m(T,y.crossOrigin),S=typeof y.integrity=="string"?y.integrity:void 0,P=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?s.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:A,integrity:S,fetchPriority:P}):T==="script"&&s.d.X(p,{crossOrigin:A,integrity:S,fetchPriority:P,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Rn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=m(y.as,y.crossOrigin);s.d.M(p,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(p)},Rn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,A=m(T,y.crossOrigin);s.d.L(p,T,{crossOrigin:A,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Rn.preloadModule=function(p,y){if(typeof p=="string")if(y){var T=m(y.as,y.crossOrigin);s.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(p)},Rn.requestFormReset=function(p){s.d.r(p)},Rn.unstable_batchedUpdates=function(p,y){return p(y)},Rn.useFormState=function(p,y,T){return d.H.useFormState(p,y,T)},Rn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Rn.version="19.1.0",Rn}var Fv;function gS(){if(Fv)return xm.exports;Fv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),xm.exports=pS(),xm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gv;function yS(){if(Gv)return Ql;Gv=1;var r=mS(),e=Tp(),n=gS();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function d(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(c(t)!==t)throw Error(s(188))}function p(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return m(h),t;if(f===l)return m(h),i;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=f;else{for(var E=!1,b=h.child;b;){if(b===a){E=!0,a=h,l=f;break}if(b===l){E=!0,l=h,a=f;break}b=b.sibling}if(!E){for(b=f.child;b;){if(b===a){E=!0,a=f,l=h;break}if(b===l){E=!0,l=f,a=h;break}b=b.sibling}if(!E)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function y(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=y(t),i!==null)return i;t=t.sibling}return null}var T=Object.assign,A=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),ae=Symbol.for("react.consumer"),W=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function ge(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case U:return"Fragment";case z:return"Profiler";case q:return"StrictMode";case ce:return"Suspense";case le:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case P:return"Portal";case W:return(t.displayName||"Context")+".Provider";case ae:return(t._context.displayName||"Context")+".Consumer";case de:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case x:return i=t.displayName||null,i!==null?i:ge(t.type)||"Memo";case R:i=t._payload,t=t._init;try{return ge(t(i))}catch{}}return null}var Oe=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ae={pending:!1,data:null,method:null,action:null},Ye=[],D=-1;function ie(t){return{current:t}}function fe(t){0>D||(t.current=Ye[D],Ye[D]=null,D--)}function he(t,i){D++,Ye[D]=t.current,t.current=i}var xe=ie(null),Ce=ie(null),ke=ie(null),Se=ie(null);function et(t,i){switch(he(ke,i),he(Ce,t),he(xe,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?hv(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=hv(i),t=dv(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}fe(xe),he(xe,t)}function Hn(){fe(xe),fe(Ce),fe(ke)}function An(t){t.memoizedState!==null&&he(Se,t);var i=xe.current,a=dv(i,t.type);i!==a&&(he(Ce,t),he(xe,a))}function Jt(t){Ce.current===t&&(fe(xe),fe(Ce)),Se.current===t&&(fe(Se),ql._currentValue=Ae)}var Fn=Object.prototype.hasOwnProperty,_i=r.unstable_scheduleCallback,vi=r.unstable_cancelCallback,Pi=r.unstable_shouldYield,ur=r.unstable_requestPaint,mn=r.unstable_now,Hs=r.unstable_getCurrentPriorityLevel,Ei=r.unstable_ImmediatePriority,Gn=r.unstable_UserBlockingPriority,Ti=r.unstable_NormalPriority,$r=r.unstable_LowPriority,pn=r.unstable_IdlePriority,hr=r.log,ri=r.unstable_setDisableYieldValue,yt=null,oe=null;function pe(t){if(typeof hr=="function"&&ri(t),oe&&typeof oe.setStrictMode=="function")try{oe.setStrictMode(yt,t)}catch{}}var _e=Math.clz32?Math.clz32:rt,Ge=Math.log,Xe=Math.LN2;function rt(t){return t>>>=0,t===0?32:31-(Ge(t)/Xe|0)|0}var He=256,ht=4194304;function Ue(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function wt(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,f=t.suspendedLanes,E=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~f,l!==0?h=Ue(l):(E&=b,E!==0?h=Ue(E):a||(a=b&~t,a!==0&&(h=Ue(a))))):(b=l&~f,b!==0?h=Ue(b):E!==0?h=Ue(E):a||(a=l&~t,a!==0&&(h=Ue(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function _t(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function j(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Z(){var t=He;return He<<=1,(He&4194048)===0&&(He=256),t}function J(){var t=ht;return ht<<=1,(ht&62914560)===0&&(ht=4194304),t}function ve(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function be(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function st(t,i,a,l,h,f){var E=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,C=t.expirationTimes,G=t.hiddenUpdates;for(a=E&~a;0<a;){var ee=31-_e(a),re=1<<ee;b[ee]=0,C[ee]=-1;var $=G[ee];if($!==null)for(G[ee]=null,ee=0;ee<$.length;ee++){var Q=$[ee];Q!==null&&(Q.lane&=-536870913)}a&=~re}l!==0&&qe(t,l,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(E&~i))}function qe(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-_e(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function mt(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-_e(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function ze(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Dt(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function At(){var t=ue.p;return t!==0?t:(t=window.event,t===void 0?32:Dv(t.type))}function zt(t,i){var a=ue.p;try{return ue.p=t,i()}finally{ue.p=a}}var $e=Math.random().toString(36).slice(2),at="__reactFiber$"+$e,pt="__reactProps$"+$e,$t="__reactContainer$"+$e,Ko="__reactEvents$"+$e,Sd="__reactListeners$"+$e,Kr="__reactHandles$"+$e,Lc="__reactResources$"+$e,Fs="__reactMarker$"+$e;function Qr(t){delete t[at],delete t[pt],delete t[Ko],delete t[Sd],delete t[Kr]}function dr(t){var i=t[at];if(i)return i;for(var a=t.parentNode;a;){if(i=a[$t]||a[at]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=gv(t);t!==null;){if(a=t[at])return a;t=gv(t)}return i}t=a,a=t.parentNode}return null}function Mi(t){if(t=t[at]||t[$t]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function Vi(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function On(t){var i=t[Lc];return i||(i=t[Lc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Bt(t){t[Fs]=!0}var Qo=new Set,Oa={};function bi(t,i){fr(t,i),fr(t+"Capture",i)}function fr(t,i){for(Oa[t]=i,t=0;t<i.length;t++)Qo.add(i[t])}var zc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bc={},Gs={};function qc(t){return Fn.call(Gs,t)?!0:Fn.call(Bc,t)?!1:zc.test(t)?Gs[t]=!0:(Bc[t]=!0,!1)}function Yr(t,i,a){if(qc(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function ji(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function gn(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}var $s,Hc;function mr(t){if($s===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);$s=i&&i[1]||"",Hc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$s+t+Hc}var ka=!1;function Pa(t,i){if(!t||ka)return"";ka=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(Q){var $=Q}Reflect.construct(t,[],re)}else{try{re.call()}catch(Q){$=Q}t.call(re.prototype)}}else{try{throw Error()}catch(Q){$=Q}(re=t())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(Q){if(Q&&$&&typeof Q.stack=="string")return[Q.stack,$.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),E=f[0],b=f[1];if(E&&b){var C=E.split(`
`),G=b.split(`
`);for(h=l=0;l<C.length&&!C[l].includes("DetermineComponentFrameRoot");)l++;for(;h<G.length&&!G[h].includes("DetermineComponentFrameRoot");)h++;if(l===C.length||h===G.length)for(l=C.length-1,h=G.length-1;1<=l&&0<=h&&C[l]!==G[h];)h--;for(;1<=l&&0<=h;l--,h--)if(C[l]!==G[h]){if(l!==1||h!==1)do if(l--,h--,0>h||C[l]!==G[h]){var ee=`
`+C[l].replace(" at new "," at ");return t.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",t.displayName)),ee}while(1<=l&&0<=h);break}}}finally{ka=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?mr(a):""}function Yo(t){switch(t.tag){case 26:case 27:case 5:return mr(t.type);case 16:return mr("Lazy");case 13:return mr("Suspense");case 19:return mr("SuspenseList");case 0:case 15:return Pa(t.type,!1);case 11:return Pa(t.type.render,!1);case 1:return Pa(t.type,!0);case 31:return mr("Activity");default:return""}}function Ma(t){try{var i="";do i+=Yo(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function kn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Xo(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Rd(t){var i=Xo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(E){l=""+E,f.call(this,E)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Va(t){t._valueTracker||(t._valueTracker=Rd(t))}function Wo(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Xo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function Ks(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Id=/[\n"\\]/g;function Kt(t){return t.replace(Id,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function $n(t,i,a,l,h,f,E,b){t.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.type=E:t.removeAttribute("type"),i!=null?E==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+kn(i)):t.value!==""+kn(i)&&(t.value=""+kn(i)):E!=="submit"&&E!=="reset"||t.removeAttribute("value"),i!=null?Xr(t,E,kn(i)):a!=null?Xr(t,E,kn(a)):l!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+kn(b):t.removeAttribute("name")}function Qs(t,i,a,l,h,f,E,b){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null))return;a=a!=null?""+kn(a):"",i=i!=null?""+kn(i):a,b||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(t.name=E)}function Xr(t,i,a){i==="number"&&Ks(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function pr(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+kn(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function St(t,i,a){if(i!=null&&(i=""+kn(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+kn(a):""}function Ys(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(Oe(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=kn(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function si(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Xs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fc(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||Xs.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Zo(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Fc(t,h,l)}else for(var f in i)i.hasOwnProperty(f)&&Fc(t,f,i[f])}function Jo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Nd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ja(t){return Nd.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var gr=null;function ai(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yr=null,_r=null;function el(t){var i=Mi(t);if(i&&(t=i.stateNode)){var a=t[pt]||null;e:switch(t=i.stateNode,i.type){case"input":if($n(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Kt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[pt]||null;if(!h)throw Error(s(90));$n(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Wo(l)}break e;case"textarea":St(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&pr(t,!!a.multiple,i,!1)}}}var Ui=!1;function Gc(t,i,a){if(Ui)return t(i,a);Ui=!0;try{var l=t(i);return l}finally{if(Ui=!1,(yr!==null||_r!==null)&&(Uu(),yr&&(i=yr,t=_r,_r=yr=null,el(i),t)))for(i=0;i<t.length;i++)el(t[i])}}function Ws(t,i){var a=t.stateNode;if(a===null)return null;var l=a[pt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oi=!1;if(wi)try{var Zs={};Object.defineProperty(Zs,"passive",{get:function(){oi=!0}}),window.addEventListener("test",Zs,Zs),window.removeEventListener("test",Zs,Zs)}catch{oi=!1}var Li=null,Wr=null,vr=null;function tl(){if(vr)return vr;var t,i=Wr,a=i.length,l,h="value"in Li?Li.value:Li.textContent,f=h.length;for(t=0;t<a&&i[t]===h[t];t++);var E=a-t;for(l=1;l<=E&&i[a-l]===h[f-l];l++);return vr=h.slice(t,1<l?1-l:void 0)}function zi(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Bi(){return!0}function nl(){return!1}function ln(t){function i(a,l,h,f,E){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=E,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(f):f[b]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Bi:nl,this.isPropagationStopped=nl,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Bi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Bi)},persist:function(){},isPersistent:Bi}),i}var vt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ua=ln(vt),Js=T({},vt,{view:0,detail:0}),$c=ln(Js),La,za,qi,ea=T({},Js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ia,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qi&&(qi&&t.type==="mousemove"?(La=t.screenX-qi.screenX,za=t.screenY-qi.screenY):za=La=0,qi=t),La)},movementY:function(t){return"movementY"in t?t.movementY:za}}),li=ln(ea),Kc=T({},ea,{dataTransfer:0}),Cd=ln(Kc),ta=T({},Js,{relatedTarget:0}),Ba=ln(ta),il=T({},vt,{animationName:0,elapsedTime:0,pseudoElement:0}),qa=ln(il),Qc=T({},vt,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ha=ln(Qc),Dd=T({},vt,{data:0}),rl=ln(Dd),na={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sl(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Xc[t])?!!i[t]:!1}function ia(){return sl}var Wc=T({},Js,{key:function(t){if(t.key){var i=na[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=zi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Yc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ia,charCode:function(t){return t.type==="keypress"?zi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Fa=ln(Wc),Zc=T({},ea,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),al=ln(Zc),Er=T({},Js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ia}),Jc=ln(Er),eu=T({},vt,{propertyName:0,elapsedTime:0,pseudoElement:0}),tu=ln(eu),nu=T({},ea,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ga=ln(nu),Pn=T({},vt,{newState:0,oldState:0}),iu=ln(Pn),ru=[9,13,27,32],Hi=wi&&"CompositionEvent"in window,u=null;wi&&"documentMode"in document&&(u=document.documentMode);var _=wi&&"TextEvent"in window&&!u,v=wi&&(!Hi||u&&8<u&&11>=u),w=" ",H=!1;function X(t,i){switch(t){case"keyup":return ru.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function me(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ot=!1;function en(t,i){switch(t){case"compositionend":return me(i);case"keypress":return i.which!==32?null:(H=!0,w);case"textInput":return t=i.data,t===w&&H?null:t;default:return null}}function lt(t,i){if(ot)return t==="compositionend"||!Hi&&X(t,i)?(t=tl(),vr=Wr=Li=null,ot=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return v&&i.locale!=="ko"?null:i.data;default:return null}}var cn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tn(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!cn[t.type]:i==="textarea"}function Tr(t,i,a,l){yr?_r?_r.push(l):_r=[l]:yr=l,i=Fu(i,"onChange"),0<i.length&&(a=new Ua("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var yn=null,Fi=null;function ol(t){av(t,0)}function su(t){var i=Vi(t);if(Wo(i))return t}function Ig(t,i){if(t==="change")return i}var xg=!1;if(wi){var Od;if(wi){var kd="oninput"in document;if(!kd){var Ng=document.createElement("div");Ng.setAttribute("oninput","return;"),kd=typeof Ng.oninput=="function"}Od=kd}else Od=!1;xg=Od&&(!document.documentMode||9<document.documentMode)}function Cg(){yn&&(yn.detachEvent("onpropertychange",Dg),Fi=yn=null)}function Dg(t){if(t.propertyName==="value"&&su(Fi)){var i=[];Tr(i,Fi,t,ai(t)),Gc(ol,i)}}function zw(t,i,a){t==="focusin"?(Cg(),yn=i,Fi=a,yn.attachEvent("onpropertychange",Dg)):t==="focusout"&&Cg()}function Bw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return su(Fi)}function qw(t,i){if(t==="click")return su(i)}function Hw(t,i){if(t==="input"||t==="change")return su(i)}function Fw(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Kn=typeof Object.is=="function"?Object.is:Fw;function ll(t,i){if(Kn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Fn.call(i,h)||!Kn(t[h],i[h]))return!1}return!0}function Og(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kg(t,i){var a=Og(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Og(a)}}function Pg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Pg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Mg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Ks(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Ks(t.document)}return i}function Pd(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var Gw=wi&&"documentMode"in document&&11>=document.documentMode,$a=null,Md=null,cl=null,Vd=!1;function Vg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Vd||$a==null||$a!==Ks(l)||(l=$a,"selectionStart"in l&&Pd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),cl&&ll(cl,l)||(cl=l,l=Fu(Md,"onSelect"),0<l.length&&(i=new Ua("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=$a)))}function ra(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Ka={animationend:ra("Animation","AnimationEnd"),animationiteration:ra("Animation","AnimationIteration"),animationstart:ra("Animation","AnimationStart"),transitionrun:ra("Transition","TransitionRun"),transitionstart:ra("Transition","TransitionStart"),transitioncancel:ra("Transition","TransitionCancel"),transitionend:ra("Transition","TransitionEnd")},jd={},jg={};wi&&(jg=document.createElement("div").style,"AnimationEvent"in window||(delete Ka.animationend.animation,delete Ka.animationiteration.animation,delete Ka.animationstart.animation),"TransitionEvent"in window||delete Ka.transitionend.transition);function sa(t){if(jd[t])return jd[t];if(!Ka[t])return t;var i=Ka[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in jg)return jd[t]=i[a];return t}var Ug=sa("animationend"),Lg=sa("animationiteration"),zg=sa("animationstart"),$w=sa("transitionrun"),Kw=sa("transitionstart"),Qw=sa("transitioncancel"),Bg=sa("transitionend"),qg=new Map,Ud="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ud.push("scrollEnd");function Ai(t,i){qg.set(t,i),bi(i,[t])}var Hg=new WeakMap;function ci(t,i){if(typeof t=="object"&&t!==null){var a=Hg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:Ma(i)},Hg.set(t,i),i)}return{value:t,source:i,stack:Ma(i)}}var ui=[],Qa=0,Ld=0;function au(){for(var t=Qa,i=Ld=Qa=0;i<t;){var a=ui[i];ui[i++]=null;var l=ui[i];ui[i++]=null;var h=ui[i];ui[i++]=null;var f=ui[i];if(ui[i++]=null,l!==null&&h!==null){var E=l.pending;E===null?h.next=h:(h.next=E.next,E.next=h),l.pending=h}f!==0&&Fg(a,h,f)}}function ou(t,i,a,l){ui[Qa++]=t,ui[Qa++]=i,ui[Qa++]=a,ui[Qa++]=l,Ld|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function zd(t,i,a,l){return ou(t,i,a,l),lu(t)}function Ya(t,i){return ou(t,null,null,i),lu(t)}function Fg(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&i!==null&&(h=31-_e(a),t=f.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),f):null}function lu(t){if(50<Pl)throw Pl=0,Kf=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Xa={};function Yw(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(t,i,a,l){return new Yw(t,i,a,l)}function Bd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function br(t,i){var a=t.alternate;return a===null?(a=Qn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Gg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function cu(t,i,a,l,h,f){var E=0;if(l=t,typeof t=="function")Bd(t)&&(E=1);else if(typeof t=="string")E=WA(t,a,xe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=Qn(31,a,i,h),t.elementType=I,t.lanes=f,t;case U:return aa(a.children,h,f,i);case q:E=8,h|=24;break;case z:return t=Qn(12,a,i,h|2),t.elementType=z,t.lanes=f,t;case ce:return t=Qn(13,a,i,h),t.elementType=ce,t.lanes=f,t;case le:return t=Qn(19,a,i,h),t.elementType=le,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y:case W:E=10;break e;case ae:E=9;break e;case de:E=11;break e;case x:E=14;break e;case R:E=16,l=null;break e}E=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=Qn(E,a,i,h),i.elementType=t,i.type=l,i.lanes=f,i}function aa(t,i,a,l){return t=Qn(7,t,l,i),t.lanes=a,t}function qd(t,i,a){return t=Qn(6,t,null,i),t.lanes=a,t}function Hd(t,i,a){return i=Qn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Wa=[],Za=0,uu=null,hu=0,hi=[],di=0,oa=null,wr=1,Ar="";function la(t,i){Wa[Za++]=hu,Wa[Za++]=uu,uu=t,hu=i}function $g(t,i,a){hi[di++]=wr,hi[di++]=Ar,hi[di++]=oa,oa=t;var l=wr;t=Ar;var h=32-_e(l)-1;l&=~(1<<h),a+=1;var f=32-_e(i)+h;if(30<f){var E=h-h%5;f=(l&(1<<E)-1).toString(32),l>>=E,h-=E,wr=1<<32-_e(i)+h|a<<h|l,Ar=f+t}else wr=1<<f|a<<h|l,Ar=t}function Fd(t){t.return!==null&&(la(t,1),$g(t,1,0))}function Gd(t){for(;t===uu;)uu=Wa[--Za],Wa[Za]=null,hu=Wa[--Za],Wa[Za]=null;for(;t===oa;)oa=hi[--di],hi[di]=null,Ar=hi[--di],hi[di]=null,wr=hi[--di],hi[di]=null}var Mn=null,Ut=null,gt=!1,ca=null,Gi=!1,$d=Error(s(519));function ua(t){var i=Error(s(418,""));throw dl(ci(i,t)),$d}function Kg(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[at]=t,i[pt]=l,a){case"dialog":Je("cancel",i),Je("close",i);break;case"iframe":case"object":case"embed":Je("load",i);break;case"video":case"audio":for(a=0;a<Vl.length;a++)Je(Vl[a],i);break;case"source":Je("error",i);break;case"img":case"image":case"link":Je("error",i),Je("load",i);break;case"details":Je("toggle",i);break;case"input":Je("invalid",i),Qs(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Va(i);break;case"select":Je("invalid",i);break;case"textarea":Je("invalid",i),Ys(i,l.value,l.defaultValue,l.children),Va(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||uv(i.textContent,a)?(l.popover!=null&&(Je("beforetoggle",i),Je("toggle",i)),l.onScroll!=null&&Je("scroll",i),l.onScrollEnd!=null&&Je("scrollend",i),l.onClick!=null&&(i.onclick=Gu),i=!0):i=!1,i||ua(t)}function Qg(t){for(Mn=t.return;Mn;)switch(Mn.tag){case 5:case 13:Gi=!1;return;case 27:case 3:Gi=!0;return;default:Mn=Mn.return}}function ul(t){if(t!==Mn)return!1;if(!gt)return Qg(t),gt=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||cm(t.type,t.memoizedProps)),a=!a),a&&Ut&&ua(t),Qg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){Ut=Ri(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}Ut=null}}else i===27?(i=Ut,fs(t.type)?(t=fm,fm=null,Ut=t):Ut=i):Ut=Mn?Ri(t.stateNode.nextSibling):null;return!0}function hl(){Ut=Mn=null,gt=!1}function Yg(){var t=ca;return t!==null&&(zn===null?zn=t:zn.push.apply(zn,t),ca=null),t}function dl(t){ca===null?ca=[t]:ca.push(t)}var Kd=ie(null),ha=null,Sr=null;function Zr(t,i,a){he(Kd,i._currentValue),i._currentValue=a}function Rr(t){t._currentValue=Kd.current,fe(Kd)}function Qd(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Yd(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var E=h.child;f=f.firstContext;e:for(;f!==null;){var b=f;f=h;for(var C=0;C<i.length;C++)if(b.context===i[C]){f.lanes|=a,b=f.alternate,b!==null&&(b.lanes|=a),Qd(f.return,a,t),l||(E=null);break e}f=b.next}}else if(h.tag===18){if(E=h.return,E===null)throw Error(s(341));E.lanes|=a,f=E.alternate,f!==null&&(f.lanes|=a),Qd(E,a,t),E=null}else E=h.child;if(E!==null)E.return=h;else for(E=h;E!==null;){if(E===t){E=null;break}if(h=E.sibling,h!==null){h.return=E.return,E=h;break}E=E.return}h=E}}function fl(t,i,a,l){t=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var E=h.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var b=h.type;Kn(h.pendingProps.value,E.value)||(t!==null?t.push(b):t=[b])}}else if(h===Se.current){if(E=h.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(ql):t=[ql])}h=h.return}t!==null&&Yd(i,t,a,l),i.flags|=262144}function du(t){for(t=t.firstContext;t!==null;){if(!Kn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function da(t){ha=t,Sr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Sn(t){return Xg(ha,t)}function fu(t,i){return ha===null&&da(t),Xg(t,i)}function Xg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Sr===null){if(t===null)throw Error(s(308));Sr=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Sr=Sr.next=i;return a}var Xw=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},Ww=r.unstable_scheduleCallback,Zw=r.unstable_NormalPriority,nn={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xd(){return{controller:new Xw,data:new Map,refCount:0}}function ml(t){t.refCount--,t.refCount===0&&Ww(Zw,function(){t.controller.abort()})}var pl=null,Wd=0,Ja=0,eo=null;function Jw(t,i){if(pl===null){var a=pl=[];Wd=0,Ja=em(),eo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Wd++,i.then(Wg,Wg),i}function Wg(){if(--Wd===0&&pl!==null){eo!==null&&(eo.status="fulfilled");var t=pl;pl=null,Ja=0,eo=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function eA(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Zg=K.S;K.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Jw(t,i),Zg!==null&&Zg(t,i)};var fa=ie(null);function Zd(){var t=fa.current;return t!==null?t:Ct.pooledCache}function mu(t,i){i===null?he(fa,fa.current):he(fa,i.pool)}function Jg(){var t=Zd();return t===null?null:{parent:nn._currentValue,pool:t}}var gl=Error(s(460)),ey=Error(s(474)),pu=Error(s(542)),Jd={then:function(){}};function ty(t){return t=t.status,t==="fulfilled"||t==="rejected"}function gu(){}function ny(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(gu,gu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,ry(t),t;default:if(typeof i.status=="string")i.then(gu,gu);else{if(t=Ct,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,ry(t),t}throw yl=i,gl}}var yl=null;function iy(){if(yl===null)throw Error(s(459));var t=yl;return yl=null,t}function ry(t){if(t===gl||t===pu)throw Error(s(483))}var Jr=!1;function ef(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function es(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ts(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Tt&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=lu(t),Fg(t,null,a),i}return ou(t,l,i,a),lu(t)}function _l(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,mt(t,a)}}function nf(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=E:f=f.next=E,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var rf=!1;function vl(){if(rf){var t=eo;if(t!==null)throw t}}function El(t,i,a,l){rf=!1;var h=t.updateQueue;Jr=!1;var f=h.firstBaseUpdate,E=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var C=b,G=C.next;C.next=null,E===null?f=G:E.next=G,E=C;var ee=t.alternate;ee!==null&&(ee=ee.updateQueue,b=ee.lastBaseUpdate,b!==E&&(b===null?ee.firstBaseUpdate=G:b.next=G,ee.lastBaseUpdate=C))}if(f!==null){var re=h.baseState;E=0,ee=G=C=null,b=f;do{var $=b.lane&-536870913,Q=$!==b.lane;if(Q?(ct&$)===$:(l&$)===$){$!==0&&$===Ja&&(rf=!0),ee!==null&&(ee=ee.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var Ve=t,De=b;$=i;var xt=a;switch(De.tag){case 1:if(Ve=De.payload,typeof Ve=="function"){re=Ve.call(xt,re,$);break e}re=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=De.payload,$=typeof Ve=="function"?Ve.call(xt,re,$):Ve,$==null)break e;re=T({},re,$);break e;case 2:Jr=!0}}$=b.callback,$!==null&&(t.flags|=64,Q&&(t.flags|=8192),Q=h.callbacks,Q===null?h.callbacks=[$]:Q.push($))}else Q={lane:$,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ee===null?(G=ee=Q,C=re):ee=ee.next=Q,E|=$;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;Q=b,b=Q.next,Q.next=null,h.lastBaseUpdate=Q,h.shared.pending=null}}while(!0);ee===null&&(C=re),h.baseState=C,h.firstBaseUpdate=G,h.lastBaseUpdate=ee,f===null&&(h.shared.lanes=0),cs|=E,t.lanes=E,t.memoizedState=re}}function sy(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function ay(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)sy(a[t],i)}var to=ie(null),yu=ie(0);function oy(t,i){t=kr,he(yu,t),he(to,i),kr=t|i.baseLanes}function sf(){he(yu,kr),he(to,to.current)}function af(){kr=yu.current,fe(to),fe(yu)}var ns=0,Ke=null,Rt=null,Qt=null,_u=!1,no=!1,ma=!1,vu=0,Tl=0,io=null,tA=0;function qt(){throw Error(s(321))}function of(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!Kn(t[a],i[a]))return!1;return!0}function lf(t,i,a,l,h,f){return ns=f,Ke=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,K.H=t===null||t.memoizedState===null?Fy:Gy,ma=!1,f=a(l,h),ma=!1,no&&(f=cy(i,a,l,h)),ly(t),f}function ly(t){K.H=Su;var i=Rt!==null&&Rt.next!==null;if(ns=0,Qt=Rt=Ke=null,_u=!1,Tl=0,io=null,i)throw Error(s(300));t===null||un||(t=t.dependencies,t!==null&&du(t)&&(un=!0))}function cy(t,i,a,l){Ke=t;var h=0;do{if(no&&(io=null),Tl=0,no=!1,25<=h)throw Error(s(301));if(h+=1,Qt=Rt=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}K.H=lA,f=i(a,l)}while(no);return f}function nA(){var t=K.H,i=t.useState()[0];return i=typeof i.then=="function"?bl(i):i,t=t.useState()[0],(Rt!==null?Rt.memoizedState:null)!==t&&(Ke.flags|=1024),i}function cf(){var t=vu!==0;return vu=0,t}function uf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function hf(t){if(_u){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}_u=!1}ns=0,Qt=Rt=Ke=null,no=!1,Tl=vu=0,io=null}function Un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?Ke.memoizedState=Qt=t:Qt=Qt.next=t,Qt}function Yt(){if(Rt===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=Rt.next;var i=Qt===null?Ke.memoizedState:Qt.next;if(i!==null)Qt=i,Rt=t;else{if(t===null)throw Ke.alternate===null?Error(s(467)):Error(s(310));Rt=t,t={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Qt===null?Ke.memoizedState=Qt=t:Qt=Qt.next=t}return Qt}function df(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bl(t){var i=Tl;return Tl+=1,io===null&&(io=[]),t=ny(io,t,i),i=Ke,(Qt===null?i.memoizedState:Qt.next)===null&&(i=i.alternate,K.H=i===null||i.memoizedState===null?Fy:Gy),t}function Eu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return bl(t);if(t.$$typeof===W)return Sn(t)}throw Error(s(438,String(t)))}function ff(t){var i=null,a=Ke.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ke.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=df(),Ke.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=O;return i.index++,a}function Ir(t,i){return typeof i=="function"?i(t):i}function Tu(t){var i=Yt();return mf(i,Rt,t)}function mf(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,f=l.pending;if(f!==null){if(h!==null){var E=h.next;h.next=f.next,f.next=E}i.baseQueue=h=f,l.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{i=h.next;var b=E=null,C=null,G=i,ee=!1;do{var re=G.lane&-536870913;if(re!==G.lane?(ct&re)===re:(ns&re)===re){var $=G.revertLane;if($===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),re===Ja&&(ee=!0);else if((ns&$)===$){G=G.next,$===Ja&&(ee=!0);continue}else re={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},C===null?(b=C=re,E=f):C=C.next=re,Ke.lanes|=$,cs|=$;re=G.action,ma&&a(f,re),f=G.hasEagerState?G.eagerState:a(f,re)}else $={lane:re,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},C===null?(b=C=$,E=f):C=C.next=$,Ke.lanes|=re,cs|=re;G=G.next}while(G!==null&&G!==i);if(C===null?E=f:C.next=b,!Kn(f,t.memoizedState)&&(un=!0,ee&&(a=eo,a!==null)))throw a;t.memoizedState=f,t.baseState=E,t.baseQueue=C,l.lastRenderedState=f}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function pf(t){var i=Yt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var E=h=h.next;do f=t(f,E.action),E=E.next;while(E!==h);Kn(f,i.memoizedState)||(un=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,l]}function uy(t,i,a){var l=Ke,h=Yt(),f=gt;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var E=!Kn((Rt||h).memoizedState,a);E&&(h.memoizedState=a,un=!0),h=h.queue;var b=fy.bind(null,l,h,t);if(wl(2048,8,b,[t]),h.getSnapshot!==i||E||Qt!==null&&Qt.memoizedState.tag&1){if(l.flags|=2048,ro(9,bu(),dy.bind(null,l,h,a,i),null),Ct===null)throw Error(s(349));f||(ns&124)!==0||hy(l,i,a)}return a}function hy(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ke.updateQueue,i===null?(i=df(),Ke.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function dy(t,i,a,l){i.value=a,i.getSnapshot=l,my(i)&&py(t)}function fy(t,i,a){return a(function(){my(i)&&py(t)})}function my(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!Kn(t,a)}catch{return!0}}function py(t){var i=Ya(t,2);i!==null&&Jn(i,t,2)}function gf(t){var i=Un();if(typeof t=="function"){var a=t;if(t=a(),ma){pe(!0);try{a()}finally{pe(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:t},i}function gy(t,i,a,l){return t.baseState=a,mf(t,Rt,typeof l=="function"?l:Ir)}function iA(t,i,a,l,h){if(Au(t))throw Error(s(485));if(t=i.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){f.listeners.push(E)}};K.T!==null?a(!0):f.isTransition=!1,l(f),a=i.pending,a===null?(f.next=i.pending=f,yy(i,f)):(f.next=a.next,i.pending=a.next=f)}}function yy(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var f=K.T,E={};K.T=E;try{var b=a(h,l),C=K.S;C!==null&&C(E,b),_y(t,i,b)}catch(G){yf(t,i,G)}finally{K.T=f}}else try{f=a(h,l),_y(t,i,f)}catch(G){yf(t,i,G)}}function _y(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){vy(t,i,l)},function(l){return yf(t,i,l)}):vy(t,i,a)}function vy(t,i,a){i.status="fulfilled",i.value=a,Ey(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,yy(t,a)))}function yf(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Ey(i),i=i.next;while(i!==l)}t.action=null}function Ey(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Ty(t,i){return i}function by(t,i){if(gt){var a=Ct.formState;if(a!==null){e:{var l=Ke;if(gt){if(Ut){t:{for(var h=Ut,f=Gi;h.nodeType!==8;){if(!f){h=null;break t}if(h=Ri(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){Ut=Ri(h.nextSibling),l=h.data==="F!";break e}}ua(l)}l=!1}l&&(i=a[0])}}return a=Un(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ty,lastRenderedState:i},a.queue=l,a=By.bind(null,Ke,l),l.dispatch=a,l=gf(!1),f=bf.bind(null,Ke,!1,l.queue),l=Un(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=iA.bind(null,Ke,h,f,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function wy(t){var i=Yt();return Ay(i,Rt,t)}function Ay(t,i,a){if(i=mf(t,i,Ty)[0],t=Tu(Ir)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=bl(i)}catch(E){throw E===gl?pu:E}else l=i;i=Yt();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(Ke.flags|=2048,ro(9,bu(),rA.bind(null,h,a),null)),[l,f,t]}function rA(t,i){t.action=i}function Sy(t){var i=Yt(),a=Rt;if(a!==null)return Ay(i,a,t);Yt(),i=i.memoizedState,a=Yt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function ro(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Ke.updateQueue,i===null&&(i=df(),Ke.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function bu(){return{destroy:void 0,resource:void 0}}function Ry(){return Yt().memoizedState}function wu(t,i,a,l){var h=Un();l=l===void 0?null:l,Ke.flags|=t,h.memoizedState=ro(1|i,bu(),a,l)}function wl(t,i,a,l){var h=Yt();l=l===void 0?null:l;var f=h.memoizedState.inst;Rt!==null&&l!==null&&of(l,Rt.memoizedState.deps)?h.memoizedState=ro(i,f,a,l):(Ke.flags|=t,h.memoizedState=ro(1|i,f,a,l))}function Iy(t,i){wu(8390656,8,t,i)}function xy(t,i){wl(2048,8,t,i)}function Ny(t,i){return wl(4,2,t,i)}function Cy(t,i){return wl(4,4,t,i)}function Dy(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Oy(t,i,a){a=a!=null?a.concat([t]):null,wl(4,4,Dy.bind(null,i,t),a)}function _f(){}function ky(t,i){var a=Yt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&of(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function Py(t,i){var a=Yt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&of(i,l[1]))return l[0];if(l=t(),ma){pe(!0);try{t()}finally{pe(!1)}}return a.memoizedState=[l,i],l}function vf(t,i,a){return a===void 0||(ns&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=j_(),Ke.lanes|=t,cs|=t,a)}function My(t,i,a,l){return Kn(a,i)?a:to.current!==null?(t=vf(t,a,l),Kn(t,i)||(un=!0),t):(ns&42)===0?(un=!0,t.memoizedState=a):(t=j_(),Ke.lanes|=t,cs|=t,i)}function Vy(t,i,a,l,h){var f=ue.p;ue.p=f!==0&&8>f?f:8;var E=K.T,b={};K.T=b,bf(t,!1,i,a);try{var C=h(),G=K.S;if(G!==null&&G(b,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var ee=eA(C,l);Al(t,i,ee,Zn(t))}else Al(t,i,l,Zn(t))}catch(re){Al(t,i,{then:function(){},status:"rejected",reason:re},Zn())}finally{ue.p=f,K.T=E}}function sA(){}function Ef(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=jy(t).queue;Vy(t,h,i,Ae,a===null?sA:function(){return Uy(t),a(l)})}function jy(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:Ae,baseState:Ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:Ae},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Uy(t){var i=jy(t).next.queue;Al(t,i,{},Zn())}function Tf(){return Sn(ql)}function Ly(){return Yt().memoizedState}function zy(){return Yt().memoizedState}function aA(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Zn();t=es(a);var l=ts(i,t,a);l!==null&&(Jn(l,i,a),_l(l,i,a)),i={cache:Xd()},t.payload=i;return}i=i.return}}function oA(t,i,a){var l=Zn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Au(t)?qy(i,a):(a=zd(t,i,a,l),a!==null&&(Jn(a,t,l),Hy(a,i,l)))}function By(t,i,a){var l=Zn();Al(t,i,a,l)}function Al(t,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Au(t))qy(i,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var E=i.lastRenderedState,b=f(E,a);if(h.hasEagerState=!0,h.eagerState=b,Kn(b,E))return ou(t,i,h,0),Ct===null&&au(),!1}catch{}finally{}if(a=zd(t,i,h,l),a!==null)return Jn(a,t,l),Hy(a,i,l),!0}return!1}function bf(t,i,a,l){if(l={lane:2,revertLane:em(),action:l,hasEagerState:!1,eagerState:null,next:null},Au(t)){if(i)throw Error(s(479))}else i=zd(t,a,l,2),i!==null&&Jn(i,t,2)}function Au(t){var i=t.alternate;return t===Ke||i!==null&&i===Ke}function qy(t,i){no=_u=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Hy(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,mt(t,a)}}var Su={readContext:Sn,use:Eu,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useLayoutEffect:qt,useInsertionEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useSyncExternalStore:qt,useId:qt,useHostTransitionStatus:qt,useFormState:qt,useActionState:qt,useOptimistic:qt,useMemoCache:qt,useCacheRefresh:qt},Fy={readContext:Sn,use:Eu,useCallback:function(t,i){return Un().memoizedState=[t,i===void 0?null:i],t},useContext:Sn,useEffect:Iy,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,wu(4194308,4,Dy.bind(null,i,t),a)},useLayoutEffect:function(t,i){return wu(4194308,4,t,i)},useInsertionEffect:function(t,i){wu(4,2,t,i)},useMemo:function(t,i){var a=Un();i=i===void 0?null:i;var l=t();if(ma){pe(!0);try{t()}finally{pe(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=Un();if(a!==void 0){var h=a(i);if(ma){pe(!0);try{a(i)}finally{pe(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=oA.bind(null,Ke,t),[l.memoizedState,t]},useRef:function(t){var i=Un();return t={current:t},i.memoizedState=t},useState:function(t){t=gf(t);var i=t.queue,a=By.bind(null,Ke,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:_f,useDeferredValue:function(t,i){var a=Un();return vf(a,t,i)},useTransition:function(){var t=gf(!1);return t=Vy.bind(null,Ke,t.queue,!0,!1),Un().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Ke,h=Un();if(gt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),Ct===null)throw Error(s(349));(ct&124)!==0||hy(l,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,Iy(fy.bind(null,l,f,t),[t]),l.flags|=2048,ro(9,bu(),dy.bind(null,l,f,a,i),null),a},useId:function(){var t=Un(),i=Ct.identifierPrefix;if(gt){var a=Ar,l=wr;a=(l&~(1<<32-_e(l)-1)).toString(32)+a,i=""+i+"R"+a,a=vu++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=tA++,i=""+i+"r"+a.toString(32)+"";return t.memoizedState=i},useHostTransitionStatus:Tf,useFormState:by,useActionState:by,useOptimistic:function(t){var i=Un();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=bf.bind(null,Ke,!0,a),a.dispatch=i,[t,i]},useMemoCache:ff,useCacheRefresh:function(){return Un().memoizedState=aA.bind(null,Ke)}},Gy={readContext:Sn,use:Eu,useCallback:ky,useContext:Sn,useEffect:xy,useImperativeHandle:Oy,useInsertionEffect:Ny,useLayoutEffect:Cy,useMemo:Py,useReducer:Tu,useRef:Ry,useState:function(){return Tu(Ir)},useDebugValue:_f,useDeferredValue:function(t,i){var a=Yt();return My(a,Rt.memoizedState,t,i)},useTransition:function(){var t=Tu(Ir)[0],i=Yt().memoizedState;return[typeof t=="boolean"?t:bl(t),i]},useSyncExternalStore:uy,useId:Ly,useHostTransitionStatus:Tf,useFormState:wy,useActionState:wy,useOptimistic:function(t,i){var a=Yt();return gy(a,Rt,t,i)},useMemoCache:ff,useCacheRefresh:zy},lA={readContext:Sn,use:Eu,useCallback:ky,useContext:Sn,useEffect:xy,useImperativeHandle:Oy,useInsertionEffect:Ny,useLayoutEffect:Cy,useMemo:Py,useReducer:pf,useRef:Ry,useState:function(){return pf(Ir)},useDebugValue:_f,useDeferredValue:function(t,i){var a=Yt();return Rt===null?vf(a,t,i):My(a,Rt.memoizedState,t,i)},useTransition:function(){var t=pf(Ir)[0],i=Yt().memoizedState;return[typeof t=="boolean"?t:bl(t),i]},useSyncExternalStore:uy,useId:Ly,useHostTransitionStatus:Tf,useFormState:Sy,useActionState:Sy,useOptimistic:function(t,i){var a=Yt();return Rt!==null?gy(a,Rt,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:ff,useCacheRefresh:zy},so=null,Sl=0;function Ru(t){var i=Sl;return Sl+=1,so===null&&(so=[]),ny(so,t,i)}function Rl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Iu(t,i){throw i.$$typeof===A?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function $y(t){var i=t._init;return i(t._payload)}function Ky(t){function i(B,V){if(t){var F=B.deletions;F===null?(B.deletions=[V],B.flags|=16):F.push(V)}}function a(B,V){if(!t)return null;for(;V!==null;)i(B,V),V=V.sibling;return null}function l(B){for(var V=new Map;B!==null;)B.key!==null?V.set(B.key,B):V.set(B.index,B),B=B.sibling;return V}function h(B,V){return B=br(B,V),B.index=0,B.sibling=null,B}function f(B,V,F){return B.index=F,t?(F=B.alternate,F!==null?(F=F.index,F<V?(B.flags|=67108866,V):F):(B.flags|=67108866,V)):(B.flags|=1048576,V)}function E(B){return t&&B.alternate===null&&(B.flags|=67108866),B}function b(B,V,F,te){return V===null||V.tag!==6?(V=qd(F,B.mode,te),V.return=B,V):(V=h(V,F),V.return=B,V)}function C(B,V,F,te){var we=F.type;return we===U?ee(B,V,F.props.children,te,F.key):V!==null&&(V.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===R&&$y(we)===V.type)?(V=h(V,F.props),Rl(V,F),V.return=B,V):(V=cu(F.type,F.key,F.props,null,B.mode,te),Rl(V,F),V.return=B,V)}function G(B,V,F,te){return V===null||V.tag!==4||V.stateNode.containerInfo!==F.containerInfo||V.stateNode.implementation!==F.implementation?(V=Hd(F,B.mode,te),V.return=B,V):(V=h(V,F.children||[]),V.return=B,V)}function ee(B,V,F,te,we){return V===null||V.tag!==7?(V=aa(F,B.mode,te,we),V.return=B,V):(V=h(V,F),V.return=B,V)}function re(B,V,F){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=qd(""+V,B.mode,F),V.return=B,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case S:return F=cu(V.type,V.key,V.props,null,B.mode,F),Rl(F,V),F.return=B,F;case P:return V=Hd(V,B.mode,F),V.return=B,V;case R:var te=V._init;return V=te(V._payload),re(B,V,F)}if(Oe(V)||L(V))return V=aa(V,B.mode,F,null),V.return=B,V;if(typeof V.then=="function")return re(B,Ru(V),F);if(V.$$typeof===W)return re(B,fu(B,V),F);Iu(B,V)}return null}function $(B,V,F,te){var we=V!==null?V.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return we!==null?null:b(B,V,""+F,te);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case S:return F.key===we?C(B,V,F,te):null;case P:return F.key===we?G(B,V,F,te):null;case R:return we=F._init,F=we(F._payload),$(B,V,F,te)}if(Oe(F)||L(F))return we!==null?null:ee(B,V,F,te,null);if(typeof F.then=="function")return $(B,V,Ru(F),te);if(F.$$typeof===W)return $(B,V,fu(B,F),te);Iu(B,F)}return null}function Q(B,V,F,te,we){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return B=B.get(F)||null,b(V,B,""+te,we);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case S:return B=B.get(te.key===null?F:te.key)||null,C(V,B,te,we);case P:return B=B.get(te.key===null?F:te.key)||null,G(V,B,te,we);case R:var We=te._init;return te=We(te._payload),Q(B,V,F,te,we)}if(Oe(te)||L(te))return B=B.get(F)||null,ee(V,B,te,we,null);if(typeof te.then=="function")return Q(B,V,F,Ru(te),we);if(te.$$typeof===W)return Q(B,V,F,fu(V,te),we);Iu(V,te)}return null}function Ve(B,V,F,te){for(var we=null,We=null,Ie=V,Pe=V=0,dn=null;Ie!==null&&Pe<F.length;Pe++){Ie.index>Pe?(dn=Ie,Ie=null):dn=Ie.sibling;var dt=$(B,Ie,F[Pe],te);if(dt===null){Ie===null&&(Ie=dn);break}t&&Ie&&dt.alternate===null&&i(B,Ie),V=f(dt,V,Pe),We===null?we=dt:We.sibling=dt,We=dt,Ie=dn}if(Pe===F.length)return a(B,Ie),gt&&la(B,Pe),we;if(Ie===null){for(;Pe<F.length;Pe++)Ie=re(B,F[Pe],te),Ie!==null&&(V=f(Ie,V,Pe),We===null?we=Ie:We.sibling=Ie,We=Ie);return gt&&la(B,Pe),we}for(Ie=l(Ie);Pe<F.length;Pe++)dn=Q(Ie,B,Pe,F[Pe],te),dn!==null&&(t&&dn.alternate!==null&&Ie.delete(dn.key===null?Pe:dn.key),V=f(dn,V,Pe),We===null?we=dn:We.sibling=dn,We=dn);return t&&Ie.forEach(function(_s){return i(B,_s)}),gt&&la(B,Pe),we}function De(B,V,F,te){if(F==null)throw Error(s(151));for(var we=null,We=null,Ie=V,Pe=V=0,dn=null,dt=F.next();Ie!==null&&!dt.done;Pe++,dt=F.next()){Ie.index>Pe?(dn=Ie,Ie=null):dn=Ie.sibling;var _s=$(B,Ie,dt.value,te);if(_s===null){Ie===null&&(Ie=dn);break}t&&Ie&&_s.alternate===null&&i(B,Ie),V=f(_s,V,Pe),We===null?we=_s:We.sibling=_s,We=_s,Ie=dn}if(dt.done)return a(B,Ie),gt&&la(B,Pe),we;if(Ie===null){for(;!dt.done;Pe++,dt=F.next())dt=re(B,dt.value,te),dt!==null&&(V=f(dt,V,Pe),We===null?we=dt:We.sibling=dt,We=dt);return gt&&la(B,Pe),we}for(Ie=l(Ie);!dt.done;Pe++,dt=F.next())dt=Q(Ie,B,Pe,dt.value,te),dt!==null&&(t&&dt.alternate!==null&&Ie.delete(dt.key===null?Pe:dt.key),V=f(dt,V,Pe),We===null?we=dt:We.sibling=dt,We=dt);return t&&Ie.forEach(function(cS){return i(B,cS)}),gt&&la(B,Pe),we}function xt(B,V,F,te){if(typeof F=="object"&&F!==null&&F.type===U&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case S:e:{for(var we=F.key;V!==null;){if(V.key===we){if(we=F.type,we===U){if(V.tag===7){a(B,V.sibling),te=h(V,F.props.children),te.return=B,B=te;break e}}else if(V.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===R&&$y(we)===V.type){a(B,V.sibling),te=h(V,F.props),Rl(te,F),te.return=B,B=te;break e}a(B,V);break}else i(B,V);V=V.sibling}F.type===U?(te=aa(F.props.children,B.mode,te,F.key),te.return=B,B=te):(te=cu(F.type,F.key,F.props,null,B.mode,te),Rl(te,F),te.return=B,B=te)}return E(B);case P:e:{for(we=F.key;V!==null;){if(V.key===we)if(V.tag===4&&V.stateNode.containerInfo===F.containerInfo&&V.stateNode.implementation===F.implementation){a(B,V.sibling),te=h(V,F.children||[]),te.return=B,B=te;break e}else{a(B,V);break}else i(B,V);V=V.sibling}te=Hd(F,B.mode,te),te.return=B,B=te}return E(B);case R:return we=F._init,F=we(F._payload),xt(B,V,F,te)}if(Oe(F))return Ve(B,V,F,te);if(L(F)){if(we=L(F),typeof we!="function")throw Error(s(150));return F=we.call(F),De(B,V,F,te)}if(typeof F.then=="function")return xt(B,V,Ru(F),te);if(F.$$typeof===W)return xt(B,V,fu(B,F),te);Iu(B,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,V!==null&&V.tag===6?(a(B,V.sibling),te=h(V,F),te.return=B,B=te):(a(B,V),te=qd(F,B.mode,te),te.return=B,B=te),E(B)):a(B,V)}return function(B,V,F,te){try{Sl=0;var we=xt(B,V,F,te);return so=null,we}catch(Ie){if(Ie===gl||Ie===pu)throw Ie;var We=Qn(29,Ie,null,B.mode);return We.lanes=te,We.return=B,We}finally{}}}var ao=Ky(!0),Qy=Ky(!1),fi=ie(null),$i=null;function is(t){var i=t.alternate;he(rn,rn.current&1),he(fi,t),$i===null&&(i===null||to.current!==null||i.memoizedState!==null)&&($i=t)}function Yy(t){if(t.tag===22){if(he(rn,rn.current),he(fi,t),$i===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&($i=t)}}else rs()}function rs(){he(rn,rn.current),he(fi,fi.current)}function xr(t){fe(fi),$i===t&&($i=null),fe(rn)}var rn=ie(0);function xu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||dm(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function wf(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Af={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=Zn(),h=es(l);h.payload=i,a!=null&&(h.callback=a),i=ts(t,h,l),i!==null&&(Jn(i,t,l),_l(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=Zn(),h=es(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=ts(t,h,l),i!==null&&(Jn(i,t,l),_l(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Zn(),l=es(a);l.tag=2,i!=null&&(l.callback=i),i=ts(t,l,a),i!==null&&(Jn(i,t,a),_l(i,t,a))}};function Xy(t,i,a,l,h,f,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,E):i.prototype&&i.prototype.isPureReactComponent?!ll(a,l)||!ll(h,f):!0}function Wy(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Af.enqueueReplaceState(i,i.state,null)}function pa(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Nu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Zy(t){Nu(t)}function Jy(t){console.error(t)}function e_(t){Nu(t)}function Cu(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function t_(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Sf(t,i,a){return a=es(a),a.tag=3,a.payload={element:null},a.callback=function(){Cu(t,i)},a}function n_(t){return t=es(t),t.tag=3,t}function i_(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;t.payload=function(){return h(f)},t.callback=function(){t_(i,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(t.callback=function(){t_(i,a,l),typeof h!="function"&&(us===null?us=new Set([this]):us.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function cA(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&fl(i,a,h,!0),a=fi.current,a!==null){switch(a.tag){case 13:return $i===null?Yf():a.alternate===null&&Lt===0&&(Lt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Jd?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Wf(t,l,h)),!1;case 22:return a.flags|=65536,l===Jd?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Wf(t,l,h)),!1}throw Error(s(435,a.tag))}return Wf(t,l,h),Yf(),!1}if(gt)return i=fi.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==$d&&(t=Error(s(422),{cause:l}),dl(ci(t,a)))):(l!==$d&&(i=Error(s(423),{cause:l}),dl(ci(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=ci(l,a),h=Sf(t.stateNode,l,h),nf(t,h),Lt!==4&&(Lt=2)),!1;var f=Error(s(520),{cause:l});if(f=ci(f,a),kl===null?kl=[f]:kl.push(f),Lt!==4&&(Lt=2),i===null)return!0;l=ci(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Sf(a.stateNode,l,t),nf(a,t),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(us===null||!us.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=n_(h),i_(h,t,a,l),nf(a,h),!1}a=a.return}while(a!==null);return!1}var r_=Error(s(461)),un=!1;function _n(t,i,a,l){i.child=t===null?Qy(i,null,a,l):ao(i,t.child,a,l)}function s_(t,i,a,l,h){a=a.render;var f=i.ref;if("ref"in l){var E={};for(var b in l)b!=="ref"&&(E[b]=l[b])}else E=l;return da(i),l=lf(t,i,a,E,f,h),b=cf(),t!==null&&!un?(uf(t,i,h),Nr(t,i,h)):(gt&&b&&Fd(i),i.flags|=1,_n(t,i,l,h),i.child)}function a_(t,i,a,l,h){if(t===null){var f=a.type;return typeof f=="function"&&!Bd(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,o_(t,i,f,l,h)):(t=cu(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,!kf(t,h)){var E=f.memoizedProps;if(a=a.compare,a=a!==null?a:ll,a(E,l)&&t.ref===i.ref)return Nr(t,i,h)}return i.flags|=1,t=br(f,l),t.ref=i.ref,t.return=i,i.child=t}function o_(t,i,a,l,h){if(t!==null){var f=t.memoizedProps;if(ll(f,l)&&t.ref===i.ref)if(un=!1,i.pendingProps=l=f,kf(t,h))(t.flags&131072)!==0&&(un=!0);else return i.lanes=t.lanes,Nr(t,i,h)}return Rf(t,i,a,l,h)}function l_(t,i,a){var l=i.pendingProps,h=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,t!==null){for(h=i.child=t.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;i.childLanes=f&~l}else i.childLanes=0,i.child=null;return c_(t,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&mu(i,f!==null?f.cachePool:null),f!==null?oy(i,f):sf(),Yy(i);else return i.lanes=i.childLanes=536870912,c_(t,i,f!==null?f.baseLanes|a:a,a)}else f!==null?(mu(i,f.cachePool),oy(i,f),rs(),i.memoizedState=null):(t!==null&&mu(i,null),sf(),rs());return _n(t,i,h,a),i.child}function c_(t,i,a,l){var h=Zd();return h=h===null?null:{parent:nn._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&mu(i,null),sf(),Yy(i),t!==null&&fl(t,i,l,!0),null}function Du(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Rf(t,i,a,l,h){return da(i),a=lf(t,i,a,l,void 0,h),l=cf(),t!==null&&!un?(uf(t,i,h),Nr(t,i,h)):(gt&&l&&Fd(i),i.flags|=1,_n(t,i,a,h),i.child)}function u_(t,i,a,l,h,f){return da(i),i.updateQueue=null,a=cy(i,l,a,h),ly(t),l=cf(),t!==null&&!un?(uf(t,i,f),Nr(t,i,f)):(gt&&l&&Fd(i),i.flags|=1,_n(t,i,a,f),i.child)}function h_(t,i,a,l,h){if(da(i),i.stateNode===null){var f=Xa,E=a.contextType;typeof E=="object"&&E!==null&&(f=Sn(E)),f=new a(l,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Af,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=l,f.state=i.memoizedState,f.refs={},ef(i),E=a.contextType,f.context=typeof E=="object"&&E!==null?Sn(E):Xa,f.state=i.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(wf(i,a,E,l),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(E=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),E!==f.state&&Af.enqueueReplaceState(f,f.state,null),El(i,l,f,h),vl(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){f=i.stateNode;var b=i.memoizedProps,C=pa(a,b);f.props=C;var G=f.context,ee=a.contextType;E=Xa,typeof ee=="object"&&ee!==null&&(E=Sn(ee));var re=a.getDerivedStateFromProps;ee=typeof re=="function"||typeof f.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,ee||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b||G!==E)&&Wy(i,f,l,E),Jr=!1;var $=i.memoizedState;f.state=$,El(i,l,f,h),vl(),G=i.memoizedState,b||$!==G||Jr?(typeof re=="function"&&(wf(i,a,re,l),G=i.memoizedState),(C=Jr||Xy(i,a,C,l,$,G,E))?(ee||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=G),f.props=l,f.state=G,f.context=E,l=C):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{f=i.stateNode,tf(t,i),E=i.memoizedProps,ee=pa(a,E),f.props=ee,re=i.pendingProps,$=f.context,G=a.contextType,C=Xa,typeof G=="object"&&G!==null&&(C=Sn(G)),b=a.getDerivedStateFromProps,(G=typeof b=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E!==re||$!==C)&&Wy(i,f,l,C),Jr=!1,$=i.memoizedState,f.state=$,El(i,l,f,h),vl();var Q=i.memoizedState;E!==re||$!==Q||Jr||t!==null&&t.dependencies!==null&&du(t.dependencies)?(typeof b=="function"&&(wf(i,a,b,l),Q=i.memoizedState),(ee=Jr||Xy(i,a,ee,l,$,Q,C)||t!==null&&t.dependencies!==null&&du(t.dependencies))?(G||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,Q,C),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,Q,C)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||E===t.memoizedProps&&$===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&$===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=Q),f.props=l,f.state=Q,f.context=C,l=ee):(typeof f.componentDidUpdate!="function"||E===t.memoizedProps&&$===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&$===t.memoizedState||(i.flags|=1024),l=!1)}return f=l,Du(t,i),l=(i.flags&128)!==0,f||l?(f=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,t!==null&&l?(i.child=ao(i,t.child,null,h),i.child=ao(i,null,a,h)):_n(t,i,a,h),i.memoizedState=f.state,t=i.child):t=Nr(t,i,h),t}function d_(t,i,a,l){return hl(),i.flags|=256,_n(t,i,a,l),i.child}var If={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xf(t){return{baseLanes:t,cachePool:Jg()}}function Nf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=mi),t}function f_(t,i,a){var l=i.pendingProps,h=!1,f=(i.flags&128)!==0,E;if((E=f)||(E=t!==null&&t.memoizedState===null?!1:(rn.current&2)!==0),E&&(h=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,t===null){if(gt){if(h?is(i):rs(),gt){var b=Ut,C;if(C=b){e:{for(C=b,b=Gi;C.nodeType!==8;){if(!b){b=null;break e}if(C=Ri(C.nextSibling),C===null){b=null;break e}}b=C}b!==null?(i.memoizedState={dehydrated:b,treeContext:oa!==null?{id:wr,overflow:Ar}:null,retryLane:536870912,hydrationErrors:null},C=Qn(18,null,null,0),C.stateNode=b,C.return=i,i.child=C,Mn=i,Ut=null,C=!0):C=!1}C||ua(i)}if(b=i.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return dm(b)?i.lanes=32:i.lanes=536870912,null;xr(i)}return b=l.children,l=l.fallback,h?(rs(),h=i.mode,b=Ou({mode:"hidden",children:b},h),l=aa(l,h,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,h=i.child,h.memoizedState=xf(a),h.childLanes=Nf(t,E,a),i.memoizedState=If,l):(is(i),Cf(i,b))}if(C=t.memoizedState,C!==null&&(b=C.dehydrated,b!==null)){if(f)i.flags&256?(is(i),i.flags&=-257,i=Df(t,i,a)):i.memoizedState!==null?(rs(),i.child=t.child,i.flags|=128,i=null):(rs(),h=l.fallback,b=i.mode,l=Ou({mode:"visible",children:l.children},b),h=aa(h,b,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,ao(i,t.child,null,a),l=i.child,l.memoizedState=xf(a),l.childLanes=Nf(t,E,a),i.memoizedState=If,i=h);else if(is(i),dm(b)){if(E=b.nextSibling&&b.nextSibling.dataset,E)var G=E.dgst;E=G,l=Error(s(419)),l.stack="",l.digest=E,dl({value:l,source:null,stack:null}),i=Df(t,i,a)}else if(un||fl(t,i,a,!1),E=(a&t.childLanes)!==0,un||E){if(E=Ct,E!==null&&(l=a&-a,l=(l&42)!==0?1:ze(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==C.retryLane))throw C.retryLane=l,Ya(t,l),Jn(E,t,l),r_;b.data==="$?"||Yf(),i=Df(t,i,a)}else b.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=C.treeContext,Ut=Ri(b.nextSibling),Mn=i,gt=!0,ca=null,Gi=!1,t!==null&&(hi[di++]=wr,hi[di++]=Ar,hi[di++]=oa,wr=t.id,Ar=t.overflow,oa=i),i=Cf(i,l.children),i.flags|=4096);return i}return h?(rs(),h=l.fallback,b=i.mode,C=t.child,G=C.sibling,l=br(C,{mode:"hidden",children:l.children}),l.subtreeFlags=C.subtreeFlags&65011712,G!==null?h=br(G,h):(h=aa(h,b,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,b=t.child.memoizedState,b===null?b=xf(a):(C=b.cachePool,C!==null?(G=nn._currentValue,C=C.parent!==G?{parent:G,pool:G}:C):C=Jg(),b={baseLanes:b.baseLanes|a,cachePool:C}),h.memoizedState=b,h.childLanes=Nf(t,E,a),i.memoizedState=If,l):(is(i),a=t.child,t=a.sibling,a=br(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(E=i.deletions,E===null?(i.deletions=[t],i.flags|=16):E.push(t)),i.child=a,i.memoizedState=null,a)}function Cf(t,i){return i=Ou({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Ou(t,i){return t=Qn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Df(t,i,a){return ao(i,t.child,null,a),t=Cf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function m_(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Qd(t.return,i,a)}function Of(t,i,a,l,h){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=h)}function p_(t,i,a){var l=i.pendingProps,h=l.revealOrder,f=l.tail;if(_n(t,i,l.children,a),l=rn.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&m_(t,a,i);else if(t.tag===19)m_(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(he(rn,l),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&xu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Of(i,!1,h,a,f);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&xu(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Of(i,!0,a,null,f);break;case"together":Of(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Nr(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),cs|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(fl(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=br(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=br(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function kf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&du(t)))}function uA(t,i,a){switch(i.tag){case 3:et(i,i.stateNode.containerInfo),Zr(i,nn,t.memoizedState.cache),hl();break;case 27:case 5:An(i);break;case 4:et(i,i.stateNode.containerInfo);break;case 10:Zr(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(is(i),i.flags|=128,null):(a&i.child.childLanes)!==0?f_(t,i,a):(is(i),t=Nr(t,i,a),t!==null?t.sibling:null);is(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(fl(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return p_(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),he(rn,rn.current),l)break;return null;case 22:case 23:return i.lanes=0,l_(t,i,a);case 24:Zr(i,nn,t.memoizedState.cache)}return Nr(t,i,a)}function g_(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)un=!0;else{if(!kf(t,a)&&(i.flags&128)===0)return un=!1,uA(t,i,a);un=(t.flags&131072)!==0}else un=!1,gt&&(i.flags&1048576)!==0&&$g(i,hu,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")Bd(l)?(t=pa(l,t),i.tag=1,i=h_(null,i,l,t,a)):(i.tag=0,i=Rf(null,i,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===de){i.tag=11,i=s_(null,i,l,t,a);break e}else if(h===x){i.tag=14,i=a_(null,i,l,t,a);break e}}throw i=ge(l)||l,Error(s(306,i,""))}}return i;case 0:return Rf(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=pa(l,i.pendingProps),h_(t,i,l,h,a);case 3:e:{if(et(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var f=i.memoizedState;h=f.element,tf(t,i),El(i,l,null,a);var E=i.memoizedState;if(l=E.cache,Zr(i,nn,l),l!==f.cache&&Yd(i,[nn],a,!0),vl(),l=E.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=d_(t,i,l,a);break e}else if(l!==h){h=ci(Error(s(424)),i),dl(h),i=d_(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ut=Ri(t.firstChild),Mn=i,gt=!0,ca=null,Gi=!0,a=Qy(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(hl(),l===h){i=Nr(t,i,a);break e}_n(t,i,l,a)}i=i.child}return i;case 26:return Du(t,i),t===null?(a=Ev(i.type,null,i.pendingProps,null))?i.memoizedState=a:gt||(a=i.type,t=i.pendingProps,l=$u(ke.current).createElement(a),l[at]=i,l[pt]=t,En(l,a,t),Bt(l),i.stateNode=l):i.memoizedState=Ev(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return An(i),t===null&&gt&&(l=i.stateNode=yv(i.type,i.pendingProps,ke.current),Mn=i,Gi=!0,h=Ut,fs(i.type)?(fm=h,Ut=Ri(l.firstChild)):Ut=h),_n(t,i,i.pendingProps.children,a),Du(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&gt&&((h=l=Ut)&&(l=UA(l,i.type,i.pendingProps,Gi),l!==null?(i.stateNode=l,Mn=i,Ut=Ri(l.firstChild),Gi=!1,h=!0):h=!1),h||ua(i)),An(i),h=i.type,f=i.pendingProps,E=t!==null?t.memoizedProps:null,l=f.children,cm(h,f)?l=null:E!==null&&cm(h,E)&&(i.flags|=32),i.memoizedState!==null&&(h=lf(t,i,nA,null,null,a),ql._currentValue=h),Du(t,i),_n(t,i,l,a),i.child;case 6:return t===null&&gt&&((t=a=Ut)&&(a=LA(a,i.pendingProps,Gi),a!==null?(i.stateNode=a,Mn=i,Ut=null,t=!0):t=!1),t||ua(i)),null;case 13:return f_(t,i,a);case 4:return et(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=ao(i,null,l,a):_n(t,i,l,a),i.child;case 11:return s_(t,i,i.type,i.pendingProps,a);case 7:return _n(t,i,i.pendingProps,a),i.child;case 8:return _n(t,i,i.pendingProps.children,a),i.child;case 12:return _n(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Zr(i,i.type,l.value),_n(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,da(i),h=Sn(h),l=l(h),i.flags|=1,_n(t,i,l,a),i.child;case 14:return a_(t,i,i.type,i.pendingProps,a);case 15:return o_(t,i,i.type,i.pendingProps,a);case 19:return p_(t,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},t===null?(a=Ou(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=br(t.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return l_(t,i,a);case 24:return da(i),l=Sn(nn),t===null?(h=Zd(),h===null&&(h=Ct,f=Xd(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:l,cache:h},ef(i),Zr(i,nn,h)):((t.lanes&a)!==0&&(tf(t,i),El(i,null,null,a),vl()),h=t.memoizedState,f=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Zr(i,nn,l)):(l=f.cache,Zr(i,nn,l),l!==h.cache&&Yd(i,[nn],a,!0))),_n(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Cr(t){t.flags|=4}function y_(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Sv(i)){if(i=fi.current,i!==null&&((ct&4194048)===ct?$i!==null:(ct&62914560)!==ct&&(ct&536870912)===0||i!==$i))throw yl=Jd,ey;t.flags|=8192}}function ku(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?J():536870912,t.lanes|=i,uo|=i)}function Il(t,i){if(!gt)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Vt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function hA(t,i,a){var l=i.pendingProps;switch(Gd(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(i),null;case 1:return Vt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Rr(nn),Hn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(ul(i)?Cr(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Yg())),Vt(i),null;case 26:return a=i.memoizedState,t===null?(Cr(i),a!==null?(Vt(i),y_(i,a)):(Vt(i),i.flags&=-16777217)):a?a!==t.memoizedState?(Cr(i),Vt(i),y_(i,a)):(Vt(i),i.flags&=-16777217):(t.memoizedProps!==l&&Cr(i),Vt(i),i.flags&=-16777217),null;case 27:Jt(i),a=ke.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Cr(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return Vt(i),null}t=xe.current,ul(i)?Kg(i):(t=yv(h,l,a),i.stateNode=t,Cr(i))}return Vt(i),null;case 5:if(Jt(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Cr(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return Vt(i),null}if(t=xe.current,ul(i))Kg(i);else{switch(h=$u(ke.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[at]=i,t[pt]=l;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(En(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Cr(i)}}return Vt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&Cr(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=ke.current,ul(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=Mn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[at]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||uv(t.nodeValue,a)),t||ua(i)}else t=$u(t).createTextNode(l),t[at]=i,i.stateNode=t}return Vt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=ul(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[at]=i}else hl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Vt(i),h=!1}else h=Yg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(xr(i),i):(xr(i),null)}if(xr(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),ku(i,i.updateQueue),Vt(i),null;case 4:return Hn(),t===null&&rm(i.stateNode.containerInfo),Vt(i),null;case 10:return Rr(i.type),Vt(i),null;case 19:if(fe(rn),h=i.memoizedState,h===null)return Vt(i),null;if(l=(i.flags&128)!==0,f=h.rendering,f===null)if(l)Il(h,!1);else{if(Lt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(f=xu(t),f!==null){for(i.flags|=128,Il(h,!1),t=f.updateQueue,i.updateQueue=t,ku(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Gg(a,t),a=a.sibling;return he(rn,rn.current&1|2),i.child}t=t.sibling}h.tail!==null&&mn()>Vu&&(i.flags|=128,l=!0,Il(h,!1),i.lanes=4194304)}else{if(!l)if(t=xu(f),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,ku(i,t),Il(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!gt)return Vt(i),null}else 2*mn()-h.renderingStartTime>Vu&&a!==536870912&&(i.flags|=128,l=!0,Il(h,!1),i.lanes=4194304);h.isBackwards?(f.sibling=i.child,i.child=f):(t=h.last,t!==null?t.sibling=f:i.child=f,h.last=f)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=mn(),i.sibling=null,t=rn.current,he(rn,l?t&1|2:t&1),i):(Vt(i),null);case 22:case 23:return xr(i),af(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(Vt(i),i.subtreeFlags&6&&(i.flags|=8192)):Vt(i),a=i.updateQueue,a!==null&&ku(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&fe(fa),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Rr(nn),Vt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function dA(t,i){switch(Gd(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Rr(nn),Hn(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Jt(i),null;case 13:if(xr(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));hl()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return fe(rn),null;case 4:return Hn(),null;case 10:return Rr(i.type),null;case 22:case 23:return xr(i),af(),t!==null&&fe(fa),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Rr(nn),null;case 25:return null;default:return null}}function __(t,i){switch(Gd(i),i.tag){case 3:Rr(nn),Hn();break;case 26:case 27:case 5:Jt(i);break;case 4:Hn();break;case 13:xr(i);break;case 19:fe(rn);break;case 10:Rr(i.type);break;case 22:case 23:xr(i),af(),t!==null&&fe(fa);break;case 24:Rr(nn)}}function xl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var f=a.create,E=a.inst;l=f(),E.destroy=l}a=a.next}while(a!==h)}}catch(b){Nt(i,i.return,b)}}function ss(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&t)===t){var E=l.inst,b=E.destroy;if(b!==void 0){E.destroy=void 0,h=i;var C=a,G=b;try{G()}catch(ee){Nt(h,C,ee)}}}l=l.next}while(l!==f)}}catch(ee){Nt(i,i.return,ee)}}function v_(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{ay(i,a)}catch(l){Nt(t,t.return,l)}}}function E_(t,i,a){a.props=pa(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Nt(t,i,l)}}function Nl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){Nt(t,i,h)}}function Ki(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){Nt(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Nt(t,i,h)}else a.current=null}function T_(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){Nt(t,t.return,h)}}function Pf(t,i,a){try{var l=t.stateNode;kA(l,t.type,a,i),l[pt]=i}catch(h){Nt(t,t.return,h)}}function b_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&fs(t.type)||t.tag===4}function Mf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||b_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&fs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vf(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Gu));else if(l!==4&&(l===27&&fs(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Vf(t,i,a),t=t.sibling;t!==null;)Vf(t,i,a),t=t.sibling}function Pu(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&fs(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Pu(t,i,a),t=t.sibling;t!==null;)Pu(t,i,a),t=t.sibling}function w_(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);En(i,l,a),i[at]=t,i[pt]=a}catch(f){Nt(t,t.return,f)}}var Dr=!1,Ht=!1,jf=!1,A_=typeof WeakSet=="function"?WeakSet:Set,hn=null;function fA(t,i){if(t=t.containerInfo,om=Zu,t=Mg(t),Pd(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var E=0,b=-1,C=-1,G=0,ee=0,re=t,$=null;t:for(;;){for(var Q;re!==a||h!==0&&re.nodeType!==3||(b=E+h),re!==f||l!==0&&re.nodeType!==3||(C=E+l),re.nodeType===3&&(E+=re.nodeValue.length),(Q=re.firstChild)!==null;)$=re,re=Q;for(;;){if(re===t)break t;if($===a&&++G===h&&(b=E),$===f&&++ee===l&&(C=E),(Q=re.nextSibling)!==null)break;re=$,$=re.parentNode}re=Q}a=b===-1||C===-1?null:{start:b,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(lm={focusedElem:t,selectionRange:a},Zu=!1,hn=i;hn!==null;)if(i=hn,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,hn=t;else for(;hn!==null;){switch(i=hn,f=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var Ve=pa(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Ve,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(De){Nt(a,a.return,De)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)hm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":hm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,hn=t;break}hn=i.return}}function S_(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:as(t,a),l&4&&xl(5,a);break;case 1:if(as(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(E){Nt(a,a.return,E)}else{var h=pa(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(E){Nt(a,a.return,E)}}l&64&&v_(a),l&512&&Nl(a,a.return);break;case 3:if(as(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{ay(t,i)}catch(E){Nt(a,a.return,E)}}break;case 27:i===null&&l&4&&w_(a);case 26:case 5:as(t,a),i===null&&l&4&&T_(a),l&512&&Nl(a,a.return);break;case 12:as(t,a);break;case 13:as(t,a),l&4&&x_(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=bA.bind(null,a),zA(t,a))));break;case 22:if(l=a.memoizedState!==null||Dr,!l){i=i!==null&&i.memoizedState!==null||Ht,h=Dr;var f=Ht;Dr=l,(Ht=i)&&!f?os(t,a,(a.subtreeFlags&8772)!==0):as(t,a),Dr=h,Ht=f}break;case 30:break;default:as(t,a)}}function R_(t){var i=t.alternate;i!==null&&(t.alternate=null,R_(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Qr(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Pt=null,Ln=!1;function Or(t,i,a){for(a=a.child;a!==null;)I_(t,i,a),a=a.sibling}function I_(t,i,a){if(oe&&typeof oe.onCommitFiberUnmount=="function")try{oe.onCommitFiberUnmount(yt,a)}catch{}switch(a.tag){case 26:Ht||Ki(a,i),Or(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ht||Ki(a,i);var l=Pt,h=Ln;fs(a.type)&&(Pt=a.stateNode,Ln=!1),Or(t,i,a),Ul(a.stateNode),Pt=l,Ln=h;break;case 5:Ht||Ki(a,i);case 6:if(l=Pt,h=Ln,Pt=null,Or(t,i,a),Pt=l,Ln=h,Pt!==null)if(Ln)try{(Pt.nodeType===9?Pt.body:Pt.nodeName==="HTML"?Pt.ownerDocument.body:Pt).removeChild(a.stateNode)}catch(f){Nt(a,i,f)}else try{Pt.removeChild(a.stateNode)}catch(f){Nt(a,i,f)}break;case 18:Pt!==null&&(Ln?(t=Pt,pv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),$l(t)):pv(Pt,a.stateNode));break;case 4:l=Pt,h=Ln,Pt=a.stateNode.containerInfo,Ln=!0,Or(t,i,a),Pt=l,Ln=h;break;case 0:case 11:case 14:case 15:Ht||ss(2,a,i),Ht||ss(4,a,i),Or(t,i,a);break;case 1:Ht||(Ki(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&E_(a,i,l)),Or(t,i,a);break;case 21:Or(t,i,a);break;case 22:Ht=(l=Ht)||a.memoizedState!==null,Or(t,i,a),Ht=l;break;default:Or(t,i,a)}}function x_(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{$l(t)}catch(a){Nt(i,i.return,a)}}function mA(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new A_),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new A_),i;default:throw Error(s(435,t.tag))}}function Uf(t,i){var a=mA(t);i.forEach(function(l){var h=wA.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function Yn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=t,E=i,b=E;e:for(;b!==null;){switch(b.tag){case 27:if(fs(b.type)){Pt=b.stateNode,Ln=!1;break e}break;case 5:Pt=b.stateNode,Ln=!1;break e;case 3:case 4:Pt=b.stateNode.containerInfo,Ln=!0;break e}b=b.return}if(Pt===null)throw Error(s(160));I_(f,E,h),Pt=null,Ln=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)N_(i,t),i=i.sibling}var Si=null;function N_(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Yn(i,t),Xn(t),l&4&&(ss(3,t,t.return),xl(3,t),ss(5,t,t.return));break;case 1:Yn(i,t),Xn(t),l&512&&(Ht||a===null||Ki(a,a.return)),l&64&&Dr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Si;if(Yn(i,t),Xn(t),l&512&&(Ht||a===null||Ki(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[Fs]||f[at]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),En(f,l,a),f[at]=t,Bt(f),l=f;break e;case"link":var E=wv("link","href",h).get(l+(a.href||""));if(E){for(var b=0;b<E.length;b++)if(f=E[b],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(b,1);break t}}f=h.createElement(l),En(f,l,a),h.head.appendChild(f);break;case"meta":if(E=wv("meta","content",h).get(l+(a.content||""))){for(b=0;b<E.length;b++)if(f=E[b],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(b,1);break t}}f=h.createElement(l),En(f,l,a),h.head.appendChild(f);break;default:throw Error(s(468,l))}f[at]=t,Bt(f),l=f}t.stateNode=l}else Av(h,t.type,t.stateNode);else t.stateNode=bv(h,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?Av(h,t.type,t.stateNode):bv(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Pf(t,t.memoizedProps,a.memoizedProps)}break;case 27:Yn(i,t),Xn(t),l&512&&(Ht||a===null||Ki(a,a.return)),a!==null&&l&4&&Pf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Yn(i,t),Xn(t),l&512&&(Ht||a===null||Ki(a,a.return)),t.flags&32){h=t.stateNode;try{si(h,"")}catch(Q){Nt(t,t.return,Q)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Pf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(jf=!0);break;case 6:if(Yn(i,t),Xn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Q){Nt(t,t.return,Q)}}break;case 3:if(Yu=null,h=Si,Si=Ku(i.containerInfo),Yn(i,t),Si=h,Xn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{$l(i.containerInfo)}catch(Q){Nt(t,t.return,Q)}jf&&(jf=!1,C_(t));break;case 4:l=Si,Si=Ku(t.stateNode.containerInfo),Yn(i,t),Xn(t),Si=l;break;case 12:Yn(i,t),Xn(t);break;case 13:Yn(i,t),Xn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ff=mn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Uf(t,l)));break;case 22:h=t.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,G=Dr,ee=Ht;if(Dr=G||h,Ht=ee||C,Yn(i,t),Ht=ee,Dr=G,Xn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||C||Dr||Ht||ga(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){C=a=i;try{if(f=C.stateNode,h)E=f.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{b=C.stateNode;var re=C.memoizedProps.style,$=re!=null&&re.hasOwnProperty("display")?re.display:null;b.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(Q){Nt(C,C.return,Q)}}}else if(i.tag===6){if(a===null){C=i;try{C.stateNode.nodeValue=h?"":C.memoizedProps}catch(Q){Nt(C,C.return,Q)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Uf(t,a))));break;case 19:Yn(i,t),Xn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Uf(t,l)));break;case 30:break;case 21:break;default:Yn(i,t),Xn(t)}}function Xn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(b_(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=Mf(t);Pu(t,f,h);break;case 5:var E=a.stateNode;a.flags&32&&(si(E,""),a.flags&=-33);var b=Mf(t);Pu(t,b,E);break;case 3:case 4:var C=a.stateNode.containerInfo,G=Mf(t);Vf(t,G,C);break;default:throw Error(s(161))}}catch(ee){Nt(t,t.return,ee)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function C_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;C_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function as(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)S_(t,i.alternate,i),i=i.sibling}function ga(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:ss(4,i,i.return),ga(i);break;case 1:Ki(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&E_(i,i.return,a),ga(i);break;case 27:Ul(i.stateNode);case 26:case 5:Ki(i,i.return),ga(i);break;case 22:i.memoizedState===null&&ga(i);break;case 30:ga(i);break;default:ga(i)}t=t.sibling}}function os(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,f=i,E=f.flags;switch(f.tag){case 0:case 11:case 15:os(h,f,a),xl(4,f);break;case 1:if(os(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(G){Nt(l,l.return,G)}if(l=f,h=l.updateQueue,h!==null){var b=l.stateNode;try{var C=h.shared.hiddenCallbacks;if(C!==null)for(h.shared.hiddenCallbacks=null,h=0;h<C.length;h++)sy(C[h],b)}catch(G){Nt(l,l.return,G)}}a&&E&64&&v_(f),Nl(f,f.return);break;case 27:w_(f);case 26:case 5:os(h,f,a),a&&l===null&&E&4&&T_(f),Nl(f,f.return);break;case 12:os(h,f,a);break;case 13:os(h,f,a),a&&E&4&&x_(h,f);break;case 22:f.memoizedState===null&&os(h,f,a),Nl(f,f.return);break;case 30:break;default:os(h,f,a)}i=i.sibling}}function Lf(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&ml(a))}function zf(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&ml(t))}function Qi(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)D_(t,i,a,l),i=i.sibling}function D_(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Qi(t,i,a,l),h&2048&&xl(9,i);break;case 1:Qi(t,i,a,l);break;case 3:Qi(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&ml(t)));break;case 12:if(h&2048){Qi(t,i,a,l),t=i.stateNode;try{var f=i.memoizedProps,E=f.id,b=f.onPostCommit;typeof b=="function"&&b(E,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(C){Nt(i,i.return,C)}}else Qi(t,i,a,l);break;case 13:Qi(t,i,a,l);break;case 23:break;case 22:f=i.stateNode,E=i.alternate,i.memoizedState!==null?f._visibility&2?Qi(t,i,a,l):Cl(t,i):f._visibility&2?Qi(t,i,a,l):(f._visibility|=2,oo(t,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&Lf(E,i);break;case 24:Qi(t,i,a,l),h&2048&&zf(i.alternate,i);break;default:Qi(t,i,a,l)}}function oo(t,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var f=t,E=i,b=a,C=l,G=E.flags;switch(E.tag){case 0:case 11:case 15:oo(f,E,b,C,h),xl(8,E);break;case 23:break;case 22:var ee=E.stateNode;E.memoizedState!==null?ee._visibility&2?oo(f,E,b,C,h):Cl(f,E):(ee._visibility|=2,oo(f,E,b,C,h)),h&&G&2048&&Lf(E.alternate,E);break;case 24:oo(f,E,b,C,h),h&&G&2048&&zf(E.alternate,E);break;default:oo(f,E,b,C,h)}i=i.sibling}}function Cl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:Cl(a,l),h&2048&&Lf(l.alternate,l);break;case 24:Cl(a,l),h&2048&&zf(l.alternate,l);break;default:Cl(a,l)}i=i.sibling}}var Dl=8192;function lo(t){if(t.subtreeFlags&Dl)for(t=t.child;t!==null;)O_(t),t=t.sibling}function O_(t){switch(t.tag){case 26:lo(t),t.flags&Dl&&t.memoizedState!==null&&JA(Si,t.memoizedState,t.memoizedProps);break;case 5:lo(t);break;case 3:case 4:var i=Si;Si=Ku(t.stateNode.containerInfo),lo(t),Si=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Dl,Dl=16777216,lo(t),Dl=i):lo(t));break;default:lo(t)}}function k_(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Ol(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];hn=l,M_(l,t)}k_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)P_(t),t=t.sibling}function P_(t){switch(t.tag){case 0:case 11:case 15:Ol(t),t.flags&2048&&ss(9,t,t.return);break;case 3:Ol(t);break;case 12:Ol(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Mu(t)):Ol(t);break;default:Ol(t)}}function Mu(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];hn=l,M_(l,t)}k_(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:ss(8,i,i.return),Mu(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Mu(i));break;default:Mu(i)}t=t.sibling}}function M_(t,i){for(;hn!==null;){var a=hn;switch(a.tag){case 0:case 11:case 15:ss(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ml(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,hn=l;else e:for(a=t;hn!==null;){l=hn;var h=l.sibling,f=l.return;if(R_(l),l===a){hn=null;break e}if(h!==null){h.return=f,hn=h;break e}hn=f}}}var pA={getCacheForType:function(t){var i=Sn(nn),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},gA=typeof WeakMap=="function"?WeakMap:Map,Tt=0,Ct=null,Ze=null,ct=0,bt=0,Wn=null,ls=!1,co=!1,Bf=!1,kr=0,Lt=0,cs=0,ya=0,qf=0,mi=0,uo=0,kl=null,zn=null,Hf=!1,Ff=0,Vu=1/0,ju=null,us=null,vn=0,hs=null,ho=null,fo=0,Gf=0,$f=null,V_=null,Pl=0,Kf=null;function Zn(){if((Tt&2)!==0&&ct!==0)return ct&-ct;if(K.T!==null){var t=Ja;return t!==0?t:em()}return At()}function j_(){mi===0&&(mi=(ct&536870912)===0||gt?Z():536870912);var t=fi.current;return t!==null&&(t.flags|=32),mi}function Jn(t,i,a){(t===Ct&&(bt===2||bt===9)||t.cancelPendingCommit!==null)&&(mo(t,0),ds(t,ct,mi,!1)),be(t,a),((Tt&2)===0||t!==Ct)&&(t===Ct&&((Tt&2)===0&&(ya|=a),Lt===4&&ds(t,ct,mi,!1)),Yi(t))}function U_(t,i,a){if((Tt&6)!==0)throw Error(s(327));var l=!a&&(i&124)===0&&(i&t.expiredLanes)===0||_t(t,i),h=l?vA(t,i):Xf(t,i,!0),f=l;do{if(h===0){co&&!l&&ds(t,i,0,!1);break}else{if(a=t.current.alternate,f&&!yA(a)){h=Xf(t,i,!1),f=!1;continue}if(h===2){if(f=i,t.errorRecoveryDisabledLanes&f)var E=0;else E=t.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var b=t;h=kl;var C=b.current.memoizedState.isDehydrated;if(C&&(mo(b,E).flags|=256),E=Xf(b,E,!1),E!==2){if(Bf&&!C){b.errorRecoveryDisabledLanes|=f,ya|=f,h=4;break e}f=zn,zn=h,f!==null&&(zn===null?zn=f:zn.push.apply(zn,f))}h=E}if(f=!1,h!==2)continue}}if(h===1){mo(t,0),ds(t,i,0,!0);break}e:{switch(l=t,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:ds(l,i,mi,!ls);break e;case 2:zn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Ff+300-mn(),10<h)){if(ds(l,i,mi,!ls),wt(l,0,!0)!==0)break e;l.timeoutHandle=fv(L_.bind(null,l,a,zn,ju,Hf,i,mi,ya,uo,ls,f,2,-0,0),h);break e}L_(l,a,zn,ju,Hf,i,mi,ya,uo,ls,f,0,-0,0)}}break}while(!0);Yi(t)}function L_(t,i,a,l,h,f,E,b,C,G,ee,re,$,Q){if(t.timeoutHandle=-1,re=i.subtreeFlags,(re&8192||(re&16785408)===16785408)&&(Bl={stylesheets:null,count:0,unsuspend:ZA},O_(i),re=eS(),re!==null)){t.cancelPendingCommit=re($_.bind(null,t,i,f,a,l,h,E,b,C,ee,1,$,Q)),ds(t,f,E,!G);return}$_(t,i,f,a,l,h,E,b,C)}function yA(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!Kn(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ds(t,i,a,l){i&=~qf,i&=~ya,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var f=31-_e(h),E=1<<f;l[f]=-1,h&=~E}a!==0&&qe(t,a,i)}function Uu(){return(Tt&6)===0?(Ml(0),!1):!0}function Qf(){if(Ze!==null){if(bt===0)var t=Ze.return;else t=Ze,Sr=ha=null,hf(t),so=null,Sl=0,t=Ze;for(;t!==null;)__(t.alternate,t),t=t.return;Ze=null}}function mo(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,MA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Qf(),Ct=t,Ze=a=br(t.current,null),ct=i,bt=0,Wn=null,ls=!1,co=_t(t,i),Bf=!1,uo=mi=qf=ya=cs=Lt=0,zn=kl=null,Hf=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-_e(l),f=1<<h;i|=t[h],l&=~f}return kr=i,au(),a}function z_(t,i){Ke=null,K.H=Su,i===gl||i===pu?(i=iy(),bt=3):i===ey?(i=iy(),bt=4):bt=i===r_?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Wn=i,Ze===null&&(Lt=1,Cu(t,ci(i,t.current)))}function B_(){var t=K.H;return K.H=Su,t===null?Su:t}function q_(){var t=K.A;return K.A=pA,t}function Yf(){Lt=4,ls||(ct&4194048)!==ct&&fi.current!==null||(co=!0),(cs&134217727)===0&&(ya&134217727)===0||Ct===null||ds(Ct,ct,mi,!1)}function Xf(t,i,a){var l=Tt;Tt|=2;var h=B_(),f=q_();(Ct!==t||ct!==i)&&(ju=null,mo(t,i)),i=!1;var E=Lt;e:do try{if(bt!==0&&Ze!==null){var b=Ze,C=Wn;switch(bt){case 8:Qf(),E=6;break e;case 3:case 2:case 9:case 6:fi.current===null&&(i=!0);var G=bt;if(bt=0,Wn=null,po(t,b,C,G),a&&co){E=0;break e}break;default:G=bt,bt=0,Wn=null,po(t,b,C,G)}}_A(),E=Lt;break}catch(ee){z_(t,ee)}while(!0);return i&&t.shellSuspendCounter++,Sr=ha=null,Tt=l,K.H=h,K.A=f,Ze===null&&(Ct=null,ct=0,au()),E}function _A(){for(;Ze!==null;)H_(Ze)}function vA(t,i){var a=Tt;Tt|=2;var l=B_(),h=q_();Ct!==t||ct!==i?(ju=null,Vu=mn()+500,mo(t,i)):co=_t(t,i);e:do try{if(bt!==0&&Ze!==null){i=Ze;var f=Wn;t:switch(bt){case 1:bt=0,Wn=null,po(t,i,f,1);break;case 2:case 9:if(ty(f)){bt=0,Wn=null,F_(i);break}i=function(){bt!==2&&bt!==9||Ct!==t||(bt=7),Yi(t)},f.then(i,i);break e;case 3:bt=7;break e;case 4:bt=5;break e;case 7:ty(f)?(bt=0,Wn=null,F_(i)):(bt=0,Wn=null,po(t,i,f,7));break;case 5:var E=null;switch(Ze.tag){case 26:E=Ze.memoizedState;case 5:case 27:var b=Ze;if(!E||Sv(E)){bt=0,Wn=null;var C=b.sibling;if(C!==null)Ze=C;else{var G=b.return;G!==null?(Ze=G,Lu(G)):Ze=null}break t}}bt=0,Wn=null,po(t,i,f,5);break;case 6:bt=0,Wn=null,po(t,i,f,6);break;case 8:Qf(),Lt=6;break e;default:throw Error(s(462))}}EA();break}catch(ee){z_(t,ee)}while(!0);return Sr=ha=null,K.H=l,K.A=h,Tt=a,Ze!==null?0:(Ct=null,ct=0,au(),Lt)}function EA(){for(;Ze!==null&&!Pi();)H_(Ze)}function H_(t){var i=g_(t.alternate,t,kr);t.memoizedProps=t.pendingProps,i===null?Lu(t):Ze=i}function F_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=u_(a,i,i.pendingProps,i.type,void 0,ct);break;case 11:i=u_(a,i,i.pendingProps,i.type.render,i.ref,ct);break;case 5:hf(i);default:__(a,i),i=Ze=Gg(i,kr),i=g_(a,i,kr)}t.memoizedProps=t.pendingProps,i===null?Lu(t):Ze=i}function po(t,i,a,l){Sr=ha=null,hf(i),so=null,Sl=0;var h=i.return;try{if(cA(t,h,i,a,ct)){Lt=1,Cu(t,ci(a,t.current)),Ze=null;return}}catch(f){if(h!==null)throw Ze=h,f;Lt=1,Cu(t,ci(a,t.current)),Ze=null;return}i.flags&32768?(gt||l===1?t=!0:co||(ct&536870912)!==0?t=!1:(ls=t=!0,(l===2||l===9||l===3||l===6)&&(l=fi.current,l!==null&&l.tag===13&&(l.flags|=16384))),G_(i,t)):Lu(i)}function Lu(t){var i=t;do{if((i.flags&32768)!==0){G_(i,ls);return}t=i.return;var a=hA(i.alternate,i,kr);if(a!==null){Ze=a;return}if(i=i.sibling,i!==null){Ze=i;return}Ze=i=t}while(i!==null);Lt===0&&(Lt=5)}function G_(t,i){do{var a=dA(t.alternate,t);if(a!==null){a.flags&=32767,Ze=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ze=t;return}Ze=t=a}while(t!==null);Lt=6,Ze=null}function $_(t,i,a,l,h,f,E,b,C){t.cancelPendingCommit=null;do zu();while(vn!==0);if((Tt&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=Ld,st(t,a,f,E,b,C),t===Ct&&(Ze=Ct=null,ct=0),ho=i,hs=t,fo=a,Gf=f,$f=h,V_=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,AA(Ti,function(){return W_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,h=ue.p,ue.p=2,E=Tt,Tt|=4;try{fA(t,i,a)}finally{Tt=E,ue.p=h,K.T=l}}vn=1,K_(),Q_(),Y_()}}function K_(){if(vn===1){vn=0;var t=hs,i=ho,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=ue.p;ue.p=2;var h=Tt;Tt|=4;try{N_(i,t);var f=lm,E=Mg(t.containerInfo),b=f.focusedElem,C=f.selectionRange;if(E!==b&&b&&b.ownerDocument&&Pg(b.ownerDocument.documentElement,b)){if(C!==null&&Pd(b)){var G=C.start,ee=C.end;if(ee===void 0&&(ee=G),"selectionStart"in b)b.selectionStart=G,b.selectionEnd=Math.min(ee,b.value.length);else{var re=b.ownerDocument||document,$=re&&re.defaultView||window;if($.getSelection){var Q=$.getSelection(),Ve=b.textContent.length,De=Math.min(C.start,Ve),xt=C.end===void 0?De:Math.min(C.end,Ve);!Q.extend&&De>xt&&(E=xt,xt=De,De=E);var B=kg(b,De),V=kg(b,xt);if(B&&V&&(Q.rangeCount!==1||Q.anchorNode!==B.node||Q.anchorOffset!==B.offset||Q.focusNode!==V.node||Q.focusOffset!==V.offset)){var F=re.createRange();F.setStart(B.node,B.offset),Q.removeAllRanges(),De>xt?(Q.addRange(F),Q.extend(V.node,V.offset)):(F.setEnd(V.node,V.offset),Q.addRange(F))}}}}for(re=[],Q=b;Q=Q.parentNode;)Q.nodeType===1&&re.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<re.length;b++){var te=re[b];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Zu=!!om,lm=om=null}finally{Tt=h,ue.p=l,K.T=a}}t.current=i,vn=2}}function Q_(){if(vn===2){vn=0;var t=hs,i=ho,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=ue.p;ue.p=2;var h=Tt;Tt|=4;try{S_(t,i.alternate,i)}finally{Tt=h,ue.p=l,K.T=a}}vn=3}}function Y_(){if(vn===4||vn===3){vn=0,ur();var t=hs,i=ho,a=fo,l=V_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?vn=5:(vn=0,ho=hs=null,X_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(us=null),Dt(a),i=i.stateNode,oe&&typeof oe.onCommitFiberRoot=="function")try{oe.onCommitFiberRoot(yt,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=K.T,h=ue.p,ue.p=2,K.T=null;try{for(var f=t.onRecoverableError,E=0;E<l.length;E++){var b=l[E];f(b.value,{componentStack:b.stack})}}finally{K.T=i,ue.p=h}}(fo&3)!==0&&zu(),Yi(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Kf?Pl++:(Pl=0,Kf=t):Pl=0,Ml(0)}}function X_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,ml(i)))}function zu(t){return K_(),Q_(),Y_(),W_()}function W_(){if(vn!==5)return!1;var t=hs,i=Gf;Gf=0;var a=Dt(fo),l=K.T,h=ue.p;try{ue.p=32>a?32:a,K.T=null,a=$f,$f=null;var f=hs,E=fo;if(vn=0,ho=hs=null,fo=0,(Tt&6)!==0)throw Error(s(331));var b=Tt;if(Tt|=4,P_(f.current),D_(f,f.current,E,a),Tt=b,Ml(0,!1),oe&&typeof oe.onPostCommitFiberRoot=="function")try{oe.onPostCommitFiberRoot(yt,f)}catch{}return!0}finally{ue.p=h,K.T=l,X_(t,i)}}function Z_(t,i,a){i=ci(a,i),i=Sf(t.stateNode,i,2),t=ts(t,i,2),t!==null&&(be(t,2),Yi(t))}function Nt(t,i,a){if(t.tag===3)Z_(t,t,a);else for(;i!==null;){if(i.tag===3){Z_(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(us===null||!us.has(l))){t=ci(a,t),a=n_(2),l=ts(i,a,2),l!==null&&(i_(a,l,i,t),be(l,2),Yi(l));break}}i=i.return}}function Wf(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new gA;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(Bf=!0,h.add(a),t=TA.bind(null,t,i,a),i.then(t,t))}function TA(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Ct===t&&(ct&a)===a&&(Lt===4||Lt===3&&(ct&62914560)===ct&&300>mn()-Ff?(Tt&2)===0&&mo(t,0):qf|=a,uo===ct&&(uo=0)),Yi(t)}function J_(t,i){i===0&&(i=J()),t=Ya(t,i),t!==null&&(be(t,i),Yi(t))}function bA(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),J_(t,a)}function wA(t,i){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),J_(t,a)}function AA(t,i){return _i(t,i)}var Bu=null,go=null,Zf=!1,qu=!1,Jf=!1,_a=0;function Yi(t){t!==go&&t.next===null&&(go===null?Bu=go=t:go=go.next=t),qu=!0,Zf||(Zf=!0,RA())}function Ml(t,i){if(!Jf&&qu){Jf=!0;do for(var a=!1,l=Bu;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var E=l.suspendedLanes,b=l.pingedLanes;f=(1<<31-_e(42|t)+1)-1,f&=h&~(E&~b),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,iv(l,f))}else f=ct,f=wt(l,l===Ct?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||_t(l,f)||(a=!0,iv(l,f));l=l.next}while(a);Jf=!1}}function SA(){ev()}function ev(){qu=Zf=!1;var t=0;_a!==0&&(PA()&&(t=_a),_a=0);for(var i=mn(),a=null,l=Bu;l!==null;){var h=l.next,f=tv(l,i);f===0?(l.next=null,a===null?Bu=h:a.next=h,h===null&&(go=a)):(a=l,(t!==0||(f&3)!==0)&&(qu=!0)),l=h}Ml(t)}function tv(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var E=31-_e(f),b=1<<E,C=h[E];C===-1?((b&a)===0||(b&l)!==0)&&(h[E]=j(b,i)):C<=i&&(t.expiredLanes|=b),f&=~b}if(i=Ct,a=ct,a=wt(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(bt===2||bt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&vi(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||_t(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&vi(l),Dt(a)){case 2:case 8:a=Gn;break;case 32:a=Ti;break;case 268435456:a=pn;break;default:a=Ti}return l=nv.bind(null,t),a=_i(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&vi(l),t.callbackPriority=2,t.callbackNode=null,2}function nv(t,i){if(vn!==0&&vn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(zu()&&t.callbackNode!==a)return null;var l=ct;return l=wt(t,t===Ct?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(U_(t,l,i),tv(t,mn()),t.callbackNode!=null&&t.callbackNode===a?nv.bind(null,t):null)}function iv(t,i){if(zu())return null;U_(t,i,!0)}function RA(){VA(function(){(Tt&6)!==0?_i(Ei,SA):ev()})}function em(){return _a===0&&(_a=Z()),_a}function rv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ja(""+t)}function sv(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function IA(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var f=rv((h[pt]||null).action),E=l.submitter;E&&(i=(i=E[pt]||null)?rv(i.formAction):E.getAttribute("formAction"),i!==null&&(f=i,E=null));var b=new Ua("action","action",null,l,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(_a!==0){var C=E?sv(h,E):new FormData(h);Ef(a,{pending:!0,data:C,method:h.method,action:f},null,C)}}else typeof f=="function"&&(b.preventDefault(),C=E?sv(h,E):new FormData(h),Ef(a,{pending:!0,data:C,method:h.method,action:f},f,C))},currentTarget:h}]})}}for(var tm=0;tm<Ud.length;tm++){var nm=Ud[tm],xA=nm.toLowerCase(),NA=nm[0].toUpperCase()+nm.slice(1);Ai(xA,"on"+NA)}Ai(Ug,"onAnimationEnd"),Ai(Lg,"onAnimationIteration"),Ai(zg,"onAnimationStart"),Ai("dblclick","onDoubleClick"),Ai("focusin","onFocus"),Ai("focusout","onBlur"),Ai($w,"onTransitionRun"),Ai(Kw,"onTransitionStart"),Ai(Qw,"onTransitionCancel"),Ai(Bg,"onTransitionEnd"),fr("onMouseEnter",["mouseout","mouseover"]),fr("onMouseLeave",["mouseout","mouseover"]),fr("onPointerEnter",["pointerout","pointerover"]),fr("onPointerLeave",["pointerout","pointerover"]),bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bi("onBeforeInput",["compositionend","keypress","textInput","paste"]),bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vl));function av(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var f=void 0;if(i)for(var E=l.length-1;0<=E;E--){var b=l[E],C=b.instance,G=b.currentTarget;if(b=b.listener,C!==f&&h.isPropagationStopped())break e;f=b,h.currentTarget=G;try{f(h)}catch(ee){Nu(ee)}h.currentTarget=null,f=C}else for(E=0;E<l.length;E++){if(b=l[E],C=b.instance,G=b.currentTarget,b=b.listener,C!==f&&h.isPropagationStopped())break e;f=b,h.currentTarget=G;try{f(h)}catch(ee){Nu(ee)}h.currentTarget=null,f=C}}}}function Je(t,i){var a=i[Ko];a===void 0&&(a=i[Ko]=new Set);var l=t+"__bubble";a.has(l)||(ov(i,t,2,!1),a.add(l))}function im(t,i,a){var l=0;i&&(l|=4),ov(a,t,l,i)}var Hu="_reactListening"+Math.random().toString(36).slice(2);function rm(t){if(!t[Hu]){t[Hu]=!0,Qo.forEach(function(a){a!=="selectionchange"&&(CA.has(a)||im(a,!1,t),im(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Hu]||(i[Hu]=!0,im("selectionchange",!1,i))}}function ov(t,i,a,l){switch(Dv(i)){case 2:var h=iS;break;case 8:h=rS;break;default:h=_m}a=h.bind(null,i,a,t),h=void 0,!oi||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function sm(t,i,a,l,h){var f=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var b=l.stateNode.containerInfo;if(b===h)break;if(E===4)for(E=l.return;E!==null;){var C=E.tag;if((C===3||C===4)&&E.stateNode.containerInfo===h)return;E=E.return}for(;b!==null;){if(E=dr(b),E===null)return;if(C=E.tag,C===5||C===6||C===26||C===27){l=f=E;continue e}b=b.parentNode}}l=l.return}Gc(function(){var G=f,ee=ai(a),re=[];e:{var $=qg.get(t);if($!==void 0){var Q=Ua,Ve=t;switch(t){case"keypress":if(zi(a)===0)break e;case"keydown":case"keyup":Q=Fa;break;case"focusin":Ve="focus",Q=Ba;break;case"focusout":Ve="blur",Q=Ba;break;case"beforeblur":case"afterblur":Q=Ba;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=li;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Cd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Jc;break;case Ug:case Lg:case zg:Q=qa;break;case Bg:Q=tu;break;case"scroll":case"scrollend":Q=$c;break;case"wheel":Q=Ga;break;case"copy":case"cut":case"paste":Q=Ha;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=al;break;case"toggle":case"beforetoggle":Q=iu}var De=(i&4)!==0,xt=!De&&(t==="scroll"||t==="scrollend"),B=De?$!==null?$+"Capture":null:$;De=[];for(var V=G,F;V!==null;){var te=V;if(F=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||F===null||B===null||(te=Ws(V,B),te!=null&&De.push(jl(V,te,F))),xt)break;V=V.return}0<De.length&&($=new Q($,Ve,null,a,ee),re.push({event:$,listeners:De}))}}if((i&7)===0){e:{if($=t==="mouseover"||t==="pointerover",Q=t==="mouseout"||t==="pointerout",$&&a!==gr&&(Ve=a.relatedTarget||a.fromElement)&&(dr(Ve)||Ve[$t]))break e;if((Q||$)&&($=ee.window===ee?ee:($=ee.ownerDocument)?$.defaultView||$.parentWindow:window,Q?(Ve=a.relatedTarget||a.toElement,Q=G,Ve=Ve?dr(Ve):null,Ve!==null&&(xt=c(Ve),De=Ve.tag,Ve!==xt||De!==5&&De!==27&&De!==6)&&(Ve=null)):(Q=null,Ve=G),Q!==Ve)){if(De=li,te="onMouseLeave",B="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(De=al,te="onPointerLeave",B="onPointerEnter",V="pointer"),xt=Q==null?$:Vi(Q),F=Ve==null?$:Vi(Ve),$=new De(te,V+"leave",Q,a,ee),$.target=xt,$.relatedTarget=F,te=null,dr(ee)===G&&(De=new De(B,V+"enter",Ve,a,ee),De.target=F,De.relatedTarget=xt,te=De),xt=te,Q&&Ve)t:{for(De=Q,B=Ve,V=0,F=De;F;F=yo(F))V++;for(F=0,te=B;te;te=yo(te))F++;for(;0<V-F;)De=yo(De),V--;for(;0<F-V;)B=yo(B),F--;for(;V--;){if(De===B||B!==null&&De===B.alternate)break t;De=yo(De),B=yo(B)}De=null}else De=null;Q!==null&&lv(re,$,Q,De,!1),Ve!==null&&xt!==null&&lv(re,xt,Ve,De,!0)}}e:{if($=G?Vi(G):window,Q=$.nodeName&&$.nodeName.toLowerCase(),Q==="select"||Q==="input"&&$.type==="file")var we=Ig;else if(tn($))if(xg)we=Hw;else{we=Bw;var We=zw}else Q=$.nodeName,!Q||Q.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?G&&Jo(G.elementType)&&(we=Ig):we=qw;if(we&&(we=we(t,G))){Tr(re,we,a,ee);break e}We&&We(t,$,G),t==="focusout"&&G&&$.type==="number"&&G.memoizedProps.value!=null&&Xr($,"number",$.value)}switch(We=G?Vi(G):window,t){case"focusin":(tn(We)||We.contentEditable==="true")&&($a=We,Md=G,cl=null);break;case"focusout":cl=Md=$a=null;break;case"mousedown":Vd=!0;break;case"contextmenu":case"mouseup":case"dragend":Vd=!1,Vg(re,a,ee);break;case"selectionchange":if(Gw)break;case"keydown":case"keyup":Vg(re,a,ee)}var Ie;if(Hi)e:{switch(t){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else ot?X(t,a)&&(Pe="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Pe="onCompositionStart");Pe&&(v&&a.locale!=="ko"&&(ot||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&ot&&(Ie=tl()):(Li=ee,Wr="value"in Li?Li.value:Li.textContent,ot=!0)),We=Fu(G,Pe),0<We.length&&(Pe=new rl(Pe,t,null,a,ee),re.push({event:Pe,listeners:We}),Ie?Pe.data=Ie:(Ie=me(a),Ie!==null&&(Pe.data=Ie)))),(Ie=_?en(t,a):lt(t,a))&&(Pe=Fu(G,"onBeforeInput"),0<Pe.length&&(We=new rl("onBeforeInput","beforeinput",null,a,ee),re.push({event:We,listeners:Pe}),We.data=Ie)),IA(re,t,G,a,ee)}av(re,i)})}function jl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Fu(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=Ws(t,a),h!=null&&l.unshift(jl(t,h,f)),h=Ws(t,i),h!=null&&l.push(jl(t,h,f))),t.tag===3)return l;t=t.return}return[]}function yo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function lv(t,i,a,l,h){for(var f=i._reactName,E=[];a!==null&&a!==l;){var b=a,C=b.alternate,G=b.stateNode;if(b=b.tag,C!==null&&C===l)break;b!==5&&b!==26&&b!==27||G===null||(C=G,h?(G=Ws(a,f),G!=null&&E.unshift(jl(a,G,C))):h||(G=Ws(a,f),G!=null&&E.push(jl(a,G,C)))),a=a.return}E.length!==0&&t.push({event:i,listeners:E})}var DA=/\r\n?/g,OA=/\u0000|\uFFFD/g;function cv(t){return(typeof t=="string"?t:""+t).replace(DA,`
`).replace(OA,"")}function uv(t,i){return i=cv(i),cv(t)===i}function Gu(){}function It(t,i,a,l,h,f){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||si(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&si(t,""+l);break;case"className":ji(t,"class",l);break;case"tabIndex":ji(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ji(t,a,l);break;case"style":Zo(t,l,f);break;case"data":if(i!=="object"){ji(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ja(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&It(t,i,"name",h.name,h,null),It(t,i,"formEncType",h.formEncType,h,null),It(t,i,"formMethod",h.formMethod,h,null),It(t,i,"formTarget",h.formTarget,h,null)):(It(t,i,"encType",h.encType,h,null),It(t,i,"method",h.method,h,null),It(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ja(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Gu);break;case"onScroll":l!=null&&Je("scroll",t);break;case"onScrollEnd":l!=null&&Je("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ja(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Je("beforetoggle",t),Je("toggle",t),Yr(t,"popover",l);break;case"xlinkActuate":gn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":gn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":gn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":gn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":gn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":gn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":gn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":gn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":gn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Yr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=xd.get(a)||a,Yr(t,a,l))}}function am(t,i,a,l,h,f){switch(a){case"style":Zo(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?si(t,l):(typeof l=="number"||typeof l=="bigint")&&si(t,""+l);break;case"onScroll":l!=null&&Je("scroll",t);break;case"onScrollEnd":l!=null&&Je("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Gu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Oa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=t[pt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(i,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Yr(t,a,l)}}}function En(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",t),Je("load",t);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var E=a[f];if(E!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:It(t,i,f,E,a,null)}}h&&It(t,i,"srcSet",a.srcSet,a,null),l&&It(t,i,"src",a.src,a,null);return;case"input":Je("invalid",t);var b=f=E=h=null,C=null,G=null;for(l in a)if(a.hasOwnProperty(l)){var ee=a[l];if(ee!=null)switch(l){case"name":h=ee;break;case"type":E=ee;break;case"checked":C=ee;break;case"defaultChecked":G=ee;break;case"value":f=ee;break;case"defaultValue":b=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,i));break;default:It(t,i,l,ee,a,null)}}Qs(t,f,b,C,G,E,h,!1),Va(t);return;case"select":Je("invalid",t),l=E=f=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":f=b;break;case"defaultValue":E=b;break;case"multiple":l=b;default:It(t,i,h,b,a,null)}i=f,a=E,t.multiple=!!l,i!=null?pr(t,!!l,i,!1):a!=null&&pr(t,!!l,a,!0);return;case"textarea":Je("invalid",t),f=h=l=null;for(E in a)if(a.hasOwnProperty(E)&&(b=a[E],b!=null))switch(E){case"value":l=b;break;case"defaultValue":h=b;break;case"children":f=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:It(t,i,E,b,a,null)}Ys(t,l,h,f),Va(t);return;case"option":for(C in a)if(a.hasOwnProperty(C)&&(l=a[C],l!=null))switch(C){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:It(t,i,C,l,a,null)}return;case"dialog":Je("beforetoggle",t),Je("toggle",t),Je("cancel",t),Je("close",t);break;case"iframe":case"object":Je("load",t);break;case"video":case"audio":for(l=0;l<Vl.length;l++)Je(Vl[l],t);break;case"image":Je("error",t),Je("load",t);break;case"details":Je("toggle",t);break;case"embed":case"source":case"link":Je("error",t),Je("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(l=a[G],l!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:It(t,i,G,l,a,null)}return;default:if(Jo(i)){for(ee in a)a.hasOwnProperty(ee)&&(l=a[ee],l!==void 0&&am(t,i,ee,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&It(t,i,b,l,a,null))}function kA(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,E=null,b=null,C=null,G=null,ee=null;for(Q in a){var re=a[Q];if(a.hasOwnProperty(Q)&&re!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":C=re;default:l.hasOwnProperty(Q)||It(t,i,Q,null,l,re)}}for(var $ in l){var Q=l[$];if(re=a[$],l.hasOwnProperty($)&&(Q!=null||re!=null))switch($){case"type":f=Q;break;case"name":h=Q;break;case"checked":G=Q;break;case"defaultChecked":ee=Q;break;case"value":E=Q;break;case"defaultValue":b=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:Q!==re&&It(t,i,$,Q,l,re)}}$n(t,E,b,C,G,ee,f,h);return;case"select":Q=E=b=$=null;for(f in a)if(C=a[f],a.hasOwnProperty(f)&&C!=null)switch(f){case"value":break;case"multiple":Q=C;default:l.hasOwnProperty(f)||It(t,i,f,null,l,C)}for(h in l)if(f=l[h],C=a[h],l.hasOwnProperty(h)&&(f!=null||C!=null))switch(h){case"value":$=f;break;case"defaultValue":b=f;break;case"multiple":E=f;default:f!==C&&It(t,i,h,f,l,C)}i=b,a=E,l=Q,$!=null?pr(t,!!a,$,!1):!!l!=!!a&&(i!=null?pr(t,!!a,i,!0):pr(t,!!a,a?[]:"",!1));return;case"textarea":Q=$=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:It(t,i,b,null,l,h)}for(E in l)if(h=l[E],f=a[E],l.hasOwnProperty(E)&&(h!=null||f!=null))switch(E){case"value":$=h;break;case"defaultValue":Q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&It(t,i,E,h,l,f)}St(t,$,Q);return;case"option":for(var Ve in a)if($=a[Ve],a.hasOwnProperty(Ve)&&$!=null&&!l.hasOwnProperty(Ve))switch(Ve){case"selected":t.selected=!1;break;default:It(t,i,Ve,null,l,$)}for(C in l)if($=l[C],Q=a[C],l.hasOwnProperty(C)&&$!==Q&&($!=null||Q!=null))switch(C){case"selected":t.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:It(t,i,C,$,l,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in a)$=a[De],a.hasOwnProperty(De)&&$!=null&&!l.hasOwnProperty(De)&&It(t,i,De,null,l,$);for(G in l)if($=l[G],Q=a[G],l.hasOwnProperty(G)&&$!==Q&&($!=null||Q!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,i));break;default:It(t,i,G,$,l,Q)}return;default:if(Jo(i)){for(var xt in a)$=a[xt],a.hasOwnProperty(xt)&&$!==void 0&&!l.hasOwnProperty(xt)&&am(t,i,xt,void 0,l,$);for(ee in l)$=l[ee],Q=a[ee],!l.hasOwnProperty(ee)||$===Q||$===void 0&&Q===void 0||am(t,i,ee,$,l,Q);return}}for(var B in a)$=a[B],a.hasOwnProperty(B)&&$!=null&&!l.hasOwnProperty(B)&&It(t,i,B,null,l,$);for(re in l)$=l[re],Q=a[re],!l.hasOwnProperty(re)||$===Q||$==null&&Q==null||It(t,i,re,$,l,Q)}var om=null,lm=null;function $u(t){return t.nodeType===9?t:t.ownerDocument}function hv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function dv(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function cm(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var um=null;function PA(){var t=window.event;return t&&t.type==="popstate"?t===um?!1:(um=t,!0):(um=null,!1)}var fv=typeof setTimeout=="function"?setTimeout:void 0,MA=typeof clearTimeout=="function"?clearTimeout:void 0,mv=typeof Promise=="function"?Promise:void 0,VA=typeof queueMicrotask=="function"?queueMicrotask:typeof mv<"u"?function(t){return mv.resolve(null).then(t).catch(jA)}:fv;function jA(t){setTimeout(function(){throw t})}function fs(t){return t==="head"}function pv(t,i){var a=i,l=0,h=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var E=t.ownerDocument;if(a&1&&Ul(E.documentElement),a&2&&Ul(E.body),a&4)for(a=E.head,Ul(a),E=a.firstChild;E;){var b=E.nextSibling,C=E.nodeName;E[Fs]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=b}}if(h===0){t.removeChild(f),$l(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);$l(i)}function hm(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":hm(a),Qr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function UA(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Fs])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Ri(t.nextSibling),t===null)break}return null}function LA(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Ri(t.nextSibling),t===null))return null;return t}function dm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function zA(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Ri(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var fm=null;function gv(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function yv(t,i,a){switch(i=$u(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Ul(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Qr(t)}var pi=new Map,_v=new Set;function Ku(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Pr=ue.d;ue.d={f:BA,r:qA,D:HA,C:FA,L:GA,m:$A,X:QA,S:KA,M:YA};function BA(){var t=Pr.f(),i=Uu();return t||i}function qA(t){var i=Mi(t);i!==null&&i.tag===5&&i.type==="form"?Uy(i):Pr.r(t)}var _o=typeof document>"u"?null:document;function vv(t,i,a){var l=_o;if(l&&typeof i=="string"&&i){var h=Kt(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),_v.has(h)||(_v.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),En(i,"link",t),Bt(i),l.head.appendChild(i)))}}function HA(t){Pr.D(t),vv("dns-prefetch",t,null)}function FA(t,i){Pr.C(t,i),vv("preconnect",t,i)}function GA(t,i,a){Pr.L(t,i,a);var l=_o;if(l&&t&&i){var h='link[rel="preload"][as="'+Kt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Kt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Kt(a.imageSizes)+'"]')):h+='[href="'+Kt(t)+'"]';var f=h;switch(i){case"style":f=vo(t);break;case"script":f=Eo(t)}pi.has(f)||(t=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),pi.set(f,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(Ll(f))||i==="script"&&l.querySelector(zl(f))||(i=l.createElement("link"),En(i,"link",t),Bt(i),l.head.appendChild(i)))}}function $A(t,i){Pr.m(t,i);var a=_o;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Kt(l)+'"][href="'+Kt(t)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Eo(t)}if(!pi.has(f)&&(t=T({rel:"modulepreload",href:t},i),pi.set(f,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(zl(f)))return}l=a.createElement("link"),En(l,"link",t),Bt(l),a.head.appendChild(l)}}}function KA(t,i,a){Pr.S(t,i,a);var l=_o;if(l&&t){var h=On(l).hoistableStyles,f=vo(t);i=i||"default";var E=h.get(f);if(!E){var b={loading:0,preload:null};if(E=l.querySelector(Ll(f)))b.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":i},a),(a=pi.get(f))&&mm(t,a);var C=E=l.createElement("link");Bt(C),En(C,"link",t),C._p=new Promise(function(G,ee){C.onload=G,C.onerror=ee}),C.addEventListener("load",function(){b.loading|=1}),C.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Qu(E,i,l)}E={type:"stylesheet",instance:E,count:1,state:b},h.set(f,E)}}}function QA(t,i){Pr.X(t,i);var a=_o;if(a&&t){var l=On(a).hoistableScripts,h=Eo(t),f=l.get(h);f||(f=a.querySelector(zl(h)),f||(t=T({src:t,async:!0},i),(i=pi.get(h))&&pm(t,i),f=a.createElement("script"),Bt(f),En(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function YA(t,i){Pr.M(t,i);var a=_o;if(a&&t){var l=On(a).hoistableScripts,h=Eo(t),f=l.get(h);f||(f=a.querySelector(zl(h)),f||(t=T({src:t,async:!0,type:"module"},i),(i=pi.get(h))&&pm(t,i),f=a.createElement("script"),Bt(f),En(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function Ev(t,i,a,l){var h=(h=ke.current)?Ku(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=vo(a.href),a=On(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=vo(a.href);var f=On(h).hoistableStyles,E=f.get(t);if(E||(h=h.ownerDocument||h,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,E),(f=h.querySelector(Ll(t)))&&!f._p&&(E.instance=f,E.state.loading=5),pi.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},pi.set(t,a),f||XA(h,t,a,E.state))),i&&l===null)throw Error(s(528,""));return E}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Eo(a),a=On(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function vo(t){return'href="'+Kt(t)+'"'}function Ll(t){return'link[rel="stylesheet"]['+t+"]"}function Tv(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function XA(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),En(i,"link",a),Bt(i),t.head.appendChild(i))}function Eo(t){return'[src="'+Kt(t)+'"]'}function zl(t){return"script[async]"+t}function bv(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+Kt(a.href)+'"]');if(l)return i.instance=l,Bt(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Bt(l),En(l,"style",h),Qu(l,a.precedence,t),i.instance=l;case"stylesheet":h=vo(a.href);var f=t.querySelector(Ll(h));if(f)return i.state.loading|=4,i.instance=f,Bt(f),f;l=Tv(a),(h=pi.get(h))&&mm(l,h),f=(t.ownerDocument||t).createElement("link"),Bt(f);var E=f;return E._p=new Promise(function(b,C){E.onload=b,E.onerror=C}),En(f,"link",l),i.state.loading|=4,Qu(f,a.precedence,t),i.instance=f;case"script":return f=Eo(a.src),(h=t.querySelector(zl(f)))?(i.instance=h,Bt(h),h):(l=a,(h=pi.get(f))&&(l=T({},a),pm(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Bt(h),En(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Qu(l,a.precedence,t));return i.instance}function Qu(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,E=0;E<l.length;E++){var b=l[E];if(b.dataset.precedence===i)f=b;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function mm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function pm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Yu=null;function wv(t,i,a){if(Yu===null){var l=new Map,h=Yu=new Map;h.set(a,l)}else h=Yu,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[Fs]||f[at]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var E=f.getAttribute(i)||"";E=t+E;var b=l.get(E);b?b.push(f):l.set(E,[f])}}return l}function Av(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function WA(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Sv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Bl=null;function ZA(){}function JA(t,i,a){if(Bl===null)throw Error(s(475));var l=Bl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=vo(a.href),f=t.querySelector(Ll(h));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Xu.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=f,Bt(f);return}f=t.ownerDocument||t,a=Tv(a),(h=pi.get(h))&&mm(a,h),f=f.createElement("link"),Bt(f);var E=f;E._p=new Promise(function(b,C){E.onload=b,E.onerror=C}),En(f,"link",a),i.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=Xu.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function eS(){if(Bl===null)throw Error(s(475));var t=Bl;return t.stylesheets&&t.count===0&&gm(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&gm(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Xu(){if(this.count--,this.count===0){if(this.stylesheets)gm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Wu=null;function gm(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Wu=new Map,i.forEach(tS,t),Wu=null,Xu.call(t))}function tS(t,i){if(!(i.state.loading&4)){var a=Wu.get(t);if(a)var l=a.get(null);else{a=new Map,Wu.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var E=h[f];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}h=i.instance,E=h.getAttribute("data-precedence"),f=a.get(E)||l,f===l&&a.set(null,h),a.set(E,h),this.count++,l=Xu.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var ql={$$typeof:W,Provider:null,Consumer:null,_currentValue:Ae,_currentValue2:Ae,_threadCount:0};function nS(t,i,a,l,h,f,E,b){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ve(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ve(0),this.hiddenUpdates=ve(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function Rv(t,i,a,l,h,f,E,b,C,G,ee,re){return t=new nS(t,i,a,E,b,C,G,re),i=1,f===!0&&(i|=24),f=Qn(3,null,null,i),t.current=f,f.stateNode=t,i=Xd(),i.refCount++,t.pooledCache=i,i.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:i},ef(f),t}function Iv(t){return t?(t=Xa,t):Xa}function xv(t,i,a,l,h,f){h=Iv(h),l.context===null?l.context=h:l.pendingContext=h,l=es(i),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=ts(t,l,i),a!==null&&(Jn(a,t,i),_l(a,t,i))}function Nv(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function ym(t,i){Nv(t,i),(t=t.alternate)&&Nv(t,i)}function Cv(t){if(t.tag===13){var i=Ya(t,67108864);i!==null&&Jn(i,t,67108864),ym(t,67108864)}}var Zu=!0;function iS(t,i,a,l){var h=K.T;K.T=null;var f=ue.p;try{ue.p=2,_m(t,i,a,l)}finally{ue.p=f,K.T=h}}function rS(t,i,a,l){var h=K.T;K.T=null;var f=ue.p;try{ue.p=8,_m(t,i,a,l)}finally{ue.p=f,K.T=h}}function _m(t,i,a,l){if(Zu){var h=vm(l);if(h===null)sm(t,i,l,Ju,a),Ov(t,l);else if(aS(h,t,i,a,l))l.stopPropagation();else if(Ov(t,l),i&4&&-1<sS.indexOf(t)){for(;h!==null;){var f=Mi(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var E=Ue(f.pendingLanes);if(E!==0){var b=f;for(b.pendingLanes|=2,b.entangledLanes|=2;E;){var C=1<<31-_e(E);b.entanglements[1]|=C,E&=~C}Yi(f),(Tt&6)===0&&(Vu=mn()+500,Ml(0))}}break;case 13:b=Ya(f,2),b!==null&&Jn(b,f,2),Uu(),ym(f,2)}if(f=vm(l),f===null&&sm(t,i,l,Ju,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else sm(t,i,l,null,a)}}function vm(t){return t=ai(t),Em(t)}var Ju=null;function Em(t){if(Ju=null,t=dr(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=d(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Ju=t,null}function Dv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Hs()){case Ei:return 2;case Gn:return 8;case Ti:case $r:return 32;case pn:return 268435456;default:return 32}default:return 32}}var Tm=!1,ms=null,ps=null,gs=null,Hl=new Map,Fl=new Map,ys=[],sS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ov(t,i){switch(t){case"focusin":case"focusout":ms=null;break;case"dragenter":case"dragleave":ps=null;break;case"mouseover":case"mouseout":gs=null;break;case"pointerover":case"pointerout":Hl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fl.delete(i.pointerId)}}function Gl(t,i,a,l,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},i!==null&&(i=Mi(i),i!==null&&Cv(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function aS(t,i,a,l,h){switch(i){case"focusin":return ms=Gl(ms,t,i,a,l,h),!0;case"dragenter":return ps=Gl(ps,t,i,a,l,h),!0;case"mouseover":return gs=Gl(gs,t,i,a,l,h),!0;case"pointerover":var f=h.pointerId;return Hl.set(f,Gl(Hl.get(f)||null,t,i,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,Fl.set(f,Gl(Fl.get(f)||null,t,i,a,l,h)),!0}return!1}function kv(t){var i=dr(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){t.blockedOn=i,zt(t.priority,function(){if(a.tag===13){var l=Zn();l=ze(l);var h=Ya(a,l);h!==null&&Jn(h,a,l),ym(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function eh(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=vm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);gr=l,a.target.dispatchEvent(l),gr=null}else return i=Mi(a),i!==null&&Cv(i),t.blockedOn=a,!1;i.shift()}return!0}function Pv(t,i,a){eh(t)&&a.delete(i)}function oS(){Tm=!1,ms!==null&&eh(ms)&&(ms=null),ps!==null&&eh(ps)&&(ps=null),gs!==null&&eh(gs)&&(gs=null),Hl.forEach(Pv),Fl.forEach(Pv)}function th(t,i){t.blockedOn===i&&(t.blockedOn=null,Tm||(Tm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,oS)))}var nh=null;function Mv(t){nh!==t&&(nh=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){nh===t&&(nh=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(Em(l||a)===null)continue;break}var f=Mi(a);f!==null&&(t.splice(i,3),i-=3,Ef(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function $l(t){function i(C){return th(C,t)}ms!==null&&th(ms,t),ps!==null&&th(ps,t),gs!==null&&th(gs,t),Hl.forEach(i),Fl.forEach(i);for(var a=0;a<ys.length;a++){var l=ys[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ys.length&&(a=ys[0],a.blockedOn===null);)kv(a),a.blockedOn===null&&ys.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],E=h[pt]||null;if(typeof f=="function")E||Mv(a);else if(E){var b=null;if(f&&f.hasAttribute("formAction")){if(h=f,E=f[pt]||null)b=E.formAction;else if(Em(h)!==null)continue}else b=E.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),Mv(a)}}}function bm(t){this._internalRoot=t}ih.prototype.render=bm.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=Zn();xv(a,l,t,i,null,null)},ih.prototype.unmount=bm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;xv(t.current,2,null,t,null,null),Uu(),i[$t]=null}};function ih(t){this._internalRoot=t}ih.prototype.unstable_scheduleHydration=function(t){if(t){var i=At();t={blockedOn:null,target:t,priority:i};for(var a=0;a<ys.length&&i!==0&&i<ys[a].priority;a++);ys.splice(a,0,t),a===0&&kv(t)}};var Vv=e.version;if(Vv!=="19.1.0")throw Error(s(527,Vv,"19.1.0"));ue.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(i),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var lS={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rh.isDisabled&&rh.supportsFiber)try{yt=rh.inject(lS),oe=rh}catch{}}return Ql.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=Zy,f=Jy,E=e_,b=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(b=i.unstable_transitionCallbacks)),i=Rv(t,1,!1,null,null,a,l,h,f,E,b,null),t[$t]=i.current,rm(t),new bm(i)},Ql.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",f=Zy,E=Jy,b=e_,C=null,G=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(C=a.unstable_transitionCallbacks),a.formState!==void 0&&(G=a.formState)),i=Rv(t,1,!0,i,a??null,l,h,f,E,b,C,G),i.context=Iv(null),a=i.current,l=Zn(),l=ze(l),h=es(l),h.callback=null,ts(a,h,l),a=l,i.current.lanes=a,be(i,a),Yi(i),t[$t]=i.current,rm(t),new ih(i)},Ql.version="19.1.0",Ql}var $v;function _S(){if($v)return Sm.exports;$v=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Sm.exports=yS(),Sm.exports}var vS=_S(),Yl={},Kv;function ES(){if(Kv)return Yl;Kv=1,Object.defineProperty(Yl,"__esModule",{value:!0}),Yl.parse=d,Yl.serialize=y;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,c=(()=>{const S=function(){};return S.prototype=Object.create(null),S})();function d(S,P){const U=new c,q=S.length;if(q<2)return U;const z=(P==null?void 0:P.decode)||T;let Y=0;do{const ae=S.indexOf("=",Y);if(ae===-1)break;const W=S.indexOf(";",Y),de=W===-1?q:W;if(ae>de){Y=S.lastIndexOf(";",ae-1)+1;continue}const ce=m(S,Y,ae),le=p(S,ae,ce),x=S.slice(ce,le);if(U[x]===void 0){let R=m(S,ae+1,de),I=p(S,de,R);const O=z(S.slice(R,I));U[x]=O}Y=de+1}while(Y<q);return U}function m(S,P,U){do{const q=S.charCodeAt(P);if(q!==32&&q!==9)return P}while(++P<U);return U}function p(S,P,U){for(;P>U;){const q=S.charCodeAt(--P);if(q!==32&&q!==9)return P+1}return U}function y(S,P,U){const q=(U==null?void 0:U.encode)||encodeURIComponent;if(!r.test(S))throw new TypeError(`argument name is invalid: ${S}`);const z=q(P);if(!e.test(z))throw new TypeError(`argument val is invalid: ${P}`);let Y=S+"="+z;if(!U)return Y;if(U.maxAge!==void 0){if(!Number.isInteger(U.maxAge))throw new TypeError(`option maxAge is invalid: ${U.maxAge}`);Y+="; Max-Age="+U.maxAge}if(U.domain){if(!n.test(U.domain))throw new TypeError(`option domain is invalid: ${U.domain}`);Y+="; Domain="+U.domain}if(U.path){if(!s.test(U.path))throw new TypeError(`option path is invalid: ${U.path}`);Y+="; Path="+U.path}if(U.expires){if(!A(U.expires)||!Number.isFinite(U.expires.valueOf()))throw new TypeError(`option expires is invalid: ${U.expires}`);Y+="; Expires="+U.expires.toUTCString()}if(U.httpOnly&&(Y+="; HttpOnly"),U.secure&&(Y+="; Secure"),U.partitioned&&(Y+="; Partitioned"),U.priority)switch(typeof U.priority=="string"?U.priority.toLowerCase():void 0){case"low":Y+="; Priority=Low";break;case"medium":Y+="; Priority=Medium";break;case"high":Y+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${U.priority}`)}if(U.sameSite)switch(typeof U.sameSite=="string"?U.sameSite.toLowerCase():U.sameSite){case!0:case"strict":Y+="; SameSite=Strict";break;case"lax":Y+="; SameSite=Lax";break;case"none":Y+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${U.sameSite}`)}return Y}function T(S){if(S.indexOf("%")===-1)return S;try{return decodeURIComponent(S)}catch{return S}}function A(S){return o.call(S)==="[object Date]"}return Yl}ES();/**
 * react-router v7.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Qv="popstate";function TS(r={}){function e(s,o){let{pathname:c,search:d,hash:m}=s.location;return Fm("",{pathname:c,search:d,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:uc(o)}return wS(e,n,null,r)}function Mt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Ni(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bS(){return Math.random().toString(36).substring(2,10)}function Yv(r,e){return{usr:r.state,key:r.key,idx:e}}function Fm(r,e,n=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?jo(e):e,state:n,key:e&&e.key||s||bS()}}function uc({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function jo(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function wS(r,e,n,s={}){let{window:o=document.defaultView,v5Compat:c=!1}=s,d=o.history,m="POP",p=null,y=T();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function T(){return(d.state||{idx:null}).idx}function A(){m="POP";let z=T(),Y=z==null?null:z-y;y=z,p&&p({action:m,location:q.location,delta:Y})}function S(z,Y){m="PUSH";let ae=Fm(q.location,z,Y);y=T()+1;let W=Yv(ae,y),de=q.createHref(ae);try{d.pushState(W,"",de)}catch(ce){if(ce instanceof DOMException&&ce.name==="DataCloneError")throw ce;o.location.assign(de)}c&&p&&p({action:m,location:q.location,delta:1})}function P(z,Y){m="REPLACE";let ae=Fm(q.location,z,Y);y=T();let W=Yv(ae,y),de=q.createHref(ae);d.replaceState(W,"",de),c&&p&&p({action:m,location:q.location,delta:0})}function U(z){let Y=o.location.origin!=="null"?o.location.origin:o.location.href,ae=typeof z=="string"?z:uc(z);return ae=ae.replace(/ $/,"%20"),Mt(Y,`No window.location.(origin|href) available to create URL for href: ${ae}`),new URL(ae,Y)}let q={get action(){return m},get location(){return r(o,d)},listen(z){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Qv,A),p=z,()=>{o.removeEventListener(Qv,A),p=null}},createHref(z){return e(o,z)},createURL:U,encodeLocation(z){let Y=U(z);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:S,replace:P,go(z){return d.go(z)}};return q}function UE(r,e,n="/"){return AS(r,e,n,!1)}function AS(r,e,n,s){let o=typeof e=="string"?jo(e):e,c=Br(o.pathname||"/",n);if(c==null)return null;let d=LE(r);SS(d);let m=null;for(let p=0;m==null&&p<d.length;++p){let y=VS(c);m=PS(d[p],y,s)}return m}function LE(r,e=[],n=[],s=""){let o=(c,d,m)=>{let p={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};p.relativePath.startsWith("/")&&(Mt(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let y=jr([s,p.relativePath]),T=n.concat(p);c.children&&c.children.length>0&&(Mt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),LE(c.children,e,T,y)),!(c.path==null&&!c.index)&&e.push({path:y,score:OS(y,c.index),routesMeta:T})};return r.forEach((c,d)=>{var m;if(c.path===""||!((m=c.path)!=null&&m.includes("?")))o(c,d);else for(let p of zE(c.path))o(c,d,p)}),e}function zE(r){let e=r.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(s.length===0)return o?[c,""]:[c];let d=zE(s.join("/")),m=[];return m.push(...d.map(p=>p===""?c:[c,p].join("/"))),o&&m.push(...d),m.map(p=>r.startsWith("/")&&p===""?"/":p)}function SS(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:kS(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var RS=/^:[\w-]+$/,IS=3,xS=2,NS=1,CS=10,DS=-2,Xv=r=>r==="*";function OS(r,e){let n=r.split("/"),s=n.length;return n.some(Xv)&&(s+=DS),e&&(s+=xS),n.filter(o=>!Xv(o)).reduce((o,c)=>o+(RS.test(c)?IS:c===""?NS:CS),s)}function kS(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function PS(r,e,n=!1){let{routesMeta:s}=r,o={},c="/",d=[];for(let m=0;m<s.length;++m){let p=s[m],y=m===s.length-1,T=c==="/"?e:e.slice(c.length)||"/",A=Rh({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},T),S=p.route;if(!A&&y&&n&&!s[s.length-1].route.index&&(A=Rh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},T)),!A)return null;Object.assign(o,A.params),d.push({params:o,pathname:jr([c,A.pathname]),pathnameBase:zS(jr([c,A.pathnameBase])),route:S}),A.pathnameBase!=="/"&&(c=jr([c,A.pathnameBase]))}return d}function Rh(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,s]=MS(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((y,{paramName:T,isOptional:A},S)=>{if(T==="*"){let U=m[S]||"";d=c.slice(0,c.length-U.length).replace(/(.)\/+$/,"$1")}const P=m[S];return A&&!P?y[T]=void 0:y[T]=(P||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:d,pattern:r}}function MS(r,e=!1,n=!0){Ni(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function VS(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ni(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Br(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}function jS(r,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof r=="string"?jo(r):r;return{pathname:n?n.startsWith("/")?n:US(n,e):e,search:BS(s),hash:qS(o)}}function US(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Nm(r,e,n,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function LS(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function bp(r){let e=LS(r);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function wp(r,e,n,s=!1){let o;typeof r=="string"?o=jo(r):(o={...r},Mt(!o.pathname||!o.pathname.includes("?"),Nm("?","pathname","search",o)),Mt(!o.pathname||!o.pathname.includes("#"),Nm("#","pathname","hash",o)),Mt(!o.search||!o.search.includes("#"),Nm("#","search","hash",o)));let c=r===""||o.pathname==="",d=c?"/":o.pathname,m;if(d==null)m=n;else{let A=e.length-1;if(!s&&d.startsWith("..")){let S=d.split("/");for(;S[0]==="..";)S.shift(),A-=1;o.pathname=S.join("/")}m=A>=0?e[A]:"/"}let p=jS(o,m),y=d&&d!=="/"&&d.endsWith("/"),T=(c||d===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(y||T)&&(p.pathname+="/"),p}var jr=r=>r.join("/").replace(/\/\/+/g,"/"),zS=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),BS=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,qS=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function HS(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var BE=["POST","PUT","PATCH","DELETE"];new Set(BE);var FS=["GET",...BE];new Set(FS);var Uo=k.createContext(null);Uo.displayName="DataRouter";var Xh=k.createContext(null);Xh.displayName="DataRouterState";var qE=k.createContext({isTransitioning:!1});qE.displayName="ViewTransition";var GS=k.createContext(new Map);GS.displayName="Fetchers";var $S=k.createContext(null);$S.displayName="Await";var Oi=k.createContext(null);Oi.displayName="Navigation";var wc=k.createContext(null);wc.displayName="Location";var ki=k.createContext({outlet:null,matches:[],isDataRoute:!1});ki.displayName="Route";var Ap=k.createContext(null);Ap.displayName="RouteError";function KS(r,{relative:e}={}){Mt(Lo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=k.useContext(Oi),{hash:o,pathname:c,search:d}=Ac(r,{relative:e}),m=c;return n!=="/"&&(m=c==="/"?n:jr([n,c])),s.createHref({pathname:m,search:d,hash:o})}function Lo(){return k.useContext(wc)!=null}function Vs(){return Mt(Lo(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(wc).location}var HE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function FE(r){k.useContext(Oi).static||k.useLayoutEffect(r)}function or(){let{isDataRoute:r}=k.useContext(ki);return r?oR():QS()}function QS(){Mt(Lo(),"useNavigate() may be used only in the context of a <Router> component.");let r=k.useContext(Uo),{basename:e,navigator:n}=k.useContext(Oi),{matches:s}=k.useContext(ki),{pathname:o}=Vs(),c=JSON.stringify(bp(s)),d=k.useRef(!1);return FE(()=>{d.current=!0}),k.useCallback((p,y={})=>{if(Ni(d.current,HE),!d.current)return;if(typeof p=="number"){n.go(p);return}let T=wp(p,JSON.parse(c),o,y.relative==="path");r==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:jr([e,T.pathname])),(y.replace?n.replace:n.push)(T,y.state,y)},[e,n,c,o,r])}k.createContext(null);function YS(){let{matches:r}=k.useContext(ki),e=r[r.length-1];return e?e.params:{}}function Ac(r,{relative:e}={}){let{matches:n}=k.useContext(ki),{pathname:s}=Vs(),o=JSON.stringify(bp(n));return k.useMemo(()=>wp(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function XS(r,e){return GE(r,e)}function GE(r,e,n,s){var ae;Mt(Lo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:c}=k.useContext(Oi),{matches:d}=k.useContext(ki),m=d[d.length-1],p=m?m.params:{},y=m?m.pathname:"/",T=m?m.pathnameBase:"/",A=m&&m.route;{let W=A&&A.path||"";$E(y,!A||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let S=Vs(),P;if(e){let W=typeof e=="string"?jo(e):e;Mt(T==="/"||((ae=W.pathname)==null?void 0:ae.startsWith(T)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${T}" but pathname "${W.pathname}" was given in the \`location\` prop.`),P=W}else P=S;let U=P.pathname||"/",q=U;if(T!=="/"){let W=T.replace(/^\//,"").split("/");q="/"+U.replace(/^\//,"").split("/").slice(W.length).join("/")}let z=!c&&n&&n.matches&&n.matches.length>0?n.matches:UE(r,{pathname:q});Ni(A||z!=null,`No routes matched location "${P.pathname}${P.search}${P.hash}" `),Ni(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Y=tR(z&&z.map(W=>Object.assign({},W,{params:Object.assign({},p,W.params),pathname:jr([T,o.encodeLocation?o.encodeLocation(W.pathname).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?T:jr([T,o.encodeLocation?o.encodeLocation(W.pathnameBase).pathname:W.pathnameBase])})),d,n,s);return e&&Y?k.createElement(wc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...P},navigationType:"POP"}},Y):Y}function WS(){let r=aR(),e=HS(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},c={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",r),d=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:c},"ErrorBoundary")," or"," ",k.createElement("code",{style:c},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:o},n):null,d)}var ZS=k.createElement(WS,null),JS=class extends k.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?k.createElement(ki.Provider,{value:this.props.routeContext},k.createElement(Ap.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function eR({routeContext:r,match:e,children:n}){let s=k.useContext(Uo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(ki.Provider,{value:r},n)}function tR(r,e=[],n=null,s=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let o=r,c=n==null?void 0:n.errors;if(c!=null){let p=o.findIndex(y=>y.route.id&&(c==null?void 0:c[y.route.id])!==void 0);Mt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let d=!1,m=-1;if(n)for(let p=0;p<o.length;p++){let y=o[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(m=p),y.route.id){let{loaderData:T,errors:A}=n,S=y.route.loader&&!T.hasOwnProperty(y.route.id)&&(!A||A[y.route.id]===void 0);if(y.route.lazy||S){d=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((p,y,T)=>{let A,S=!1,P=null,U=null;n&&(A=c&&y.route.id?c[y.route.id]:void 0,P=y.route.errorElement||ZS,d&&(m<0&&T===0?($E("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,U=null):m===T&&(S=!0,U=y.route.hydrateFallbackElement||null)));let q=e.concat(o.slice(0,T+1)),z=()=>{let Y;return A?Y=P:S?Y=U:y.route.Component?Y=k.createElement(y.route.Component,null):y.route.element?Y=y.route.element:Y=p,k.createElement(eR,{match:y,routeContext:{outlet:p,matches:q,isDataRoute:n!=null},children:Y})};return n&&(y.route.ErrorBoundary||y.route.errorElement||T===0)?k.createElement(JS,{location:n.location,revalidation:n.revalidation,component:P,error:A,children:z(),routeContext:{outlet:null,matches:q,isDataRoute:!0}}):z()},null)}function Sp(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nR(r){let e=k.useContext(Uo);return Mt(e,Sp(r)),e}function iR(r){let e=k.useContext(Xh);return Mt(e,Sp(r)),e}function rR(r){let e=k.useContext(ki);return Mt(e,Sp(r)),e}function Rp(r){let e=rR(r),n=e.matches[e.matches.length-1];return Mt(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function sR(){return Rp("useRouteId")}function aR(){var s;let r=k.useContext(Ap),e=iR("useRouteError"),n=Rp("useRouteError");return r!==void 0?r:(s=e.errors)==null?void 0:s[n]}function oR(){let{router:r}=nR("useNavigate"),e=Rp("useNavigate"),n=k.useRef(!1);return FE(()=>{n.current=!0}),k.useCallback(async(o,c={})=>{Ni(n.current,HE),n.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...c}))},[r,e])}var Wv={};function $E(r,e,n){!e&&!Wv[r]&&(Wv[r]=!0,Ni(!1,n))}k.memo(lR);function lR({routes:r,future:e,state:n}){return GE(r,void 0,n,e)}function KE({to:r,replace:e,state:n,relative:s}){Mt(Lo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=k.useContext(Oi);Ni(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=k.useContext(ki),{pathname:d}=Vs(),m=or(),p=wp(r,bp(c),d,s==="path"),y=JSON.stringify(p);return k.useEffect(()=>{m(JSON.parse(y),{replace:e,state:n,relative:s})},[m,y,s,e,n]),null}function Xi(r){Mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function cR({basename:r="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:c=!1}){Mt(!Lo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=r.replace(/^\/*/,"/"),m=k.useMemo(()=>({basename:d,navigator:o,static:c,future:{}}),[d,o,c]);typeof n=="string"&&(n=jo(n));let{pathname:p="/",search:y="",hash:T="",state:A=null,key:S="default"}=n,P=k.useMemo(()=>{let U=Br(p,d);return U==null?null:{location:{pathname:U,search:y,hash:T,state:A,key:S},navigationType:s}},[d,p,y,T,A,S,s]);return Ni(P!=null,`<Router basename="${d}"> is not able to match the URL "${p}${y}${T}" because it does not start with the basename, so the <Router> won't render anything.`),P==null?null:k.createElement(Oi.Provider,{value:m},k.createElement(wc.Provider,{children:e,value:P}))}function uR({children:r,location:e}){return XS(Gm(r),e)}function Gm(r,e=[]){let n=[];return k.Children.forEach(r,(s,o)=>{if(!k.isValidElement(s))return;let c=[...e,o];if(s.type===k.Fragment){n.push.apply(n,Gm(s.props.children,c));return}Mt(s.type===Xi,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Mt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let d={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=Gm(s.props.children,c)),n.push(d)}),n}var fh="get",mh="application/x-www-form-urlencoded";function Wh(r){return r!=null&&typeof r.tagName=="string"}function hR(r){return Wh(r)&&r.tagName.toLowerCase()==="button"}function dR(r){return Wh(r)&&r.tagName.toLowerCase()==="form"}function fR(r){return Wh(r)&&r.tagName.toLowerCase()==="input"}function mR(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function pR(r,e){return r.button===0&&(!e||e==="_self")&&!mR(r)}var sh=null;function gR(){if(sh===null)try{new FormData(document.createElement("form"),0),sh=!1}catch{sh=!0}return sh}var yR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Cm(r){return r!=null&&!yR.has(r)?(Ni(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${mh}"`),null):r}function _R(r,e){let n,s,o,c,d;if(dR(r)){let m=r.getAttribute("action");s=m?Br(m,e):null,n=r.getAttribute("method")||fh,o=Cm(r.getAttribute("enctype"))||mh,c=new FormData(r)}else if(hR(r)||fR(r)&&(r.type==="submit"||r.type==="image")){let m=r.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||m.getAttribute("action");if(s=p?Br(p,e):null,n=r.getAttribute("formmethod")||m.getAttribute("method")||fh,o=Cm(r.getAttribute("formenctype"))||Cm(m.getAttribute("enctype"))||mh,c=new FormData(m,r),!gR()){let{name:y,type:T,value:A}=r;if(T==="image"){let S=y?`${y}.`:"";c.append(`${S}x`,"0"),c.append(`${S}y`,"0")}else y&&c.append(y,A)}}else{if(Wh(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=fh,s=null,o=mh,d=r}return c&&o==="text/plain"&&(d=c,c=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:c,body:d}}function Ip(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function vR(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ER(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function TR(r,e,n){let s=await Promise.all(r.map(async o=>{let c=e.routes[o.route.id];if(c){let d=await vR(c,n);return d.links?d.links():[]}return[]}));return SR(s.flat(1).filter(ER).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Zv(r,e,n,s,o,c){let d=(p,y)=>n[y]?p.route.id!==n[y].route.id:!0,m=(p,y)=>{var T;return n[y].pathname!==p.pathname||((T=n[y].route.path)==null?void 0:T.endsWith("*"))&&n[y].params["*"]!==p.params["*"]};return c==="assets"?e.filter((p,y)=>d(p,y)||m(p,y)):c==="data"?e.filter((p,y)=>{var A;let T=s.routes[p.route.id];if(!T||!T.hasLoader)return!1;if(d(p,y)||m(p,y))return!0;if(p.route.shouldRevalidate){let S=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((A=n[0])==null?void 0:A.params)||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function bR(r,e,{includeHydrateFallback:n}={}){return wR(r.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function wR(r){return[...new Set(r)]}function AR(r){let e={},n=Object.keys(r).sort();for(let s of n)e[s]=r[s];return e}function SR(r,e){let n=new Set;return new Set(e),r.reduce((s,o)=>{let c=JSON.stringify(AR(o));return n.has(c)||(n.add(c),s.push({key:c,link:o})),s},[])}function RR(r,e){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname="_root.data":e&&Br(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function QE(){let r=k.useContext(Uo);return Ip(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function IR(){let r=k.useContext(Xh);return Ip(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var xp=k.createContext(void 0);xp.displayName="FrameworkContext";function YE(){let r=k.useContext(xp);return Ip(r,"You must render this element inside a <HydratedRouter> element"),r}function xR(r,e){let n=k.useContext(xp),[s,o]=k.useState(!1),[c,d]=k.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:y,onMouseLeave:T,onTouchStart:A}=e,S=k.useRef(null);k.useEffect(()=>{if(r==="render"&&d(!0),r==="viewport"){let q=Y=>{Y.forEach(ae=>{d(ae.isIntersecting)})},z=new IntersectionObserver(q,{threshold:.5});return S.current&&z.observe(S.current),()=>{z.disconnect()}}},[r]),k.useEffect(()=>{if(s){let q=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(q)}}},[s]);let P=()=>{o(!0)},U=()=>{o(!1),d(!1)};return n?r!=="intent"?[c,S,{}]:[c,S,{onFocus:Xl(m,P),onBlur:Xl(p,U),onMouseEnter:Xl(y,P),onMouseLeave:Xl(T,U),onTouchStart:Xl(A,P)}]:[!1,S,{}]}function Xl(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function NR({page:r,...e}){let{router:n}=QE(),s=k.useMemo(()=>UE(n.routes,r,n.basename),[n.routes,r,n.basename]);return s?k.createElement(DR,{page:r,matches:s,...e}):null}function CR(r){let{manifest:e,routeModules:n}=YE(),[s,o]=k.useState([]);return k.useEffect(()=>{let c=!1;return TR(r,e,n).then(d=>{c||o(d)}),()=>{c=!0}},[r,e,n]),s}function DR({page:r,matches:e,...n}){let s=Vs(),{manifest:o,routeModules:c}=YE(),{basename:d}=QE(),{loaderData:m,matches:p}=IR(),y=k.useMemo(()=>Zv(r,e,p,o,s,"data"),[r,e,p,o,s]),T=k.useMemo(()=>Zv(r,e,p,o,s,"assets"),[r,e,p,o,s]),A=k.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let U=new Set,q=!1;if(e.forEach(Y=>{var W;let ae=o.routes[Y.route.id];!ae||!ae.hasLoader||(!y.some(de=>de.route.id===Y.route.id)&&Y.route.id in m&&((W=c[Y.route.id])!=null&&W.shouldRevalidate)||ae.hasClientLoader?q=!0:U.add(Y.route.id))}),U.size===0)return[];let z=RR(r,d);return q&&U.size>0&&z.searchParams.set("_routes",e.filter(Y=>U.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[z.pathname+z.search]},[d,m,s,o,y,e,r,c]),S=k.useMemo(()=>bR(T,o),[T,o]),P=CR(T);return k.createElement(k.Fragment,null,A.map(U=>k.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...n})),S.map(U=>k.createElement("link",{key:U,rel:"modulepreload",href:U,...n})),P.map(({key:U,link:q})=>k.createElement("link",{key:U,...q})))}function OR(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var XE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{XE&&(window.__reactRouterVersion="7.5.0")}catch{}function kR({basename:r,children:e,window:n}){let s=k.useRef();s.current==null&&(s.current=TS({window:n,v5Compat:!0}));let o=s.current,[c,d]=k.useState({action:o.action,location:o.location}),m=k.useCallback(p=>{k.startTransition(()=>d(p))},[d]);return k.useLayoutEffect(()=>o.listen(m),[o,m]),k.createElement(cR,{basename:r,children:e,location:c.location,navigationType:c.action,navigator:o})}var WE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gt=k.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:c,replace:d,state:m,target:p,to:y,preventScrollReset:T,viewTransition:A,...S},P){let{basename:U}=k.useContext(Oi),q=typeof y=="string"&&WE.test(y),z,Y=!1;if(typeof y=="string"&&q&&(z=y,XE))try{let I=new URL(window.location.href),O=y.startsWith("//")?new URL(I.protocol+y):new URL(y),M=Br(O.pathname,U);O.origin===I.origin&&M!=null?y=M+O.search+O.hash:Y=!0}catch{Ni(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ae=KS(y,{relative:o}),[W,de,ce]=xR(s,S),le=jR(y,{replace:d,state:m,target:p,preventScrollReset:T,relative:o,viewTransition:A});function x(I){e&&e(I),I.defaultPrevented||le(I)}let R=k.createElement("a",{...S,...ce,href:z||ae,onClick:Y||c?e:x,ref:OR(P,de),target:p,"data-discover":!q&&n==="render"?"true":void 0});return W&&!q?k.createElement(k.Fragment,null,R,k.createElement(NR,{page:ae})):R});Gt.displayName="Link";var PR=k.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:c,to:d,viewTransition:m,children:p,...y},T){let A=Ac(d,{relative:y.relative}),S=Vs(),P=k.useContext(Xh),{navigator:U,basename:q}=k.useContext(Oi),z=P!=null&&qR(A)&&m===!0,Y=U.encodeLocation?U.encodeLocation(A).pathname:A.pathname,ae=S.pathname,W=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;n||(ae=ae.toLowerCase(),W=W?W.toLowerCase():null,Y=Y.toLowerCase()),W&&q&&(W=Br(W,q)||W);const de=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let ce=ae===Y||!o&&ae.startsWith(Y)&&ae.charAt(de)==="/",le=W!=null&&(W===Y||!o&&W.startsWith(Y)&&W.charAt(Y.length)==="/"),x={isActive:ce,isPending:le,isTransitioning:z},R=ce?e:void 0,I;typeof s=="function"?I=s(x):I=[s,ce?"active":null,le?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let O=typeof c=="function"?c(x):c;return k.createElement(Gt,{...y,"aria-current":R,className:I,ref:T,style:O,to:d,viewTransition:m},typeof p=="function"?p(x):p)});PR.displayName="NavLink";var MR=k.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:c,method:d=fh,action:m,onSubmit:p,relative:y,preventScrollReset:T,viewTransition:A,...S},P)=>{let U=zR(),q=BR(m,{relative:y}),z=d.toLowerCase()==="get"?"get":"post",Y=typeof m=="string"&&WE.test(m),ae=W=>{if(p&&p(W),W.defaultPrevented)return;W.preventDefault();let de=W.nativeEvent.submitter,ce=(de==null?void 0:de.getAttribute("formmethod"))||d;U(de||W.currentTarget,{fetcherKey:e,method:ce,navigate:n,replace:o,state:c,relative:y,preventScrollReset:T,viewTransition:A})};return k.createElement("form",{ref:P,method:z,action:q,onSubmit:s?p:ae,...S,"data-discover":!Y&&r==="render"?"true":void 0})});MR.displayName="Form";function VR(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZE(r){let e=k.useContext(Uo);return Mt(e,VR(r)),e}function jR(r,{target:e,replace:n,state:s,preventScrollReset:o,relative:c,viewTransition:d}={}){let m=or(),p=Vs(),y=Ac(r,{relative:c});return k.useCallback(T=>{if(pR(T,e)){T.preventDefault();let A=n!==void 0?n:uc(p)===uc(y);m(r,{replace:A,state:s,preventScrollReset:o,relative:c,viewTransition:d})}},[p,m,y,n,s,e,r,o,c,d])}var UR=0,LR=()=>`__${String(++UR)}__`;function zR(){let{router:r}=ZE("useSubmit"),{basename:e}=k.useContext(Oi),n=sR();return k.useCallback(async(s,o={})=>{let{action:c,method:d,encType:m,formData:p,body:y}=_R(s,e);if(o.navigate===!1){let T=o.fetcherKey||LR();await r.fetch(T,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||d,formEncType:o.encType||m,flushSync:o.flushSync})}else await r.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||d,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,n])}function BR(r,{relative:e}={}){let{basename:n}=k.useContext(Oi),s=k.useContext(ki);Mt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),c={...Ac(r||".",{relative:e})},d=Vs();if(r==null){c.search=d.search;let m=new URLSearchParams(c.search),p=m.getAll("index");if(p.some(T=>T==="")){m.delete("index"),p.filter(A=>A).forEach(A=>m.append("index",A));let T=m.toString();c.search=T?`?${T}`:""}}return(!r||r===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:jr([n,c.pathname])),uc(c)}function qR(r,e={}){let n=k.useContext(qE);Mt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=ZE("useViewTransitionState"),o=Ac(r,{relative:e.relative});if(!n.isTransitioning)return!1;let c=Br(n.currentLocation.pathname,s)||n.currentLocation.pathname,d=Br(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Rh(o.pathname,d)!=null||Rh(o.pathname,c)!=null}new TextEncoder;const HR=()=>{};var Jv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},FR=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[n++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[n++],d=r[n++],m=r[n++],p=((o&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const c=r[n++],d=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},eT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const c=r[o],d=o+1<r.length,m=d?r[o+1]:0,p=o+2<r.length,y=p?r[o+2]:0,T=c>>2,A=(c&3)<<4|m>>4;let S=(m&15)<<2|y>>6,P=y&63;p||(P=64,d||(S=64)),s.push(n[T],n[A],n[S],n[P])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(JE(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):FR(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const c=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const y=o<r.length?n[r.charAt(o)]:64;++o;const A=o<r.length?n[r.charAt(o)]:64;if(++o,c==null||m==null||y==null||A==null)throw new GR;const S=c<<2|m>>4;if(s.push(S),y!==64){const P=m<<4&240|y>>2;if(s.push(P),A!==64){const U=y<<6&192|A;s.push(U)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class GR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $R=function(r){const e=JE(r);return eT.encodeByteArray(e,!0)},Ih=function(r){return $R(r).replace(/\./g,"")},tT=function(r){try{return eT.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=()=>KR().__FIREBASE_DEFAULTS__,YR=()=>{if(typeof process>"u"||typeof Jv>"u")return;const r=Jv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},XR=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&tT(r[1]);return e&&JSON.parse(e)},Zh=()=>{try{return HR()||QR()||YR()||XR()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},nT=r=>{var e,n;return(n=(e=Zh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},iT=r=>{const e=nT(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},rT=()=>{var r;return(r=Zh())===null||r===void 0?void 0:r.config},sT=r=>{var e;return(e=Zh())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Ih(JSON.stringify(n)),Ih(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dn())}function JR(){var r;const e=(r=Zh())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function e1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function t1(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function n1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function i1(){const r=Dn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function r1(){return!JR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function s1(){try{return typeof indexedDB=="object"}catch{return!1}}function a1(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="FirebaseError";class lr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=o1,Object.setPrototypeOf(this,lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sc.prototype.create)}}class Sc{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?l1(c,s):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new lr(o,m,s)}}function l1(r,e){return r.replace(c1,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const c1=/\{\$([^}]+)}/g;function u1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ba(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const c=r[o],d=e[o];if(e0(c)&&e0(d)){if(!ba(c,d))return!1}else if(c!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function e0(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Wl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,c]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function Zl(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function h1(r,e){const n=new d1(r,e);return n.subscribe.bind(n)}class d1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");f1(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Dm),o.error===void 0&&(o.error=Dm),o.complete===void 0&&(o.complete=Dm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function f1(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Dm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(r){return r&&r._delegate?r._delegate:r}class Ns{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new WR;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(g1(e))try{this.getOrInitializeService({instanceIdentifier:va})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=va){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=va){return this.instances.has(e)}getOptions(e=va){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&d.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),c=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(o,c);const d=this.instances.get(o);return d&&e(d,o),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:p1(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=va){return this.component?this.component.multipleInstances?e:va:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function p1(r){return r===va?void 0:r}function g1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new m1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(nt||(nt={}));const _1={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},v1=nt.INFO,E1={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},T1=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=E1[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Np{constructor(e){this.name=e,this._logLevel=v1,this._logHandler=T1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const b1=(r,e)=>e.some(n=>r instanceof n);let t0,n0;function w1(){return t0||(t0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function A1(){return n0||(n0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oT=new WeakMap,$m=new WeakMap,lT=new WeakMap,Om=new WeakMap,Cp=new WeakMap;function S1(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{n(Ss(r.result)),o()},d=()=>{s(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&oT.set(n,r)}).catch(()=>{}),Cp.set(e,r),e}function R1(r){if($m.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});$m.set(r,e)}let Km={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return $m.get(r);if(e==="objectStoreNames")return r.objectStoreNames||lT.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ss(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function I1(r){Km=r(Km)}function x1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(km(this),e,...n);return lT.set(s,e.sort?e.sort():[e]),Ss(s)}:A1().includes(r)?function(...e){return r.apply(km(this),e),Ss(oT.get(this))}:function(...e){return Ss(r.apply(km(this),e))}}function N1(r){return typeof r=="function"?x1(r):(r instanceof IDBTransaction&&R1(r),b1(r,w1())?new Proxy(r,Km):r)}function Ss(r){if(r instanceof IDBRequest)return S1(r);if(Om.has(r))return Om.get(r);const e=N1(r);return e!==r&&(Om.set(r,e),Cp.set(e,r)),e}const km=r=>Cp.get(r);function C1(r,e,{blocked:n,upgrade:s,blocking:o,terminated:c}={}){const d=indexedDB.open(r,e),m=Ss(d);return s&&d.addEventListener("upgradeneeded",p=>{s(Ss(d.result),p.oldVersion,p.newVersion,Ss(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{c&&p.addEventListener("close",()=>c()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const D1=["get","getKey","getAll","getAllKeys","count"],O1=["put","add","delete","clear"],Pm=new Map;function i0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Pm.get(e))return Pm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=O1.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||D1.includes(n)))return;const c=async function(d,...m){const p=this.transaction(d,o?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&p.done]))[0]};return Pm.set(e,c),c}I1(r=>({...r,get:(e,n,s)=>i0(e,n)||r.get(e,n,s),has:(e,n)=>!!i0(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(P1(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function P1(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qm="@firebase/app",r0="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr=new Np("@firebase/app"),M1="@firebase/app-compat",V1="@firebase/analytics-compat",j1="@firebase/analytics",U1="@firebase/app-check-compat",L1="@firebase/app-check",z1="@firebase/auth",B1="@firebase/auth-compat",q1="@firebase/database",H1="@firebase/data-connect",F1="@firebase/database-compat",G1="@firebase/functions",$1="@firebase/functions-compat",K1="@firebase/installations",Q1="@firebase/installations-compat",Y1="@firebase/messaging",X1="@firebase/messaging-compat",W1="@firebase/performance",Z1="@firebase/performance-compat",J1="@firebase/remote-config",eI="@firebase/remote-config-compat",tI="@firebase/storage",nI="@firebase/storage-compat",iI="@firebase/firestore",rI="@firebase/vertexai",sI="@firebase/firestore-compat",aI="firebase",oI="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="[DEFAULT]",lI={[Qm]:"fire-core",[M1]:"fire-core-compat",[j1]:"fire-analytics",[V1]:"fire-analytics-compat",[L1]:"fire-app-check",[U1]:"fire-app-check-compat",[z1]:"fire-auth",[B1]:"fire-auth-compat",[q1]:"fire-rtdb",[H1]:"fire-data-connect",[F1]:"fire-rtdb-compat",[G1]:"fire-fn",[$1]:"fire-fn-compat",[K1]:"fire-iid",[Q1]:"fire-iid-compat",[Y1]:"fire-fcm",[X1]:"fire-fcm-compat",[W1]:"fire-perf",[Z1]:"fire-perf-compat",[J1]:"fire-rc",[eI]:"fire-rc-compat",[tI]:"fire-gcs",[nI]:"fire-gcs-compat",[iI]:"fire-fst",[sI]:"fire-fst-compat",[rI]:"fire-vertex","fire-js":"fire-js",[aI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh=new Map,cI=new Map,Xm=new Map;function s0(r,e){try{r.container.addComponent(e)}catch(n){qr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function wa(r){const e=r.name;if(Xm.has(e))return qr.debug(`There were multiple attempts to register component ${e}.`),!1;Xm.set(e,r);for(const n of xh.values())s0(n,r);for(const n of cI.values())s0(n,r);return!0}function Jh(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function ei(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rs=new Sc("app","Firebase",uI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ns("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa=oI;function cT(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Ym,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw Rs.create("bad-app-name",{appName:String(o)});if(n||(n=rT()),!n)throw Rs.create("no-options");const c=xh.get(o);if(c){if(ba(n,c.options)&&ba(s,c.config))return c;throw Rs.create("duplicate-app",{appName:o})}const d=new y1(o);for(const p of Xm.values())d.addComponent(p);const m=new hI(n,s,d);return xh.set(o,m),m}function Dp(r=Ym){const e=xh.get(r);if(!e&&r===Ym&&rT())return cT();if(!e)throw Rs.create("no-app",{appName:r});return e}function Ji(r,e,n){var s;let o=(s=lI[r])!==null&&s!==void 0?s:r;n&&(o+=`-${n}`);const c=o.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const m=[`Unable to register library "${o}" with version "${e}":`];c&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&d&&m.push("and"),d&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qr.warn(m.join(" "));return}wa(new Ns(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI="firebase-heartbeat-database",fI=1,hc="firebase-heartbeat-store";let Mm=null;function uT(){return Mm||(Mm=C1(dI,fI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(hc)}catch(n){console.warn(n)}}}}).catch(r=>{throw Rs.create("idb-open",{originalErrorMessage:r.message})})),Mm}async function mI(r){try{const n=(await uT()).transaction(hc),s=await n.objectStore(hc).get(hT(r));return await n.done,s}catch(e){if(e instanceof lr)qr.warn(e.message);else{const n=Rs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qr.warn(n.message)}}}async function a0(r,e){try{const s=(await uT()).transaction(hc,"readwrite");await s.objectStore(hc).put(e,hT(r)),await s.done}catch(n){if(n instanceof lr)qr.warn(n.message);else{const s=Rs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});qr.warn(s.message)}}}function hT(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=1024,gI=30;class yI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vI(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=o0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>gI){const d=EI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){qr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=o0(),{heartbeatsToSend:s,unsentEntries:o}=_I(this._heartbeatsCache.heartbeats),c=Ih(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return qr.warn(n),""}}}function o0(){return new Date().toISOString().substring(0,10)}function _I(r,e=pI){const n=[];let s=r.slice();for(const o of r){const c=n.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),l0(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),l0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class vI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return s1()?a1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await mI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return a0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return a0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function l0(r){return Ih(JSON.stringify({version:2,heartbeats:r})).length}function EI(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(r){wa(new Ns("platform-logger",e=>new k1(e),"PRIVATE")),wa(new Ns("heartbeat",e=>new yI(e),"PRIVATE")),Ji(Qm,r0,r),Ji(Qm,r0,"esm2017"),Ji("fire-js","")}TI("");function Op(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(n[s[o]]=r[s[o]]);return n}function dT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bI=dT,fT=new Sc("auth","Firebase",dT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh=new Np("@firebase/auth");function wI(r,...e){Nh.logLevel<=nt.WARN&&Nh.warn(`Auth (${xa}): ${r}`,...e)}function ph(r,...e){Nh.logLevel<=nt.ERROR&&Nh.error(`Auth (${xa}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(r,...e){throw kp(r,...e)}function er(r,...e){return kp(r,...e)}function mT(r,e,n){const s=Object.assign(Object.assign({},bI()),{[e]:n});return new Sc("auth","Firebase",s).create(e,{appName:r.name})}function Ur(r){return mT(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kp(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return fT.create(r,...e)}function Me(r,e,...n){if(!r)throw kp(e,...n)}function Mr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw ph(e),new Error(e)}function Hr(r,e){r||Mr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function AI(){return c0()==="http:"||c0()==="https:"}function c0(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AI()||t1()||"connection"in navigator)?navigator.onLine:!0}function RI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hr(n>e,"Short delay should be less than long delay!"),this.isMobile=ZR()||n1()}get(){return SI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(r,e){Hr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],NI=new Ic(3e4,6e4);function js(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Us(r,e,n,s,o={}){return gT(r,o,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const m=Rc(Object.assign({key:r.config.apiKey},d)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y=Object.assign({method:e,headers:p},c);return e1()||(y.referrerPolicy="no-referrer"),pT.fetch()(await yT(r,r.config.apiHost,n,m),y)})}async function gT(r,e,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},II),e);try{const o=new DI(r),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw ah(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const m=c.ok?d.errorMessage:d.error.message,[p,y]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ah(r,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw ah(r,"email-already-in-use",d);if(p==="USER_DISABLED")throw ah(r,"user-disabled",d);const T=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw mT(r,T,y);Ci(r,T)}}catch(o){if(o instanceof lr)throw o;Ci(r,"network-request-failed",{message:String(o)})}}async function xc(r,e,n,s,o={}){const c=await Us(r,e,n,s,o);return"mfaPendingCredential"in c&&Ci(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function yT(r,e,n,s){const o=`${e}${n}?${s}`,c=r,d=c.config.emulator?Pp(r.config,o):`${r.config.apiScheme}://${o}`;return xI.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function CI(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class DI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(er(this.auth,"network-request-failed")),NI.get())})}}function ah(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=er(r,e,s);return o.customData._tokenResponse=n,o}function u0(r){return r!==void 0&&r.enterprise!==void 0}class OI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return CI(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kI(r,e){return Us(r,"GET","/v2/recaptchaConfig",js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PI(r,e){return Us(r,"POST","/v1/accounts:delete",e)}async function Ch(r,e){return Us(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function MI(r,e=!1){const n=Zt(r),s=await n.getIdToken(e),o=Mp(s);Me(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:o,token:s,authTime:ic(Vm(o.auth_time)),issuedAtTime:ic(Vm(o.iat)),expirationTime:ic(Vm(o.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Vm(r){return Number(r)*1e3}function Mp(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return ph("JWT malformed, contained fewer than 3 sections"),null;try{const o=tT(n);return o?JSON.parse(o):(ph("Failed to decode base64 JWT payload"),null)}catch(o){return ph("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function h0(r){const e=Mp(r);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dc(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof lr&&VI(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function VI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ic(this.lastLoginAt),this.creationTime=ic(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dh(r){var e;const n=r.auth,s=await r.getIdToken(),o=await dc(r,Ch(n,{idToken:s}));Me(o==null?void 0:o.users.length,n,"internal-error");const c=o.users[0];r._notifyReloadListener(c);const d=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?_T(c.providerUserInfo):[],m=LI(r.providerData,d),p=r.isAnonymous,y=!(r.email&&c.passwordHash)&&!(m!=null&&m.length),T=p?y:!1,A={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:m,metadata:new Zm(c.createdAt,c.lastLoginAt),isAnonymous:T};Object.assign(r,A)}async function UI(r){const e=Zt(r);await Dh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LI(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function _T(r){return r.map(e=>{var{providerId:n}=e,s=Op(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zI(r,e){const n=await gT(r,{},async()=>{const s=Rc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=r.config,d=await yT(r,o,"/v1/token",`key=${c}`),m=await r._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",pT.fetch()(d,{method:"POST",headers:m,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function BI(r,e){return Us(r,"POST","/v2/accounts:revokeToken",js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):h0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const n=h0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:c}=await zI(e,n);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:c}=n,d=new Ro;return s&&(Me(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(Me(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(Me(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ro,this.toJSON())}_performRefresh(){return Mr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(r,e){Me(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Ii{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,c=Op(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Zm(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const n=await dc(this,this.stsTokenManager.getToken(this.auth,e));return Me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return MI(this,e)}reload(){return UI(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ii(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Dh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ei(this.auth.app))return Promise.reject(Ur(this.auth));const e=await this.getIdToken();return await dc(this,PI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,c,d,m,p,y,T;const A=(s=n.displayName)!==null&&s!==void 0?s:void 0,S=(o=n.email)!==null&&o!==void 0?o:void 0,P=(c=n.phoneNumber)!==null&&c!==void 0?c:void 0,U=(d=n.photoURL)!==null&&d!==void 0?d:void 0,q=(m=n.tenantId)!==null&&m!==void 0?m:void 0,z=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,Y=(y=n.createdAt)!==null&&y!==void 0?y:void 0,ae=(T=n.lastLoginAt)!==null&&T!==void 0?T:void 0,{uid:W,emailVerified:de,isAnonymous:ce,providerData:le,stsTokenManager:x}=n;Me(W&&x,e,"internal-error");const R=Ro.fromJSON(this.name,x);Me(typeof W=="string",e,"internal-error"),vs(A,e.name),vs(S,e.name),Me(typeof de=="boolean",e,"internal-error"),Me(typeof ce=="boolean",e,"internal-error"),vs(P,e.name),vs(U,e.name),vs(q,e.name),vs(z,e.name),vs(Y,e.name),vs(ae,e.name);const I=new Ii({uid:W,auth:e,email:S,emailVerified:de,displayName:A,isAnonymous:ce,photoURL:U,phoneNumber:P,tenantId:q,stsTokenManager:R,createdAt:Y,lastLoginAt:ae});return le&&Array.isArray(le)&&(I.providerData=le.map(O=>Object.assign({},O))),z&&(I._redirectEventId=z),I}static async _fromIdTokenResponse(e,n,s=!1){const o=new Ro;o.updateFromServerResponse(n);const c=new Ii({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Dh(c),c}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Me(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?_T(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),m=new Ro;m.updateFromIdToken(s);const p=new Ii({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Zm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0=new Map;function Vr(r){Hr(r instanceof Function,"Expected a class definition");let e=d0.get(r);return e?(Hr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,d0.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}vT.type="NONE";const f0=vT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(r,e,n){return`firebase:${r}:${e}:${n}`}class Io{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=gh(this.userKey,o.apiKey,c),this.fullPersistenceKey=gh("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ch(this.auth,{idToken:e}).catch(()=>{});return n?Ii._fromGetAccountInfoResponse(this.auth,n,e):null}return Ii._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Io(Vr(f0),e,s);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||Vr(f0);const d=gh(s,e.config.apiKey,e.name);let m=null;for(const y of n)try{const T=await y._get(d);if(T){let A;if(typeof T=="string"){const S=await Ch(e,{idToken:T}).catch(()=>{});if(!S)break;A=await Ii._fromGetAccountInfoResponse(e,S,T)}else A=Ii._fromJSON(e,T);y!==c&&(m=A),c=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new Io(c,e,s):(c=p[0],m&&await c._set(d,m.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new Io(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ET(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ST(e))return"Blackberry";if(RT(e))return"Webos";if(TT(e))return"Safari";if((e.includes("chrome/")||bT(e))&&!e.includes("edge/"))return"Chrome";if(AT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function ET(r=Dn()){return/firefox\//i.test(r)}function TT(r=Dn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bT(r=Dn()){return/crios\//i.test(r)}function wT(r=Dn()){return/iemobile/i.test(r)}function AT(r=Dn()){return/android/i.test(r)}function ST(r=Dn()){return/blackberry/i.test(r)}function RT(r=Dn()){return/webos/i.test(r)}function Vp(r=Dn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function qI(r=Dn()){var e;return Vp(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function HI(){return i1()&&document.documentMode===10}function IT(r=Dn()){return Vp(r)||AT(r)||RT(r)||ST(r)||/windows phone/i.test(r)||wT(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(r,e=[]){let n;switch(r){case"Browser":n=m0(Dn());break;case"Worker":n=`${m0(Dn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xa}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((d,m)=>{try{const p=e(c);d(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GI(r,e={}){return Us(r,"GET","/v2/passwordPolicy",js(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=6;class KI{constructor(e){var n,s,o,c;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:$I,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,c,d,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(c=p.containsUppercaseLetter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNumericCharacter)!==null&&d!==void 0?d:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new p0(this),this.idTokenSubscription=new p0(this),this.beforeStateQueue=new FI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Vr(n)),this._initializationPromise=this.queue(async()=>{var s,o,c;if(!this._deleted&&(this.persistenceManager=await Io.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ch(this,{idToken:e}),s=await Ii._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ei(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!d||d===m)&&(p!=null&&p.user)&&(o=p.user,c=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Dh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ei(this.app))return Promise.reject(Ur(this));const n=e?Zt(e):null;return n&&Me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ei(this.app)?Promise.reject(Ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ei(this.app)?Promise.reject(Ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GI(this),n=new KI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Sc("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await BI(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Vr(e)||this._popupRedirectResolver;Me(n,this,"argument-error"),this.redirectPersistenceManager=await Io.create(this,[Vr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(m,this,"internal-error"),m.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{d=!0,p()}}else{const p=e.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&wI(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Na(r){return Zt(r)}class p0{constructor(e){this.auth=e,this.observer=null,this.addObserver=h1(n=>this.observer=n)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ed={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YI(r){ed=r}function NT(r){return ed.loadJS(r)}function XI(){return ed.recaptchaEnterpriseScript}function WI(){return ed.gapiScript}function ZI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class JI{constructor(){this.enterprise=new ex}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class ex{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const tx="recaptcha-enterprise",CT="NO_RECAPTCHA";class nx{constructor(e){this.type=tx,this.auth=Na(e)}async verify(e="verify",n=!1){async function s(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,m)=>{kI(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new OI(p);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,d(y.siteKey)}}).catch(p=>{m(p)})})}function o(c,d,m){const p=window.grecaptcha;u0(p)?p.enterprise.ready(()=>{p.enterprise.execute(c,{action:e}).then(y=>{d(y)}).catch(()=>{d(CT)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new JI().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(m=>{if(!n&&u0(window.grecaptcha))o(m,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let p=XI();p.length!==0&&(p+=m),NT(p).then(()=>{o(m,c,d)}).catch(y=>{d(y)})}}).catch(m=>{d(m)})})}}async function g0(r,e,n,s=!1,o=!1){const c=new nx(r);let d;if(o)d=CT;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const m=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Jm(r,e,n,s,o){var c;if(!((c=r._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await g0(r,e,n,n==="getOobCode");return s(r,d)}else return s(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await g0(r,e,n,n==="getOobCode");return s(r,m)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(r,e){const n=Jh(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(ba(c,e??{}))return o;Ci(o,"already-initialized")}return n.initialize({options:e})}function rx(r,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Vr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function sx(r,e,n){const s=Na(r);Me(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,c=DT(e),{host:d,port:m}=ax(e),p=m===null?"":`:${m}`,y={url:`${c}//${d}${p}/`},T=Object.freeze({host:d,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Me(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Me(ba(y,s.config.emulator)&&ba(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,ox()}function DT(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function ax(r){const e=DT(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:y0(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:y0(d)}}}function y0(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function ox(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Mr("not implemented")}_getIdTokenResponse(e){return Mr("not implemented")}_linkToIdToken(e,n){return Mr("not implemented")}_getReauthenticationResolver(e){return Mr("not implemented")}}async function lx(r,e){return Us(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cx(r,e){return xc(r,"POST","/v1/accounts:signInWithPassword",js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ux(r,e){return xc(r,"POST","/v1/accounts:signInWithEmailLink",js(r,e))}async function hx(r,e){return xc(r,"POST","/v1/accounts:signInWithEmailLink",js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends jp{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new fc(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new fc(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jm(e,n,"signInWithPassword",cx);case"emailLink":return ux(e,{email:this._email,oobCode:this._password});default:Ci(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jm(e,s,"signUpPassword",lx);case"emailLink":return hx(e,{idToken:n,email:this._email,oobCode:this._password});default:Ci(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(r,e){return xc(r,"POST","/v1/accounts:signInWithIdp",js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx="http://localhost";class Aa extends jp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Aa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ci("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,c=Op(n,["providerId","signInMethod"]);if(!s||!o)return null;const d=new Aa(s,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return xo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,xo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,xo(e,n)}buildRequest(){const e={requestUri:dx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Rc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mx(r){const e=Wl(Zl(r)).link,n=e?Wl(Zl(e)).deep_link_id:null,s=Wl(Zl(r)).deep_link_id;return(s?Wl(Zl(s)).link:null)||s||n||e||r}class Up{constructor(e){var n,s,o,c,d,m;const p=Wl(Zl(e)),y=(n=p.apiKey)!==null&&n!==void 0?n:null,T=(s=p.oobCode)!==null&&s!==void 0?s:null,A=fx((o=p.mode)!==null&&o!==void 0?o:null);Me(y&&T&&A,"argument-error"),this.apiKey=y,this.operation=A,this.code=T,this.continueUrl=(c=p.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(d=p.languageCode)!==null&&d!==void 0?d:null,this.tenantId=(m=p.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const n=mx(e);try{return new Up(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.providerId=zo.PROVIDER_ID}static credential(e,n){return fc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Up.parseLink(n);return Me(s,"argument-error"),fc._fromEmailAndCode(e,s.code,s.tenantId)}}zo.PROVIDER_ID="password";zo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc extends OT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends Nc{constructor(){super("facebook.com")}static credential(e){return Aa._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Es.credential(e.oauthAccessToken)}catch{return null}}}Es.FACEBOOK_SIGN_IN_METHOD="facebook.com";Es.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends Nc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Aa._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Ts.credential(n,s)}catch{return null}}}Ts.GOOGLE_SIGN_IN_METHOD="google.com";Ts.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs extends Nc{constructor(){super("github.com")}static credential(e){return Aa._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bs.credential(e.oauthAccessToken)}catch{return null}}}bs.GITHUB_SIGN_IN_METHOD="github.com";bs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws extends Nc{constructor(){super("twitter.com")}static credential(e,n){return Aa._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ws.credential(n,s)}catch{return null}}}ws.TWITTER_SIGN_IN_METHOD="twitter.com";ws.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function px(r,e){return xc(r,"POST","/v1/accounts:signUp",js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const c=await Ii._fromIdTokenResponse(e,s,o),d=_0(s);return new Sa({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=_0(s);return new Sa({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function _0(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh extends lr{constructor(e,n,s,o){var c;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Oh.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Oh(e,n,s,o)}}function kT(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Oh._fromErrorAndOperation(r,c,e,s):c})}async function gx(r,e,n=!1){const s=await dc(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Sa._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yx(r,e,n=!1){const{auth:s}=r;if(ei(s.app))return Promise.reject(Ur(s));const o="reauthenticate";try{const c=await dc(r,kT(s,o,e,r),n);Me(c.idToken,s,"internal-error");const d=Mp(c.idToken);Me(d,s,"internal-error");const{sub:m}=d;return Me(r.uid===m,s,"user-mismatch"),Sa._forOperation(r,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Ci(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PT(r,e,n=!1){if(ei(r.app))return Promise.reject(Ur(r));const s="signIn",o=await kT(r,s,e),c=await Sa._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(c.user),c}async function _x(r,e){return PT(Na(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MT(r){const e=Na(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function vx(r,e,n){if(ei(r.app))return Promise.reject(Ur(r));const s=Na(r),d=await Jm(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",px).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&MT(r),p}),m=await Sa._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(m.user),m}function Ex(r,e,n){return ei(r.app)?Promise.reject(Ur(r)):_x(Zt(r),zo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&MT(r),s})}function Tx(r,e,n,s){return Zt(r).onIdTokenChanged(e,n,s)}function bx(r,e,n){return Zt(r).beforeAuthStateChanged(e,n)}function wx(r,e,n,s){return Zt(r).onAuthStateChanged(e,n,s)}const kh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(kh,"1"),this.storage.removeItem(kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=1e3,Sx=10;class jT extends VT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,m,p)=>{this.notifyListeners(d,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);HI()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Sx):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Ax)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}jT.type="LOCAL";const Rx=jT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT extends VT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}UT.type="SESSION";const LT=UT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new td(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:c}=n.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(d).map(async y=>y(n.origin,c)),p=await Ix(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}td.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((m,p)=>{const y=Lp("",20);o.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(A){const S=A;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(S.data.response);break;default:clearTimeout(T),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(){return window}function Nx(r){tr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(){return typeof tr().WorkerGlobalScope<"u"&&typeof tr().importScripts=="function"}async function Cx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Dx(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function Ox(){return zT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="firebaseLocalStorageDb",kx=1,Ph="firebaseLocalStorage",qT="fbase_key";class Cc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function nd(r,e){return r.transaction([Ph],e?"readwrite":"readonly").objectStore(Ph)}function Px(){const r=indexedDB.deleteDatabase(BT);return new Cc(r).toPromise()}function ep(){const r=indexedDB.open(BT,kx);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Ph,{keyPath:qT})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Ph)?e(s):(s.close(),await Px(),e(await ep()))})})}async function v0(r,e,n){const s=nd(r,!0).put({[qT]:e,value:n});return new Cc(s).toPromise()}async function Mx(r,e){const n=nd(r,!1).get(e),s=await new Cc(n).toPromise();return s===void 0?null:s.value}function E0(r,e){const n=nd(r,!0).delete(e);return new Cc(n).toPromise()}const Vx=800,jx=3;class HT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ep(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>jx)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=td._getInstance(Ox()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Cx(),!this.activeServiceWorker)return;this.sender=new xx(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Dx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ep();return await v0(e,kh,"1"),await E0(e,kh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>v0(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>Mx(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>E0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=nd(o,!1).getAll();return new Cc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Vx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}HT.type="LOCAL";const Ux=HT;new Ic(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(r,e){return e?Vr(e):(Me(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp extends jp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return xo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return xo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function zx(r){return PT(r.auth,new zp(r),r.bypassAuthState)}function Bx(r){const{auth:e,user:n}=r;return Me(n,e,"internal-error"),yx(n,new zp(r),r.bypassAuthState)}async function qx(r){const{auth:e,user:n}=r;return Me(n,e,"internal-error"),gx(n,new zp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,n,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:c,error:d,type:m}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zx;case"linkViaPopup":case"linkViaRedirect":return qx;case"reauthViaPopup":case"reauthViaRedirect":return Bx;default:Ci(this.auth,"internal-error")}}resolve(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=new Ic(2e3,1e4);class So extends FT{constructor(e,n,s,o,c){super(e,n,o,c),this.provider=s,this.authWindow=null,this.pollId=null,So.currentPopupAction&&So.currentPopupAction.cancel(),So.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){Hr(this.filter.length===1,"Popup operations only handle one event");const e=Lp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,So.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Hx.get())};e()}}So.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx="pendingRedirect",yh=new Map;class Gx extends FT{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=yh.get(this.auth._key());if(!e){try{const s=await $x(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}yh.set(this.auth._key(),e)}return this.bypassAuthState||yh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $x(r,e){const n=Yx(e),s=Qx(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function Kx(r,e){yh.set(r._key(),e)}function Qx(r){return Vr(r._redirectPersistence)}function Yx(r){return gh(Fx,r.config.apiKey,r.name)}async function Xx(r,e,n=!1){if(ei(r.app))return Promise.reject(Ur(r));const s=Na(r),o=Lx(s,e),d=await new Gx(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=10*60*1e3;class Zx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Jx(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!GT(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(er(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Wx&&this.cachedEventUids.clear(),this.cachedEventUids.has(T0(e))}saveEventToCache(e){this.cachedEventUids.add(T0(e)),this.lastProcessedEventTime=Date.now()}}function T0(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function GT({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Jx(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return GT(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eN(r,e={}){return Us(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nN=/^https?/;async function iN(r){if(r.config.emulator)return;const{authorizedDomains:e}=await eN(r);for(const n of e)try{if(rN(n))return}catch{}Ci(r,"unauthorized-domain")}function rN(r){const e=Wm(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!nN.test(n))return!1;if(tN.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN=new Ic(3e4,6e4);function b0(){const r=tr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function aN(r){return new Promise((e,n)=>{var s,o,c;function d(){b0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{b0(),n(er(r,"network-request-failed"))},timeout:sN.get()})}if(!((o=(s=tr().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((c=tr().gapi)===null||c===void 0)&&c.load)d();else{const m=ZI("iframefcb");return tr()[m]=()=>{gapi.load?d():n(er(r,"network-request-failed"))},NT(`${WI()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw _h=null,e})}let _h=null;function oN(r){return _h=_h||aN(r),_h}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN=new Ic(5e3,15e3),cN="__/auth/iframe",uN="emulator/auth/iframe",hN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fN(r){const e=r.config;Me(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Pp(e,uN):`https://${r.config.authDomain}/${cN}`,s={apiKey:e.apiKey,appName:r.name,v:xa},o=dN.get(r.config.apiHost);o&&(s.eid=o);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${Rc(s).slice(1)}`}async function mN(r){const e=await oN(r),n=tr().gapi;return Me(n,r,"internal-error"),e.open({where:document.body,url:fN(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hN,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const d=er(r,"network-request-failed"),m=tr().setTimeout(()=>{c(d)},lN.get());function p(){tr().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gN=500,yN=600,_N="_blank",vN="http://localhost";class w0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EN(r,e,n,s=gN,o=yN){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p=Object.assign(Object.assign({},pN),{width:s.toString(),height:o.toString(),top:c,left:d}),y=Dn().toLowerCase();n&&(m=bT(y)?_N:n),ET(y)&&(e=e||vN,p.scrollbars="yes");const T=Object.entries(p).reduce((S,[P,U])=>`${S}${P}=${U},`,"");if(qI(y)&&m!=="_self")return TN(e||"",m),new w0(null);const A=window.open(e||"",m,T);Me(A,r,"popup-blocked");try{A.focus()}catch{}return new w0(A)}function TN(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="__/auth/handler",wN="emulator/auth/handler",AN=encodeURIComponent("fac");async function A0(r,e,n,s,o,c){Me(r.config.authDomain,r,"auth-domain-config-required"),Me(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:xa,eventId:o};if(e instanceof OT){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",u1(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,A]of Object.entries({}))d[T]=A}if(e instanceof Nc){const T=e.getScopes().filter(A=>A!=="");T.length>0&&(d.scopes=T.join(","))}r.tenantId&&(d.tid=r.tenantId);const m=d;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const p=await r._getAppCheckToken(),y=p?`#${AN}=${encodeURIComponent(p)}`:"";return`${SN(r)}?${Rc(m).slice(1)}${y}`}function SN({config:r}){return r.emulator?Pp(r,wN):`https://${r.authDomain}/${bN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="webStorageSupport";class RN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LT,this._completeRedirectFn=Xx,this._overrideRedirectResult=Kx}async _openPopup(e,n,s,o){var c;Hr((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const d=await A0(e,n,s,Wm(),o);return EN(e,d,Lp())}async _openRedirect(e,n,s,o){await this._originValidation(e);const c=await A0(e,n,s,Wm(),o);return Nx(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Hr(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await mN(e),s=new Zx(e);return n.register("authEvent",o=>(Me(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(jm,{type:jm},o=>{var c;const d=(c=o==null?void 0:o[0])===null||c===void 0?void 0:c[jm];d!==void 0&&n(!!d),Ci(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return IT()||TT()||Vp()}}const IN=RN;var S0="@firebase/auth",R0="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function CN(r){wa(new Ns("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=s.options;Me(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:d,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xT(r)},y=new QI(s,o,c,p);return rx(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),wa(new Ns("auth-internal",e=>{const n=Na(e.getProvider("auth").getImmediate());return(s=>new xN(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ji(S0,R0,NN(r)),Ji(S0,R0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=5*60,ON=sT("authIdTokenMaxAge")||DN;let I0=null;const kN=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>ON)return;const o=n==null?void 0:n.token;I0!==o&&(I0=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function $T(r=Dp()){const e=Jh(r,"auth");if(e.isInitialized())return e.getImmediate();const n=ix(r,{popupRedirectResolver:IN,persistence:[Ux,Rx,LT]}),s=sT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=kN(c.toString());bx(n,d,()=>d(n.currentUser)),Tx(n,m=>d(m))}}const o=nT("auth");return o&&sx(n,`http://${o}`),n}function PN(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}YI({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const c=er("internal-error");c.customData=o,n(c)},s.type="text/javascript",s.charset="UTF-8",PN().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});CN("Browser");var MN="firebase",VN="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ji(MN,VN,"app");var x0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Is,KT;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,R){function I(){}I.prototype=R.prototype,x.D=R.prototype,x.prototype=new I,x.prototype.constructor=x,x.C=function(O,M,L){for(var N=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)N[ge-2]=arguments[ge];return R.prototype[M].apply(O,N)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,R,I){I||(I=0);var O=Array(16);if(typeof R=="string")for(var M=0;16>M;++M)O[M]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(M=0;16>M;++M)O[M]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=x.g[0],I=x.g[1],M=x.g[2];var L=x.g[3],N=R+(L^I&(M^L))+O[0]+3614090360&4294967295;R=I+(N<<7&4294967295|N>>>25),N=L+(M^R&(I^M))+O[1]+3905402710&4294967295,L=R+(N<<12&4294967295|N>>>20),N=M+(I^L&(R^I))+O[2]+606105819&4294967295,M=L+(N<<17&4294967295|N>>>15),N=I+(R^M&(L^R))+O[3]+3250441966&4294967295,I=M+(N<<22&4294967295|N>>>10),N=R+(L^I&(M^L))+O[4]+4118548399&4294967295,R=I+(N<<7&4294967295|N>>>25),N=L+(M^R&(I^M))+O[5]+1200080426&4294967295,L=R+(N<<12&4294967295|N>>>20),N=M+(I^L&(R^I))+O[6]+2821735955&4294967295,M=L+(N<<17&4294967295|N>>>15),N=I+(R^M&(L^R))+O[7]+4249261313&4294967295,I=M+(N<<22&4294967295|N>>>10),N=R+(L^I&(M^L))+O[8]+1770035416&4294967295,R=I+(N<<7&4294967295|N>>>25),N=L+(M^R&(I^M))+O[9]+2336552879&4294967295,L=R+(N<<12&4294967295|N>>>20),N=M+(I^L&(R^I))+O[10]+4294925233&4294967295,M=L+(N<<17&4294967295|N>>>15),N=I+(R^M&(L^R))+O[11]+2304563134&4294967295,I=M+(N<<22&4294967295|N>>>10),N=R+(L^I&(M^L))+O[12]+1804603682&4294967295,R=I+(N<<7&4294967295|N>>>25),N=L+(M^R&(I^M))+O[13]+4254626195&4294967295,L=R+(N<<12&4294967295|N>>>20),N=M+(I^L&(R^I))+O[14]+2792965006&4294967295,M=L+(N<<17&4294967295|N>>>15),N=I+(R^M&(L^R))+O[15]+1236535329&4294967295,I=M+(N<<22&4294967295|N>>>10),N=R+(M^L&(I^M))+O[1]+4129170786&4294967295,R=I+(N<<5&4294967295|N>>>27),N=L+(I^M&(R^I))+O[6]+3225465664&4294967295,L=R+(N<<9&4294967295|N>>>23),N=M+(R^I&(L^R))+O[11]+643717713&4294967295,M=L+(N<<14&4294967295|N>>>18),N=I+(L^R&(M^L))+O[0]+3921069994&4294967295,I=M+(N<<20&4294967295|N>>>12),N=R+(M^L&(I^M))+O[5]+3593408605&4294967295,R=I+(N<<5&4294967295|N>>>27),N=L+(I^M&(R^I))+O[10]+38016083&4294967295,L=R+(N<<9&4294967295|N>>>23),N=M+(R^I&(L^R))+O[15]+3634488961&4294967295,M=L+(N<<14&4294967295|N>>>18),N=I+(L^R&(M^L))+O[4]+3889429448&4294967295,I=M+(N<<20&4294967295|N>>>12),N=R+(M^L&(I^M))+O[9]+568446438&4294967295,R=I+(N<<5&4294967295|N>>>27),N=L+(I^M&(R^I))+O[14]+3275163606&4294967295,L=R+(N<<9&4294967295|N>>>23),N=M+(R^I&(L^R))+O[3]+4107603335&4294967295,M=L+(N<<14&4294967295|N>>>18),N=I+(L^R&(M^L))+O[8]+1163531501&4294967295,I=M+(N<<20&4294967295|N>>>12),N=R+(M^L&(I^M))+O[13]+2850285829&4294967295,R=I+(N<<5&4294967295|N>>>27),N=L+(I^M&(R^I))+O[2]+4243563512&4294967295,L=R+(N<<9&4294967295|N>>>23),N=M+(R^I&(L^R))+O[7]+1735328473&4294967295,M=L+(N<<14&4294967295|N>>>18),N=I+(L^R&(M^L))+O[12]+2368359562&4294967295,I=M+(N<<20&4294967295|N>>>12),N=R+(I^M^L)+O[5]+4294588738&4294967295,R=I+(N<<4&4294967295|N>>>28),N=L+(R^I^M)+O[8]+2272392833&4294967295,L=R+(N<<11&4294967295|N>>>21),N=M+(L^R^I)+O[11]+1839030562&4294967295,M=L+(N<<16&4294967295|N>>>16),N=I+(M^L^R)+O[14]+4259657740&4294967295,I=M+(N<<23&4294967295|N>>>9),N=R+(I^M^L)+O[1]+2763975236&4294967295,R=I+(N<<4&4294967295|N>>>28),N=L+(R^I^M)+O[4]+1272893353&4294967295,L=R+(N<<11&4294967295|N>>>21),N=M+(L^R^I)+O[7]+4139469664&4294967295,M=L+(N<<16&4294967295|N>>>16),N=I+(M^L^R)+O[10]+3200236656&4294967295,I=M+(N<<23&4294967295|N>>>9),N=R+(I^M^L)+O[13]+681279174&4294967295,R=I+(N<<4&4294967295|N>>>28),N=L+(R^I^M)+O[0]+3936430074&4294967295,L=R+(N<<11&4294967295|N>>>21),N=M+(L^R^I)+O[3]+3572445317&4294967295,M=L+(N<<16&4294967295|N>>>16),N=I+(M^L^R)+O[6]+76029189&4294967295,I=M+(N<<23&4294967295|N>>>9),N=R+(I^M^L)+O[9]+3654602809&4294967295,R=I+(N<<4&4294967295|N>>>28),N=L+(R^I^M)+O[12]+3873151461&4294967295,L=R+(N<<11&4294967295|N>>>21),N=M+(L^R^I)+O[15]+530742520&4294967295,M=L+(N<<16&4294967295|N>>>16),N=I+(M^L^R)+O[2]+3299628645&4294967295,I=M+(N<<23&4294967295|N>>>9),N=R+(M^(I|~L))+O[0]+4096336452&4294967295,R=I+(N<<6&4294967295|N>>>26),N=L+(I^(R|~M))+O[7]+1126891415&4294967295,L=R+(N<<10&4294967295|N>>>22),N=M+(R^(L|~I))+O[14]+2878612391&4294967295,M=L+(N<<15&4294967295|N>>>17),N=I+(L^(M|~R))+O[5]+4237533241&4294967295,I=M+(N<<21&4294967295|N>>>11),N=R+(M^(I|~L))+O[12]+1700485571&4294967295,R=I+(N<<6&4294967295|N>>>26),N=L+(I^(R|~M))+O[3]+2399980690&4294967295,L=R+(N<<10&4294967295|N>>>22),N=M+(R^(L|~I))+O[10]+4293915773&4294967295,M=L+(N<<15&4294967295|N>>>17),N=I+(L^(M|~R))+O[1]+2240044497&4294967295,I=M+(N<<21&4294967295|N>>>11),N=R+(M^(I|~L))+O[8]+1873313359&4294967295,R=I+(N<<6&4294967295|N>>>26),N=L+(I^(R|~M))+O[15]+4264355552&4294967295,L=R+(N<<10&4294967295|N>>>22),N=M+(R^(L|~I))+O[6]+2734768916&4294967295,M=L+(N<<15&4294967295|N>>>17),N=I+(L^(M|~R))+O[13]+1309151649&4294967295,I=M+(N<<21&4294967295|N>>>11),N=R+(M^(I|~L))+O[4]+4149444226&4294967295,R=I+(N<<6&4294967295|N>>>26),N=L+(I^(R|~M))+O[11]+3174756917&4294967295,L=R+(N<<10&4294967295|N>>>22),N=M+(R^(L|~I))+O[2]+718787259&4294967295,M=L+(N<<15&4294967295|N>>>17),N=I+(L^(M|~R))+O[9]+3951481745&4294967295,x.g[0]=x.g[0]+R&4294967295,x.g[1]=x.g[1]+(M+(N<<21&4294967295|N>>>11))&4294967295,x.g[2]=x.g[2]+M&4294967295,x.g[3]=x.g[3]+L&4294967295}s.prototype.u=function(x,R){R===void 0&&(R=x.length);for(var I=R-this.blockSize,O=this.B,M=this.h,L=0;L<R;){if(M==0)for(;L<=I;)o(this,x,L),L+=this.blockSize;if(typeof x=="string"){for(;L<R;)if(O[M++]=x.charCodeAt(L++),M==this.blockSize){o(this,O),M=0;break}}else for(;L<R;)if(O[M++]=x[L++],M==this.blockSize){o(this,O),M=0;break}}this.h=M,this.o+=R},s.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var R=1;R<x.length-8;++R)x[R]=0;var I=8*this.o;for(R=x.length-8;R<x.length;++R)x[R]=I&255,I/=256;for(this.u(x),x=Array(16),R=I=0;4>R;++R)for(var O=0;32>O;O+=8)x[I++]=this.g[R]>>>O&255;return x};function c(x,R){var I=m;return Object.prototype.hasOwnProperty.call(I,x)?I[x]:I[x]=R(x)}function d(x,R){this.h=R;for(var I=[],O=!0,M=x.length-1;0<=M;M--){var L=x[M]|0;O&&L==R||(I[M]=L,O=!1)}this.g=I}var m={};function p(x){return-128<=x&&128>x?c(x,function(R){return new d([R|0],0>R?-1:0)}):new d([x|0],0>x?-1:0)}function y(x){if(isNaN(x)||!isFinite(x))return A;if(0>x)return z(y(-x));for(var R=[],I=1,O=0;x>=I;O++)R[O]=x/I|0,I*=4294967296;return new d(R,0)}function T(x,R){if(x.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(x.charAt(0)=="-")return z(T(x.substring(1),R));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=y(Math.pow(R,8)),O=A,M=0;M<x.length;M+=8){var L=Math.min(8,x.length-M),N=parseInt(x.substring(M,M+L),R);8>L?(L=y(Math.pow(R,L)),O=O.j(L).add(y(N))):(O=O.j(I),O=O.add(y(N)))}return O}var A=p(0),S=p(1),P=p(16777216);r=d.prototype,r.m=function(){if(q(this))return-z(this).m();for(var x=0,R=1,I=0;I<this.g.length;I++){var O=this.i(I);x+=(0<=O?O:4294967296+O)*R,R*=4294967296}return x},r.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(U(this))return"0";if(q(this))return"-"+z(this).toString(x);for(var R=y(Math.pow(x,6)),I=this,O="";;){var M=de(I,R).g;I=Y(I,M.j(R));var L=((0<I.g.length?I.g[0]:I.h)>>>0).toString(x);if(I=M,U(I))return L+O;for(;6>L.length;)L="0"+L;O=L+O}},r.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function U(x){if(x.h!=0)return!1;for(var R=0;R<x.g.length;R++)if(x.g[R]!=0)return!1;return!0}function q(x){return x.h==-1}r.l=function(x){return x=Y(this,x),q(x)?-1:U(x)?0:1};function z(x){for(var R=x.g.length,I=[],O=0;O<R;O++)I[O]=~x.g[O];return new d(I,~x.h).add(S)}r.abs=function(){return q(this)?z(this):this},r.add=function(x){for(var R=Math.max(this.g.length,x.g.length),I=[],O=0,M=0;M<=R;M++){var L=O+(this.i(M)&65535)+(x.i(M)&65535),N=(L>>>16)+(this.i(M)>>>16)+(x.i(M)>>>16);O=N>>>16,L&=65535,N&=65535,I[M]=N<<16|L}return new d(I,I[I.length-1]&-2147483648?-1:0)};function Y(x,R){return x.add(z(R))}r.j=function(x){if(U(this)||U(x))return A;if(q(this))return q(x)?z(this).j(z(x)):z(z(this).j(x));if(q(x))return z(this.j(z(x)));if(0>this.l(P)&&0>x.l(P))return y(this.m()*x.m());for(var R=this.g.length+x.g.length,I=[],O=0;O<2*R;O++)I[O]=0;for(O=0;O<this.g.length;O++)for(var M=0;M<x.g.length;M++){var L=this.i(O)>>>16,N=this.i(O)&65535,ge=x.i(M)>>>16,Oe=x.i(M)&65535;I[2*O+2*M]+=N*Oe,ae(I,2*O+2*M),I[2*O+2*M+1]+=L*Oe,ae(I,2*O+2*M+1),I[2*O+2*M+1]+=N*ge,ae(I,2*O+2*M+1),I[2*O+2*M+2]+=L*ge,ae(I,2*O+2*M+2)}for(O=0;O<R;O++)I[O]=I[2*O+1]<<16|I[2*O];for(O=R;O<2*R;O++)I[O]=0;return new d(I,0)};function ae(x,R){for(;(x[R]&65535)!=x[R];)x[R+1]+=x[R]>>>16,x[R]&=65535,R++}function W(x,R){this.g=x,this.h=R}function de(x,R){if(U(R))throw Error("division by zero");if(U(x))return new W(A,A);if(q(x))return R=de(z(x),R),new W(z(R.g),z(R.h));if(q(R))return R=de(x,z(R)),new W(z(R.g),R.h);if(30<x.g.length){if(q(x)||q(R))throw Error("slowDivide_ only works with positive integers.");for(var I=S,O=R;0>=O.l(x);)I=ce(I),O=ce(O);var M=le(I,1),L=le(O,1);for(O=le(O,2),I=le(I,2);!U(O);){var N=L.add(O);0>=N.l(x)&&(M=M.add(I),L=N),O=le(O,1),I=le(I,1)}return R=Y(x,M.j(R)),new W(M,R)}for(M=A;0<=x.l(R);){for(I=Math.max(1,Math.floor(x.m()/R.m())),O=Math.ceil(Math.log(I)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),L=y(I),N=L.j(R);q(N)||0<N.l(x);)I-=O,L=y(I),N=L.j(R);U(L)&&(L=S),M=M.add(L),x=Y(x,N)}return new W(M,x)}r.A=function(x){return de(this,x).h},r.and=function(x){for(var R=Math.max(this.g.length,x.g.length),I=[],O=0;O<R;O++)I[O]=this.i(O)&x.i(O);return new d(I,this.h&x.h)},r.or=function(x){for(var R=Math.max(this.g.length,x.g.length),I=[],O=0;O<R;O++)I[O]=this.i(O)|x.i(O);return new d(I,this.h|x.h)},r.xor=function(x){for(var R=Math.max(this.g.length,x.g.length),I=[],O=0;O<R;O++)I[O]=this.i(O)^x.i(O);return new d(I,this.h^x.h)};function ce(x){for(var R=x.g.length+1,I=[],O=0;O<R;O++)I[O]=x.i(O)<<1|x.i(O-1)>>>31;return new d(I,x.h)}function le(x,R){var I=R>>5;R%=32;for(var O=x.g.length-I,M=[],L=0;L<O;L++)M[L]=0<R?x.i(L+I)>>>R|x.i(L+I+1)<<32-R:x.i(L+I);return new d(M,x.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,KT=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=T,Is=d}).apply(typeof x0<"u"?x0:typeof self<"u"?self:typeof window<"u"?window:{});var oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var QT,Jl,YT,vh,tp,XT,WT,ZT;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,_,v){return u==Array.prototype||u==Object.prototype||(u[_]=v.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof oh=="object"&&oh];for(var _=0;_<u.length;++_){var v=u[_];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(u,_){if(_)e:{var v=s;u=u.split(".");for(var w=0;w<u.length-1;w++){var H=u[w];if(!(H in v))break e;v=v[H]}u=u[u.length-1],w=v[u],_=_(w),_!=w&&_!=null&&e(v,u,{configurable:!0,writable:!0,value:_})}}function c(u,_){u instanceof String&&(u+="");var v=0,w=!1,H={next:function(){if(!w&&v<u.length){var X=v++;return{value:_(X,u[X]),done:!1}}return w=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}o("Array.prototype.values",function(u){return u||function(){return c(this,function(_,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function p(u){var _=typeof u;return _=_!="object"?_:u?Array.isArray(u)?"array":_:"null",_=="array"||_=="object"&&typeof u.length=="number"}function y(u){var _=typeof u;return _=="object"&&u!=null||_=="function"}function T(u,_,v){return u.call.apply(u.bind,arguments)}function A(u,_,v){if(!u)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,w),u.apply(_,H)}}return function(){return u.apply(_,arguments)}}function S(u,_,v){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:A,S.apply(null,arguments)}function P(u,_){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function U(u,_){function v(){}v.prototype=_.prototype,u.aa=_.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(w,H,X){for(var me=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)me[ot-2]=arguments[ot];return _.prototype[H].apply(w,me)}}function q(u){const _=u.length;if(0<_){const v=Array(_);for(let w=0;w<_;w++)v[w]=u[w];return v}return[]}function z(u,_){for(let v=1;v<arguments.length;v++){const w=arguments[v];if(p(w)){const H=u.length||0,X=w.length||0;u.length=H+X;for(let me=0;me<X;me++)u[H+me]=w[me]}else u.push(w)}}class Y{constructor(_,v){this.i=_,this.j=v,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function ae(u){return/^[\s\xa0]*$/.test(u)}function W(){var u=m.navigator;return u&&(u=u.userAgent)?u:""}function de(u){return de[" "](u),u}de[" "]=function(){};var ce=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function le(u,_,v){for(const w in u)_.call(v,u[w],w,u)}function x(u,_){for(const v in u)_.call(void 0,u[v],v,u)}function R(u){const _={};for(const v in u)_[v]=u[v];return _}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(u,_){let v,w;for(let H=1;H<arguments.length;H++){w=arguments[H];for(v in w)u[v]=w[v];for(let X=0;X<I.length;X++)v=I[X],Object.prototype.hasOwnProperty.call(w,v)&&(u[v]=w[v])}}function M(u){var _=1;u=u.split(":");const v=[];for(;0<_&&u.length;)v.push(u.shift()),_--;return u.length&&v.push(u.join(":")),v}function L(u){m.setTimeout(()=>{throw u},0)}function N(){var u=Ye;let _=null;return u.g&&(_=u.g,u.g=u.g.next,u.g||(u.h=null),_.next=null),_}class ge{constructor(){this.h=this.g=null}add(_,v){const w=Oe.get();w.set(_,v),this.h?this.h.next=w:this.g=w,this.h=w}}var Oe=new Y(()=>new K,u=>u.reset());class K{constructor(){this.next=this.g=this.h=null}set(_,v){this.h=_,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,Ae=!1,Ye=new ge,D=()=>{const u=m.Promise.resolve(void 0);ue=()=>{u.then(ie)}};var ie=()=>{for(var u;u=N();){try{u.h.call(u.g)}catch(v){L(v)}var _=Oe;_.j(u),100>_.h&&(_.h++,u.next=_.g,_.g=u)}Ae=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(u,_){this.type=u,this.g=this.target=_,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var xe=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var u=!1,_=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};m.addEventListener("test",v,_),m.removeEventListener("test",v,_)}catch{}return u}();function Ce(u,_){if(he.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=_,_=u.relatedTarget){if(ce){e:{try{de(_.nodeName);var H=!0;break e}catch{}H=!1}H||(_=null)}}else v=="mouseover"?_=u.fromElement:v=="mouseout"&&(_=u.toElement);this.relatedTarget=_,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ke[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ce.aa.h.call(this)}}U(Ce,he);var ke={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Se="closure_listenable_"+(1e6*Math.random()|0),et=0;function Hn(u,_,v,w,H){this.listener=u,this.proxy=null,this.src=_,this.type=v,this.capture=!!w,this.ha=H,this.key=++et,this.da=this.fa=!1}function An(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Jt(u){this.src=u,this.g={},this.h=0}Jt.prototype.add=function(u,_,v,w,H){var X=u.toString();u=this.g[X],u||(u=this.g[X]=[],this.h++);var me=_i(u,_,w,H);return-1<me?(_=u[me],v||(_.fa=!1)):(_=new Hn(_,this.src,X,!!w,H),_.fa=v,u.push(_)),_};function Fn(u,_){var v=_.type;if(v in u.g){var w=u.g[v],H=Array.prototype.indexOf.call(w,_,void 0),X;(X=0<=H)&&Array.prototype.splice.call(w,H,1),X&&(An(_),u.g[v].length==0&&(delete u.g[v],u.h--))}}function _i(u,_,v,w){for(var H=0;H<u.length;++H){var X=u[H];if(!X.da&&X.listener==_&&X.capture==!!v&&X.ha==w)return H}return-1}var vi="closure_lm_"+(1e6*Math.random()|0),Pi={};function ur(u,_,v,w,H){if(Array.isArray(_)){for(var X=0;X<_.length;X++)ur(u,_[X],v,w,H);return null}return v=ri(v),u&&u[Se]?u.K(_,v,y(w)?!!w.capture:!1,H):mn(u,_,v,!1,w,H)}function mn(u,_,v,w,H,X){if(!_)throw Error("Invalid event type");var me=y(H)?!!H.capture:!!H,ot=pn(u);if(ot||(u[vi]=ot=new Jt(u)),v=ot.add(_,v,w,me,X),v.proxy)return v;if(w=Hs(),v.proxy=w,w.src=u,w.listener=v,u.addEventListener)xe||(H=me),H===void 0&&(H=!1),u.addEventListener(_.toString(),w,H);else if(u.attachEvent)u.attachEvent(Ti(_.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Hs(){function u(v){return _.call(u.src,u.listener,v)}const _=$r;return u}function Ei(u,_,v,w,H){if(Array.isArray(_))for(var X=0;X<_.length;X++)Ei(u,_[X],v,w,H);else w=y(w)?!!w.capture:!!w,v=ri(v),u&&u[Se]?(u=u.i,_=String(_).toString(),_ in u.g&&(X=u.g[_],v=_i(X,v,w,H),-1<v&&(An(X[v]),Array.prototype.splice.call(X,v,1),X.length==0&&(delete u.g[_],u.h--)))):u&&(u=pn(u))&&(_=u.g[_.toString()],u=-1,_&&(u=_i(_,v,w,H)),(v=-1<u?_[u]:null)&&Gn(v))}function Gn(u){if(typeof u!="number"&&u&&!u.da){var _=u.src;if(_&&_[Se])Fn(_.i,u);else{var v=u.type,w=u.proxy;_.removeEventListener?_.removeEventListener(v,w,u.capture):_.detachEvent?_.detachEvent(Ti(v),w):_.addListener&&_.removeListener&&_.removeListener(w),(v=pn(_))?(Fn(v,u),v.h==0&&(v.src=null,_[vi]=null)):An(u)}}}function Ti(u){return u in Pi?Pi[u]:Pi[u]="on"+u}function $r(u,_){if(u.da)u=!0;else{_=new Ce(_,this);var v=u.listener,w=u.ha||u.src;u.fa&&Gn(u),u=v.call(w,_)}return u}function pn(u){return u=u[vi],u instanceof Jt?u:null}var hr="__closure_events_fn_"+(1e9*Math.random()>>>0);function ri(u){return typeof u=="function"?u:(u[hr]||(u[hr]=function(_){return u.handleEvent(_)}),u[hr])}function yt(){fe.call(this),this.i=new Jt(this),this.M=this,this.F=null}U(yt,fe),yt.prototype[Se]=!0,yt.prototype.removeEventListener=function(u,_,v,w){Ei(this,u,_,v,w)};function oe(u,_){var v,w=u.F;if(w)for(v=[];w;w=w.F)v.push(w);if(u=u.M,w=_.type||_,typeof _=="string")_=new he(_,u);else if(_ instanceof he)_.target=_.target||u;else{var H=_;_=new he(w,u),O(_,H)}if(H=!0,v)for(var X=v.length-1;0<=X;X--){var me=_.g=v[X];H=pe(me,w,!0,_)&&H}if(me=_.g=u,H=pe(me,w,!0,_)&&H,H=pe(me,w,!1,_)&&H,v)for(X=0;X<v.length;X++)me=_.g=v[X],H=pe(me,w,!1,_)&&H}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var u=this.i,_;for(_ in u.g){for(var v=u.g[_],w=0;w<v.length;w++)An(v[w]);delete u.g[_],u.h--}}this.F=null},yt.prototype.K=function(u,_,v,w){return this.i.add(String(u),_,!1,v,w)},yt.prototype.L=function(u,_,v,w){return this.i.add(String(u),_,!0,v,w)};function pe(u,_,v,w){if(_=u.i.g[String(_)],!_)return!0;_=_.concat();for(var H=!0,X=0;X<_.length;++X){var me=_[X];if(me&&!me.da&&me.capture==v){var ot=me.listener,en=me.ha||me.src;me.fa&&Fn(u.i,me),H=ot.call(en,w)!==!1&&H}}return H&&!w.defaultPrevented}function _e(u,_,v){if(typeof u=="function")v&&(u=S(u,v));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:m.setTimeout(u,_||0)}function Ge(u){u.g=_e(()=>{u.g=null,u.i&&(u.i=!1,Ge(u))},u.l);const _=u.h;u.h=null,u.m.apply(null,_)}class Xe extends fe{constructor(_,v){super(),this.m=_,this.l=v,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ge(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rt(u){fe.call(this),this.h=u,this.g={}}U(rt,fe);var He=[];function ht(u){le(u.g,function(_,v){this.g.hasOwnProperty(v)&&Gn(_)},u),u.g={}}rt.prototype.N=function(){rt.aa.N.call(this),ht(this)},rt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ue=m.JSON.stringify,wt=m.JSON.parse,_t=class{stringify(u){return m.JSON.stringify(u,void 0)}parse(u){return m.JSON.parse(u,void 0)}};function j(){}j.prototype.h=null;function Z(u){return u.h||(u.h=u.i())}function J(){}var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function be(){he.call(this,"d")}U(be,he);function st(){he.call(this,"c")}U(st,he);var qe={},mt=null;function ze(){return mt=mt||new yt}qe.La="serverreachability";function Dt(u){he.call(this,qe.La,u)}U(Dt,he);function At(u){const _=ze();oe(_,new Dt(_))}qe.STAT_EVENT="statevent";function zt(u,_){he.call(this,qe.STAT_EVENT,u),this.stat=_}U(zt,he);function $e(u){const _=ze();oe(_,new zt(_,u))}qe.Ma="timingevent";function at(u,_){he.call(this,qe.Ma,u),this.size=_}U(at,he);function pt(u,_){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){u()},_)}function $t(){this.g=!0}$t.prototype.xa=function(){this.g=!1};function Ko(u,_,v,w,H,X){u.info(function(){if(u.g)if(X)for(var me="",ot=X.split("&"),en=0;en<ot.length;en++){var lt=ot[en].split("=");if(1<lt.length){var cn=lt[0];lt=lt[1];var tn=cn.split("_");me=2<=tn.length&&tn[1]=="type"?me+(cn+"="+lt+"&"):me+(cn+"=redacted&")}}else me=null;else me=X;return"XMLHTTP REQ ("+w+") [attempt "+H+"]: "+_+`
`+v+`
`+me})}function Sd(u,_,v,w,H,X,me){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+H+"]: "+_+`
`+v+`
`+X+" "+me})}function Kr(u,_,v,w){u.info(function(){return"XMLHTTP TEXT ("+_+"): "+Fs(u,v)+(w?" "+w:"")})}function Lc(u,_){u.info(function(){return"TIMEOUT: "+_})}$t.prototype.info=function(){};function Fs(u,_){if(!u.g)return _;if(!_)return null;try{var v=JSON.parse(_);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var w=v[u];if(!(2>w.length)){var H=w[1];if(Array.isArray(H)&&!(1>H.length)){var X=H[0];if(X!="noop"&&X!="stop"&&X!="close")for(var me=1;me<H.length;me++)H[me]=""}}}}return Ue(v)}catch{return _}}var Qr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Mi;function Vi(){}U(Vi,j),Vi.prototype.g=function(){return new XMLHttpRequest},Vi.prototype.i=function(){return{}},Mi=new Vi;function On(u,_,v,w){this.j=u,this.i=_,this.l=v,this.R=w||1,this.U=new rt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bt}function Bt(){this.i=null,this.g="",this.h=!1}var Qo={},Oa={};function bi(u,_,v){u.L=1,u.v=Ys($n(_)),u.m=v,u.P=!0,fr(u,null)}function fr(u,_){u.F=Date.now(),Gs(u),u.A=$n(u.v);var v=u.A,w=u.R;Array.isArray(w)||(w=[String(w)]),el(v.i,"t",w),u.C=0,v=u.j.J,u.h=new Bt,u.g=tu(u.j,v?_:null,!u.m),0<u.O&&(u.M=new Xe(S(u.Y,u,u.g),u.O)),_=u.U,v=u.g,w=u.ca;var H="readystatechange";Array.isArray(H)||(H&&(He[0]=H.toString()),H=He);for(var X=0;X<H.length;X++){var me=ur(v,H[X],w||_.handleEvent,!1,_.h||_);if(!me)break;_.g[me.key]=me}_=u.H?R(u.H):{},u.m?(u.u||(u.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,_)):(u.u="GET",u.g.ea(u.A,u.u,null,_)),At(),Ko(u.i,u.u,u.A,u.l,u.R,u.m)}On.prototype.ca=function(u){u=u.target;const _=this.M;_&&li(u)==3?_.j():this.Y(u)},On.prototype.Y=function(u){try{if(u==this.g)e:{const tn=li(this.g);var _=this.g.Ba();const Tr=this.g.Z();if(!(3>tn)&&(tn!=3||this.g&&(this.h.h||this.g.oa()||Kc(this.g)))){this.J||tn!=4||_==7||(_==8||0>=Tr?At(3):At(2)),Yr(this);var v=this.g.Z();this.X=v;t:if(zc(this)){var w=Kc(this.g);u="";var H=w.length,X=li(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gn(this),ji(this);var me="";break t}this.h.i=new m.TextDecoder}for(_=0;_<H;_++)this.h.h=!0,u+=this.h.i.decode(w[_],{stream:!(X&&_==H-1)});w.length=0,this.h.g+=u,this.C=0,me=this.h.g}else me=this.g.oa();if(this.o=v==200,Sd(this.i,this.u,this.A,this.l,this.R,tn,v),this.o){if(this.T&&!this.K){t:{if(this.g){var ot,en=this.g;if((ot=en.g?en.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ae(ot)){var lt=ot;break t}}lt=null}if(v=lt)Kr(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$s(this,v);else{this.o=!1,this.s=3,$e(12),gn(this),ji(this);break e}}if(this.P){v=!0;let yn;for(;!this.J&&this.C<me.length;)if(yn=Bc(this,me),yn==Oa){tn==4&&(this.s=4,$e(14),v=!1),Kr(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==Qo){this.s=4,$e(15),Kr(this.i,this.l,me,"[Invalid Chunk]"),v=!1;break}else Kr(this.i,this.l,yn,null),$s(this,yn);if(zc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tn!=4||me.length!=0||this.h.h||(this.s=1,$e(16),v=!1),this.o=this.o&&v,!v)Kr(this.i,this.l,me,"[Invalid Chunked Response]"),gn(this),ji(this);else if(0<me.length&&!this.W){this.W=!0;var cn=this.j;cn.g==this&&cn.ba&&!cn.M&&(cn.j.info("Great, no buffering proxy detected. Bytes received: "+me.length),ia(cn),cn.M=!0,$e(11))}}else Kr(this.i,this.l,me,null),$s(this,me);tn==4&&gn(this),this.o&&!this.J&&(tn==4?Zc(this.j,this):(this.o=!1,Gs(this)))}else Cd(this.g),v==400&&0<me.indexOf("Unknown SID")?(this.s=3,$e(12)):(this.s=0,$e(13)),gn(this),ji(this)}}}catch{}finally{}};function zc(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Bc(u,_){var v=u.C,w=_.indexOf(`
`,v);return w==-1?Oa:(v=Number(_.substring(v,w)),isNaN(v)?Qo:(w+=1,w+v>_.length?Oa:(_=_.slice(w,w+v),u.C=w+v,_)))}On.prototype.cancel=function(){this.J=!0,gn(this)};function Gs(u){u.S=Date.now()+u.I,qc(u,u.I)}function qc(u,_){if(u.B!=null)throw Error("WatchDog timer not null");u.B=pt(S(u.ba,u),_)}function Yr(u){u.B&&(m.clearTimeout(u.B),u.B=null)}On.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Lc(this.i,this.A),this.L!=2&&(At(),$e(17)),gn(this),this.s=2,ji(this)):qc(this,this.S-u)};function ji(u){u.j.G==0||u.J||Zc(u.j,u)}function gn(u){Yr(u);var _=u.M;_&&typeof _.ma=="function"&&_.ma(),u.M=null,ht(u.U),u.g&&(_=u.g,u.g=null,_.abort(),_.ma())}function $s(u,_){try{var v=u.j;if(v.G!=0&&(v.g==u||Yo(v.h,u))){if(!u.K&&Yo(v.h,u)&&v.G==3){try{var w=v.Da.g.parse(_)}catch{w=null}if(Array.isArray(w)&&w.length==3){var H=w;if(H[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Fa(v),qa(v);else break e;sl(v),$e(18)}}else v.za=H[1],0<v.za-v.T&&37500>H[2]&&v.F&&v.v==0&&!v.C&&(v.C=pt(S(v.Za,v),6e3));if(1>=Pa(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Er(v,11)}else if((u.K||v.g==u)&&Fa(v),!ae(_))for(H=v.Da.g.parse(_),_=0;_<H.length;_++){let lt=H[_];if(v.T=lt[0],lt=lt[1],v.G==2)if(lt[0]=="c"){v.K=lt[1],v.ia=lt[2];const cn=lt[3];cn!=null&&(v.la=cn,v.j.info("VER="+v.la));const tn=lt[4];tn!=null&&(v.Aa=tn,v.j.info("SVER="+v.Aa));const Tr=lt[5];Tr!=null&&typeof Tr=="number"&&0<Tr&&(w=1.5*Tr,v.L=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const yn=u.g;if(yn){const Fi=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fi){var X=w.h;X.g||Fi.indexOf("spdy")==-1&&Fi.indexOf("quic")==-1&&Fi.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Ma(X,X.h),X.h=null))}if(w.D){const ol=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;ol&&(w.ya=ol,St(w.I,w.D,ol))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),w=v;var me=u;if(w.qa=eu(w,w.J?w.ia:null,w.W),me.K){kn(w.h,me);var ot=me,en=w.L;en&&(ot.I=en),ot.B&&(Yr(ot),Gs(ot)),w.g=me}else Xc(w);0<v.i.length&&Ha(v)}else lt[0]!="stop"&&lt[0]!="close"||Er(v,7);else v.G==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?Er(v,7):il(v):lt[0]!="noop"&&v.l&&v.l.ta(lt),v.v=0)}}At(4)}catch{}}var Hc=class{constructor(u,_){this.g=u,this.map=_}};function mr(u){this.l=u||10,m.PerformanceNavigationTiming?(u=m.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ka(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Pa(u){return u.h?1:u.g?u.g.size:0}function Yo(u,_){return u.h?u.h==_:u.g?u.g.has(_):!1}function Ma(u,_){u.g?u.g.add(_):u.h=_}function kn(u,_){u.h&&u.h==_?u.h=null:u.g&&u.g.has(_)&&u.g.delete(_)}mr.prototype.cancel=function(){if(this.i=Xo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Xo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let _=u.i;for(const v of u.g.values())_=_.concat(v.D);return _}return q(u.i)}function Rd(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var _=[],v=u.length,w=0;w<v;w++)_.push(u[w]);return _}_=[],v=0;for(w in u)_[v++]=u[w];return _}function Va(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var _=[];u=u.length;for(var v=0;v<u;v++)_.push(v);return _}_=[],v=0;for(const w in u)_[v++]=w;return _}}}function Wo(u,_){if(u.forEach&&typeof u.forEach=="function")u.forEach(_,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,_,void 0);else for(var v=Va(u),w=Rd(u),H=w.length,X=0;X<H;X++)_.call(void 0,w[X],v&&v[X],u)}var Ks=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Id(u,_){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var w=u[v].indexOf("="),H=null;if(0<=w){var X=u[v].substring(0,w);H=u[v].substring(w+1)}else X=u[v];_(X,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Kt(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Kt){this.h=u.h,Qs(this,u.j),this.o=u.o,this.g=u.g,Xr(this,u.s),this.l=u.l;var _=u.i,v=new gr;v.i=_.i,_.g&&(v.g=new Map(_.g),v.h=_.h),pr(this,v),this.m=u.m}else u&&(_=String(u).match(Ks))?(this.h=!1,Qs(this,_[1]||"",!0),this.o=si(_[2]||""),this.g=si(_[3]||"",!0),Xr(this,_[4]),this.l=si(_[5]||"",!0),pr(this,_[6]||"",!0),this.m=si(_[7]||"")):(this.h=!1,this.i=new gr(null,this.h))}Kt.prototype.toString=function(){var u=[],_=this.j;_&&u.push(Xs(_,Zo,!0),":");var v=this.g;return(v||_=="file")&&(u.push("//"),(_=this.o)&&u.push(Xs(_,Zo,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Xs(v,v.charAt(0)=="/"?xd:Jo,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Xs(v,ja)),u.join("")};function $n(u){return new Kt(u)}function Qs(u,_,v){u.j=v?si(_,!0):_,u.j&&(u.j=u.j.replace(/:$/,""))}function Xr(u,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);u.s=_}else u.s=null}function pr(u,_,v){_ instanceof gr?(u.i=_,Gc(u.i,u.h)):(v||(_=Xs(_,Nd)),u.i=new gr(_,u.h))}function St(u,_,v){u.i.set(_,v)}function Ys(u){return St(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function si(u,_){return u?_?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Xs(u,_,v){return typeof u=="string"?(u=encodeURI(u).replace(_,Fc),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Fc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Zo=/[#\/\?@]/g,Jo=/[#\?:]/g,xd=/[#\?]/g,Nd=/[#\?@]/g,ja=/#/g;function gr(u,_){this.h=this.g=null,this.i=u||null,this.j=!!_}function ai(u){u.g||(u.g=new Map,u.h=0,u.i&&Id(u.i,function(_,v){u.add(decodeURIComponent(_.replace(/\+/g," ")),v)}))}r=gr.prototype,r.add=function(u,_){ai(this),this.i=null,u=Ui(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(_),this.h+=1,this};function yr(u,_){ai(u),_=Ui(u,_),u.g.has(_)&&(u.i=null,u.h-=u.g.get(_).length,u.g.delete(_))}function _r(u,_){return ai(u),_=Ui(u,_),u.g.has(_)}r.forEach=function(u,_){ai(this),this.g.forEach(function(v,w){v.forEach(function(H){u.call(_,H,w,this)},this)},this)},r.na=function(){ai(this);const u=Array.from(this.g.values()),_=Array.from(this.g.keys()),v=[];for(let w=0;w<_.length;w++){const H=u[w];for(let X=0;X<H.length;X++)v.push(_[w])}return v},r.V=function(u){ai(this);let _=[];if(typeof u=="string")_r(this,u)&&(_=_.concat(this.g.get(Ui(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)_=_.concat(u[v])}return _},r.set=function(u,_){return ai(this),this.i=null,u=Ui(this,u),_r(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[_]),this.h+=1,this},r.get=function(u,_){return u?(u=this.V(u),0<u.length?String(u[0]):_):_};function el(u,_,v){yr(u,_),0<v.length&&(u.i=null,u.g.set(Ui(u,_),q(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],_=Array.from(this.g.keys());for(var v=0;v<_.length;v++){var w=_[v];const X=encodeURIComponent(String(w)),me=this.V(w);for(w=0;w<me.length;w++){var H=X;me[w]!==""&&(H+="="+encodeURIComponent(String(me[w]))),u.push(H)}}return this.i=u.join("&")};function Ui(u,_){return _=String(_),u.j&&(_=_.toLowerCase()),_}function Gc(u,_){_&&!u.j&&(ai(u),u.i=null,u.g.forEach(function(v,w){var H=w.toLowerCase();w!=H&&(yr(this,w),el(this,H,v))},u)),u.j=_}function Ws(u,_){const v=new $t;if(m.Image){const w=new Image;w.onload=P(oi,v,"TestLoadImage: loaded",!0,_,w),w.onerror=P(oi,v,"TestLoadImage: error",!1,_,w),w.onabort=P(oi,v,"TestLoadImage: abort",!1,_,w),w.ontimeout=P(oi,v,"TestLoadImage: timeout",!1,_,w),m.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else _(!1)}function wi(u,_){const v=new $t,w=new AbortController,H=setTimeout(()=>{w.abort(),oi(v,"TestPingServer: timeout",!1,_)},1e4);fetch(u,{signal:w.signal}).then(X=>{clearTimeout(H),X.ok?oi(v,"TestPingServer: ok",!0,_):oi(v,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(H),oi(v,"TestPingServer: error",!1,_)})}function oi(u,_,v,w,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),w(v)}catch{}}function Zs(){this.g=new _t}function Li(u,_,v){const w=v||"";try{Wo(u,function(H,X){let me=H;y(H)&&(me=Ue(H)),_.push(w+X+"="+encodeURIComponent(me))})}catch(H){throw _.push(w+"type="+encodeURIComponent("_badmap")),H}}function Wr(u){this.l=u.Ub||null,this.j=u.eb||!1}U(Wr,j),Wr.prototype.g=function(){return new vr(this.l,this.j)},Wr.prototype.i=function(u){return function(){return u}}({});function vr(u,_){yt.call(this),this.D=u,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}U(vr,yt),r=vr.prototype,r.open=function(u,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=_,this.readyState=1,Bi(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(_.body=u),(this.D||m).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zi(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Bi(this)),this.g&&(this.readyState=3,Bi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function tl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var _=u.value?u.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!u.done}))&&(this.response=this.responseText+=_)}u.done?zi(this):Bi(this),this.readyState==3&&tl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,zi(this))},r.Qa=function(u){this.g&&(this.response=u,zi(this))},r.ga=function(){this.g&&zi(this)};function zi(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Bi(u)}r.setRequestHeader=function(u,_){this.u.append(u,_)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],_=this.h.entries();for(var v=_.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=_.next();return u.join(`\r
`)};function Bi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(vr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function nl(u){let _="";return le(u,function(v,w){_+=w,_+=":",_+=v,_+=`\r
`}),_}function ln(u,_,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=nl(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):St(u,_,v))}function vt(u){yt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}U(vt,yt);var Ua=/^https?$/i,Js=["POST","PUT"];r=vt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,_,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);_=_?_.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Mi.g(),this.v=this.o?Z(this.o):Z(Mi),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(_,String(u),!0),this.B=!1}catch(X){$c(this,X);return}if(u=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var H in w)v.set(H,w[H]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const X of w.keys())v.set(X,w.get(X));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(X=>X.toLowerCase()=="content-type"),H=m.FormData&&u instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Js,_,void 0))||w||H||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,me]of v)this.g.setRequestHeader(X,me);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ea(this),this.u=!0,this.g.send(u),this.u=!1}catch(X){$c(this,X)}};function $c(u,_){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=_,u.m=5,La(u),qi(u)}function La(u){u.A||(u.A=!0,oe(u,"complete"),oe(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,oe(this,"complete"),oe(this,"abort"),qi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qi(this,!0)),vt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?za(this):this.bb())},r.bb=function(){za(this)};function za(u){if(u.h&&typeof d<"u"&&(!u.v[1]||li(u)!=4||u.Z()!=2)){if(u.u&&li(u)==4)_e(u.Ea,0,u);else if(oe(u,"readystatechange"),li(u)==4){u.h=!1;try{const me=u.Z();e:switch(me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var v;if(!(v=_)){var w;if(w=me===0){var H=String(u.D).match(Ks)[1]||null;!H&&m.self&&m.self.location&&(H=m.self.location.protocol.slice(0,-1)),w=!Ua.test(H?H.toLowerCase():"")}v=w}if(v)oe(u,"complete"),oe(u,"success");else{u.m=6;try{var X=2<li(u)?u.g.statusText:""}catch{X=""}u.l=X+" ["+u.Z()+"]",La(u)}}finally{qi(u)}}}}function qi(u,_){if(u.g){ea(u);const v=u.g,w=u.v[0]?()=>{}:null;u.g=null,u.v=null,_||oe(u,"ready");try{v.onreadystatechange=w}catch{}}}function ea(u){u.I&&(m.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function li(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<li(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var _=this.g.responseText;return u&&_.indexOf(u)==0&&(_=_.substring(u.length)),wt(_)}};function Kc(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Cd(u){const _={};u=(u.g&&2<=li(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(ae(u[w]))continue;var v=M(u[w]);const H=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const X=_[H]||[];_[H]=X,X.push(v)}x(_,function(w){return w.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ta(u,_,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||_}function Ba(u){this.Aa=0,this.i=[],this.j=new $t,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ta("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ta("baseRetryDelayMs",5e3,u),this.cb=ta("retryDelaySeedMs",1e4,u),this.Wa=ta("forwardChannelMaxRetries",2,u),this.wa=ta("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new mr(u&&u.concurrentRequestLimit),this.Da=new Zs,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Ba.prototype,r.la=8,r.G=1,r.connect=function(u,_,v,w){$e(0),this.W=u,this.H=_||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.I=eu(this,null,this.W),Ha(this)};function il(u){if(Qc(u),u.G==3){var _=u.U++,v=$n(u.I);if(St(v,"SID",u.K),St(v,"RID",_),St(v,"TYPE","terminate"),na(u,v),_=new On(u,u.j,_),_.L=2,_.v=Ys($n(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(_.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=_.v,v=!0),v||(_.g=tu(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Gs(_)}Jc(u)}function qa(u){u.g&&(ia(u),u.g.cancel(),u.g=null)}function Qc(u){qa(u),u.u&&(m.clearTimeout(u.u),u.u=null),Fa(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&m.clearTimeout(u.s),u.s=null)}function Ha(u){if(!ka(u.h)&&!u.s){u.s=!0;var _=u.Ga;ue||D(),Ae||(ue(),Ae=!0),Ye.add(_,u),u.B=0}}function Dd(u,_){return Pa(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=_.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=pt(S(u.Ga,u,_),al(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const H=new On(this,this.j,u);let X=this.o;if(this.S&&(X?(X=R(X),O(X,this.S)):X=this.S),this.m!==null||this.O||(H.H=X,X=null),this.P)e:{for(var _=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(_+=w,4096<_){_=v;break e}if(_===4096||v===this.i.length-1){_=v+1;break e}}_=1e3}else _=1e3;_=Yc(this,H,_),v=$n(this.I),St(v,"RID",u),St(v,"CVER",22),this.D&&St(v,"X-HTTP-Session-Id",this.D),na(this,v),X&&(this.O?_="headers="+encodeURIComponent(String(nl(X)))+"&"+_:this.m&&ln(v,this.m,X)),Ma(this.h,H),this.Ua&&St(v,"TYPE","init"),this.P?(St(v,"$req",_),St(v,"SID","null"),H.T=!0,bi(H,v,null)):bi(H,v,_),this.G=2}}else this.G==3&&(u?rl(this,u):this.i.length==0||ka(this.h)||rl(this))};function rl(u,_){var v;_?v=_.l:v=u.U++;const w=$n(u.I);St(w,"SID",u.K),St(w,"RID",v),St(w,"AID",u.T),na(u,w),u.m&&u.o&&ln(w,u.m,u.o),v=new On(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),_&&(u.i=_.D.concat(u.i)),_=Yc(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ma(u.h,v),bi(v,w,_)}function na(u,_){u.H&&le(u.H,function(v,w){St(_,w,v)}),u.l&&Wo({},function(v,w){St(_,w,v)})}function Yc(u,_,v){v=Math.min(u.i.length,v);var w=u.l?S(u.l.Na,u.l,u):null;e:{var H=u.i;let X=-1;for(;;){const me=["count="+v];X==-1?0<v?(X=H[0].g,me.push("ofs="+X)):X=0:me.push("ofs="+X);let ot=!0;for(let en=0;en<v;en++){let lt=H[en].g;const cn=H[en].map;if(lt-=X,0>lt)X=Math.max(0,H[en].g-100),ot=!1;else try{Li(cn,me,"req"+lt+"_")}catch{w&&w(cn)}}if(ot){w=me.join("&");break e}}}return u=u.i.splice(0,v),_.D=u,w}function Xc(u){if(!u.g&&!u.u){u.Y=1;var _=u.Fa;ue||D(),Ae||(ue(),Ae=!0),Ye.add(_,u),u.v=0}}function sl(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=pt(S(u.Fa,u),al(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Wc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=pt(S(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$e(10),qa(this),Wc(this))};function ia(u){u.A!=null&&(m.clearTimeout(u.A),u.A=null)}function Wc(u){u.g=new On(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var _=$n(u.qa);St(_,"RID","rpc"),St(_,"SID",u.K),St(_,"AID",u.T),St(_,"CI",u.F?"0":"1"),!u.F&&u.ja&&St(_,"TO",u.ja),St(_,"TYPE","xmlhttp"),na(u,_),u.m&&u.o&&ln(_,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Ys($n(_)),v.m=null,v.P=!0,fr(v,u)}r.Za=function(){this.C!=null&&(this.C=null,qa(this),sl(this),$e(19))};function Fa(u){u.C!=null&&(m.clearTimeout(u.C),u.C=null)}function Zc(u,_){var v=null;if(u.g==_){Fa(u),ia(u),u.g=null;var w=2}else if(Yo(u.h,_))v=_.D,kn(u.h,_),w=1;else return;if(u.G!=0){if(_.o)if(w==1){v=_.m?_.m.length:0,_=Date.now()-_.F;var H=u.B;w=ze(),oe(w,new at(w,v)),Ha(u)}else Xc(u);else if(H=_.s,H==3||H==0&&0<_.X||!(w==1&&Dd(u,_)||w==2&&sl(u)))switch(v&&0<v.length&&(_=u.h,_.i=_.i.concat(v)),H){case 1:Er(u,5);break;case 4:Er(u,10);break;case 3:Er(u,6);break;default:Er(u,2)}}}function al(u,_){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*_}function Er(u,_){if(u.j.info("Error code "+_),_==2){var v=S(u.fb,u),w=u.Xa;const H=!w;w=new Kt(w||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Qs(w,"https"),Ys(w),H?Ws(w.toString(),v):wi(w.toString(),v)}else $e(2);u.G=0,u.l&&u.l.sa(_),Jc(u),Qc(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),$e(2)):(this.j.info("Failed to ping google.com"),$e(1))};function Jc(u){if(u.G=0,u.ka=[],u.l){const _=Xo(u.h);(_.length!=0||u.i.length!=0)&&(z(u.ka,_),z(u.ka,u.i),u.h.i.length=0,q(u.i),u.i.length=0),u.l.ra()}}function eu(u,_,v){var w=v instanceof Kt?$n(v):new Kt(v);if(w.g!="")_&&(w.g=_+"."+w.g),Xr(w,w.s);else{var H=m.location;w=H.protocol,_=_?_+"."+H.hostname:H.hostname,H=+H.port;var X=new Kt(null);w&&Qs(X,w),_&&(X.g=_),H&&Xr(X,H),v&&(X.l=v),w=X}return v=u.D,_=u.ya,v&&_&&St(w,v,_),St(w,"VER",u.la),na(u,w),w}function tu(u,_,v){if(_&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=u.Ca&&!u.pa?new vt(new Wr({eb:v})):new vt(u.pa),_.Ha(u.J),_}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function nu(){}r=nu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ga(){}Ga.prototype.g=function(u,_){return new Pn(u,_)};function Pn(u,_){yt.call(this),this.g=new Ba(_),this.l=u,this.h=_&&_.messageUrlParams||null,u=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(u?u["X-WebChannel-Content-Type"]=_.messageContentType:u={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(u?u["X-WebChannel-Client-Profile"]=_.va:u={"X-WebChannel-Client-Profile":_.va}),this.g.S=u,(u=_&&_.Sb)&&!ae(u)&&(this.g.m=u),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!ae(_)&&(this.g.D=_,u=this.h,u!==null&&_ in u&&(u=this.h,_ in u&&delete u[_])),this.j=new Hi(this)}U(Pn,yt),Pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pn.prototype.close=function(){il(this.g)},Pn.prototype.o=function(u){var _=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=Ue(u),u=v);_.i.push(new Hc(_.Ya++,u)),_.G==3&&Ha(_)},Pn.prototype.N=function(){this.g.l=null,delete this.j,il(this.g),delete this.g,Pn.aa.N.call(this)};function iu(u){be.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var _=u.__sm__;if(_){e:{for(const v in _){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,_=_!==null&&u in _?_[u]:void 0),this.data=_}else this.data=u}U(iu,be);function ru(){st.call(this),this.status=1}U(ru,st);function Hi(u){this.g=u}U(Hi,nu),Hi.prototype.ua=function(){oe(this.g,"a")},Hi.prototype.ta=function(u){oe(this.g,new iu(u))},Hi.prototype.sa=function(u){oe(this.g,new ru)},Hi.prototype.ra=function(){oe(this.g,"b")},Ga.prototype.createWebChannel=Ga.prototype.g,Pn.prototype.send=Pn.prototype.o,Pn.prototype.open=Pn.prototype.m,Pn.prototype.close=Pn.prototype.close,ZT=function(){return new Ga},WT=function(){return ze()},XT=qe,tp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qr.NO_ERROR=0,Qr.TIMEOUT=8,Qr.HTTP_ERROR=6,vh=Qr,dr.COMPLETE="complete",YT=dr,J.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",yt.prototype.listen=yt.prototype.K,Jl=J,vt.prototype.listenOnce=vt.prototype.L,vt.prototype.getLastError=vt.prototype.Ka,vt.prototype.getLastErrorCode=vt.prototype.Ba,vt.prototype.getStatus=vt.prototype.Z,vt.prototype.getResponseJson=vt.prototype.Oa,vt.prototype.getResponseText=vt.prototype.oa,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Ha,QT=vt}).apply(typeof oh<"u"?oh:typeof self<"u"?self:typeof window<"u"?window:{});const N0="@firebase/firestore",C0="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};xn.UNAUTHENTICATED=new xn(null),xn.GOOGLE_CREDENTIALS=new xn("google-credentials-uid"),xn.FIRST_PARTY=new xn("first-party-uid"),xn.MOCK_USER=new xn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bo="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=new Np("@firebase/firestore");function To(){return Ra.logLevel}function Te(r,...e){if(Ra.logLevel<=nt.DEBUG){const n=e.map(Bp);Ra.debug(`Firestore (${Bo}): ${r}`,...n)}}function Fr(r,...e){if(Ra.logLevel<=nt.ERROR){const n=e.map(Bp);Ra.error(`Firestore (${Bo}): ${r}`,...n)}}function Co(r,...e){if(Ra.logLevel<=nt.WARN){const n=e.map(Bp);Ra.warn(`Firestore (${Bo}): ${r}`,...n)}}function Bp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(r="Unexpected state"){const e=`FIRESTORE (${Bo}) INTERNAL ASSERTION FAILED: `+r;throw Fr(e),new Error(e)}function Et(r,e){r||je()}function Be(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends lr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(xn.UNAUTHENTICATED))}shutdown(){}}class UN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class LN{constructor(e){this.t=e,this.currentUser=xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Et(this.o===void 0);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let c=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Lr,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const p=c;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},m=p=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Lr)}},0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Et(typeof s.accessToken=="string"),new JT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Et(e===null||typeof e=="string"),new xn(e)}}class zN{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=xn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class BN{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new zN(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(xn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class D0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qN{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,ei(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){Et(this.o===void 0);const s=c=>{c.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.R;return this.R=c.token,Te("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const o=c=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?o(c):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new D0(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Et(typeof n.token=="string"),this.R=n.token,new D0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=HN(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<n&&(s+=e.charAt(o[c]%62))}return s}}function Qe(r,e){return r<e?-1:r>e?1:0}function np(r,e){let n=0;for(;n<r.length&&n<e.length;){const s=r.codePointAt(n),o=e.codePointAt(n);if(s!==o){if(s<128&&o<128)return Qe(s,o);{const c=eb(),d=FN(c.encode(O0(r,n)),c.encode(O0(e,n)));return d!==0?d:Qe(s,o)}}n+=s>65535?2:1}return Qe(r.length,e.length)}function O0(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function FN(r,e){for(let n=0;n<r.length&&n<e.length;++n)if(r[n]!==e[n])return Qe(r[n],e[n]);return Qe(r.length,e.length)}function Do(r,e,n){return r.length===e.length&&r.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0=-62135596800,P0=1e6;class an{static now(){return an.fromMillis(Date.now())}static fromDate(e){return an.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*P0);return new an(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ee(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ee(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<k0)throw new Ee(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/P0}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-k0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new an(0,0))}static max(){return new Le(new an(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip="__name__";class Wi{constructor(e,n,s){n===void 0?n=0:n>e.length&&je(),s===void 0?s=e.length-n:s>e.length-n&&je(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Wi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Wi?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const c=Wi.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Qe(e.length,n.length)}static compareSegments(e,n){const s=Wi.isNumericId(e),o=Wi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Wi.extractNumericId(e).compare(Wi.extractNumericId(n)):np(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Is.fromString(e.substring(4,e.length-2))}}class kt extends Wi{construct(e,n,s){return new kt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ee(ne.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new kt(n)}static emptyPath(){return new kt([])}}const GN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bn extends Wi{construct(e,n,s){return new bn(e,n,s)}static isValidIdentifier(e){return GN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ip}static keyField(){return new bn([ip])}static fromServerFormat(e){const n=[];let s="",o=0;const c=()=>{if(s.length===0)throw new Ee(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new Ee(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Ee(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(s+=m,o++):(c(),o++)}if(c(),d)throw new Ee(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bn(n)}static emptyPath(){return new bn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(kt.fromString(e))}static fromName(e){return new Ne(kt.fromString(e).popFirst(5))}static empty(){return new Ne(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return kt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new kt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=-1;function $N(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Le.fromTimestamp(s===1e9?new an(n+1,0):new an(n,s));return new Cs(o,Ne.empty(),e)}function KN(r){return new Cs(r.readTime,r.key,mc)}class Cs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Cs(Le.min(),Ne.empty(),mc)}static max(){return new Cs(Le.max(),Ne.empty(),mc)}}function QN(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=Ne.comparator(r.documentKey,e.documentKey),n!==0?n:Qe(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(r){if(r.code!==ne.FAILED_PRECONDITION||r.message!==YN)throw r;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&je(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):se.reject(n)}static resolve(e){return new se((n,s)=>{n(e)})}static reject(e){return new se((n,s)=>{s(e)})}static waitFor(e){return new se((n,s)=>{let o=0,c=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++c,d&&c===o&&n()},p=>s(p))}),d=!0,c===o&&n()})}static or(e){let n=se.resolve(!1);for(const s of e)n=n.next(o=>o?se.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,c)=>{s.push(n.call(this,o,c))}),this.waitFor(s)}static mapArray(e,n){return new se((s,o)=>{const c=e.length,d=new Array(c);let m=0;for(let p=0;p<c;p++){const y=p;n(e[y]).next(T=>{d[y]=T,++m,m===c&&s(d)},T=>o(T))}})}static doWhile(e,n){return new se((s,o)=>{const c=()=>{e()===!0?n().next(()=>{c()},o):s()};c()})}}function WN(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ho(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.oe(s),this._e=s=>n.writeSequenceNumber(s))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}id.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp=-1;function rd(r){return r==null}function Mh(r){return r===0&&1/r==-1/0}function ZN(r){return typeof r=="number"&&Number.isInteger(r)&&!Mh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb="";function JN(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=M0(e)),e=eC(r.get(n),e);return M0(e)}function eC(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const c=r.charAt(o);switch(c){case"\0":n+="";break;case nb:n+="";break;default:n+=c}}return n}function M0(r){return r+nb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function Ls(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function ib(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n){this.comparator=e,this.root=n||Tn.EMPTY}insert(e,n){return new jt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tn.BLACK,null,null))}remove(e){return new jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lh(this.root,e,this.comparator,!1)}getReverseIterator(){return new lh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lh(this.root,e,this.comparator,!0)}}class lh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tn{constructor(e,n,s,o,c){this.key=e,this.value=n,this.color=s??Tn.RED,this.left=o??Tn.EMPTY,this.right=c??Tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,c){return new Tn(e??this.key,n??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const c=s(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,s),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Tn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw je();const e=this.left.check();if(e!==this.right.check())throw je();return e+(this.isRed()?0:1)}}Tn.EMPTY=null,Tn.RED=!0,Tn.BLACK=!1;Tn.EMPTY=new class{constructor(){this.size=0}get key(){throw je()}get value(){throw je()}get color(){throw je()}get left(){throw je()}get right(){throw je()}copy(e,n,s,o,c){return this}insert(e,n,s){return new Tn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new j0(this.data.getIterator())}getIteratorFrom(e){return new j0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof on)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new on(this.comparator);return n.data=e,n}}class j0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.fields=e,e.sort(bn.comparator)}static empty(){return new ni([])}unionWith(e){let n=new on(bn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new ni(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Do(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new rb("Invalid base64 string: "+c):c}}(e);return new wn(n)}static fromUint8Array(e){const n=function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c}(e);return new wn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wn.EMPTY_BYTE_STRING=new wn("");const tC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ds(r){if(Et(!!r),typeof r=="string"){let e=0;const n=tC.exec(r);if(Et(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ft(r.seconds),nanos:Ft(r.nanos)}}function Ft(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Os(r){return typeof r=="string"?wn.fromBase64String(r):wn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="server_timestamp",ab="__type__",ob="__previous_value__",lb="__local_write_time__";function Hp(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[ab])===null||n===void 0?void 0:n.stringValue)===sb}function sd(r){const e=r.mapValue.fields[ob];return Hp(e)?sd(e):e}function pc(r){const e=Ds(r.mapValue.fields[lb].timestampValue);return new an(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,n,s,o,c,d,m,p,y){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=y}}const Vh="(default)";class gc{constructor(e,n){this.projectId=e,this.database=n||Vh}static empty(){return new gc("","")}get isDefaultDatabase(){return this.database===Vh}isEqual(e){return e instanceof gc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb="__type__",iC="__max__",ch={mapValue:{}},ub="__vector__",jh="value";function ks(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Hp(r)?4:sC(r)?9007199254740991:rC(r)?10:11:je()}function sr(r,e){if(r===e)return!0;const n=ks(r);if(n!==ks(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return pc(r).isEqual(pc(e));case 3:return function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=Ds(o.timestampValue),m=Ds(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,c){return Os(o.bytesValue).isEqual(Os(c.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,c){return Ft(o.geoPointValue.latitude)===Ft(c.geoPointValue.latitude)&&Ft(o.geoPointValue.longitude)===Ft(c.geoPointValue.longitude)}(r,e);case 2:return function(o,c){if("integerValue"in o&&"integerValue"in c)return Ft(o.integerValue)===Ft(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=Ft(o.doubleValue),m=Ft(c.doubleValue);return d===m?Mh(d)===Mh(m):isNaN(d)&&isNaN(m)}return!1}(r,e);case 9:return Do(r.arrayValue.values||[],e.arrayValue.values||[],sr);case 10:case 11:return function(o,c){const d=o.mapValue.fields||{},m=c.mapValue.fields||{};if(V0(d)!==V0(m))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(m[p]===void 0||!sr(d[p],m[p])))return!1;return!0}(r,e);default:return je()}}function yc(r,e){return(r.values||[]).find(n=>sr(n,e))!==void 0}function Oo(r,e){if(r===e)return 0;const n=ks(r),s=ks(e);if(n!==s)return Qe(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qe(r.booleanValue,e.booleanValue);case 2:return function(c,d){const m=Ft(c.integerValue||c.doubleValue),p=Ft(d.integerValue||d.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(r,e);case 3:return U0(r.timestampValue,e.timestampValue);case 4:return U0(pc(r),pc(e));case 5:return np(r.stringValue,e.stringValue);case 6:return function(c,d){const m=Os(c),p=Os(d);return m.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(c,d){const m=c.split("/"),p=d.split("/");for(let y=0;y<m.length&&y<p.length;y++){const T=Qe(m[y],p[y]);if(T!==0)return T}return Qe(m.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(c,d){const m=Qe(Ft(c.latitude),Ft(d.latitude));return m!==0?m:Qe(Ft(c.longitude),Ft(d.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return L0(r.arrayValue,e.arrayValue);case 10:return function(c,d){var m,p,y,T;const A=c.fields||{},S=d.fields||{},P=(m=A[jh])===null||m===void 0?void 0:m.arrayValue,U=(p=S[jh])===null||p===void 0?void 0:p.arrayValue,q=Qe(((y=P==null?void 0:P.values)===null||y===void 0?void 0:y.length)||0,((T=U==null?void 0:U.values)===null||T===void 0?void 0:T.length)||0);return q!==0?q:L0(P,U)}(r.mapValue,e.mapValue);case 11:return function(c,d){if(c===ch.mapValue&&d===ch.mapValue)return 0;if(c===ch.mapValue)return 1;if(d===ch.mapValue)return-1;const m=c.fields||{},p=Object.keys(m),y=d.fields||{},T=Object.keys(y);p.sort(),T.sort();for(let A=0;A<p.length&&A<T.length;++A){const S=np(p[A],T[A]);if(S!==0)return S;const P=Oo(m[p[A]],y[T[A]]);if(P!==0)return P}return Qe(p.length,T.length)}(r.mapValue,e.mapValue);default:throw je()}}function U0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Qe(r,e);const n=Ds(r),s=Ds(e),o=Qe(n.seconds,s.seconds);return o!==0?o:Qe(n.nanos,s.nanos)}function L0(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const c=Oo(n[o],s[o]);if(c)return c}return Qe(n.length,s.length)}function ko(r){return rp(r)}function rp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=Ds(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return Os(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return Ne.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",o=!0;for(const c of n.values||[])o?o=!1:s+=",",s+=rp(c);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const d of s)c?c=!1:o+=",",o+=`${d}:${rp(n.fields[d])}`;return o+"}"}(r.mapValue):je()}function Eh(r){switch(ks(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=sd(r);return e?16+Eh(e):16;case 5:return 2*r.stringValue.length;case 6:return Os(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,c)=>o+Eh(c),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return Ls(s.fields,(c,d)=>{o+=c.length+Eh(d)}),o}(r.mapValue);default:throw je()}}function z0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function sp(r){return!!r&&"integerValue"in r}function Fp(r){return!!r&&"arrayValue"in r}function B0(r){return!!r&&"nullValue"in r}function q0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Th(r){return!!r&&"mapValue"in r}function rC(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[cb])===null||n===void 0?void 0:n.stringValue)===ub}function rc(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Ls(r.mapValue.fields,(n,s)=>e.mapValue.fields[n]=rc(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=rc(r.arrayValue.values[n]);return e}return Object.assign({},r)}function sC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===iC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.value=e}static empty(){return new qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Th(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=rc(n)}setAll(e){let n=bn.emptyPath(),s={},o=[];e.forEach((d,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}d?s[m.lastSegment()]=rc(d):o.push(m.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,s,o)}delete(e){const n=this.field(e.popLast());Th(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return sr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Th(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Ls(n,(o,c)=>e[o]=c);for(const o of s)delete e[o]}clone(){return new qn(rc(this.value))}}function hb(r){const e=[];return Ls(r.fields,(n,s)=>{const o=new bn([n]);if(Th(s)){const c=hb(s.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)}),new ni(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,n,s,o,c,d,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new Nn(e,0,Le.min(),Le.min(),Le.min(),qn.empty(),0)}static newFoundDocument(e,n,s,o){return new Nn(e,1,n,Le.min(),s,o,0)}static newNoDocument(e,n){return new Nn(e,2,n,Le.min(),Le.min(),qn.empty(),0)}static newUnknownDocument(e,n){return new Nn(e,3,n,Le.min(),Le.min(),qn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n){this.position=e,this.inclusive=n}}function H0(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const c=e[o],d=r.position[o];if(c.field.isKeyField()?s=Ne.comparator(Ne.fromName(d.referenceValue),n.key):s=Oo(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function F0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!sr(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,n="asc"){this.field=e,this.dir=n}}function aC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{}class Wt extends db{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new lC(e,n,s):n==="array-contains"?new hC(e,s):n==="in"?new dC(e,s):n==="not-in"?new fC(e,s):n==="array-contains-any"?new mC(e,s):new Wt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new cC(e,s):new uC(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Oo(n,this.value)):n!==null&&ks(this.value)===ks(n)&&this.matchesComparison(Oo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Di extends db{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Di(e,n)}matches(e){return fb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function fb(r){return r.op==="and"}function mb(r){return oC(r)&&fb(r)}function oC(r){for(const e of r.filters)if(e instanceof Di)return!1;return!0}function ap(r){if(r instanceof Wt)return r.field.canonicalString()+r.op.toString()+ko(r.value);if(mb(r))return r.filters.map(e=>ap(e)).join(",");{const e=r.filters.map(n=>ap(n)).join(",");return`${r.op}(${e})`}}function pb(r,e){return r instanceof Wt?function(s,o){return o instanceof Wt&&s.op===o.op&&s.field.isEqual(o.field)&&sr(s.value,o.value)}(r,e):r instanceof Di?function(s,o){return o instanceof Di&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((c,d,m)=>c&&pb(d,o.filters[m]),!0):!1}(r,e):void je()}function gb(r){return r instanceof Wt?function(n){return`${n.field.canonicalString()} ${n.op} ${ko(n.value)}`}(r):r instanceof Di?function(n){return n.op.toString()+" {"+n.getFilters().map(gb).join(" ,")+"}"}(r):"Filter"}class lC extends Wt{constructor(e,n,s){super(e,n,s),this.key=Ne.fromName(s.referenceValue)}matches(e){const n=Ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class cC extends Wt{constructor(e,n){super(e,"in",n),this.keys=yb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class uC extends Wt{constructor(e,n){super(e,"not-in",n),this.keys=yb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yb(r,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>Ne.fromName(s.referenceValue))}class hC extends Wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fp(n)&&yc(n.arrayValue,this.value)}}class dC extends Wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yc(this.value.arrayValue,n)}}class fC extends Wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!yc(this.value.arrayValue,n)}}class mC extends Wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>yc(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,n=null,s=[],o=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=d,this.endAt=m,this.le=null}}function G0(r,e=null,n=[],s=[],o=null,c=null,d=null){return new pC(r,e,n,s,o,c,d)}function Gp(r){const e=Be(r);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>ap(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),rd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>ko(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>ko(s)).join(",")),e.le=n}return e.le}function $p(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!aC(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!pb(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!F0(r.startAt,e.startAt)&&F0(r.endAt,e.endAt)}function op(r){return Ne.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n=null,s=[],o=[],c=null,d="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function gC(r,e,n,s,o,c,d,m){return new Fo(r,e,n,s,o,c,d,m)}function Kp(r){return new Fo(r)}function $0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function _b(r){return r.collectionGroup!==null}function sc(r){const e=Be(r);if(e.he===null){e.he=[];const n=new Set;for(const c of e.explicitOrderBy)e.he.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new on(bn.comparator);return d.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(m=m.add(y.field))})}),m})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.he.push(new _c(c,s))}),n.has(bn.keyField().canonicalString())||e.he.push(new _c(bn.keyField(),s))}return e.he}function nr(r){const e=Be(r);return e.Pe||(e.Pe=yC(e,sc(r))),e.Pe}function yC(r,e){if(r.limitType==="F")return G0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const c=o.dir==="desc"?"asc":"desc";return new _c(o.field,c)});const n=r.endAt?new Uh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Uh(r.startAt.position,r.startAt.inclusive):null;return G0(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function lp(r,e){const n=r.filters.concat([e]);return new Fo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function Lh(r,e,n){return new Fo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function ad(r,e){return $p(nr(r),nr(e))&&r.limitType===e.limitType}function vb(r){return`${Gp(nr(r))}|lt:${r.limitType}`}function bo(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>gb(o)).join(", ")}]`),rd(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>ko(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>ko(o)).join(",")),`Target(${s})`}(nr(r))}; limitType=${r.limitType})`}function od(r,e){return e.isFoundDocument()&&function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Ne.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(r,e)&&function(s,o){for(const c of sc(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(d,m,p){const y=H0(d,m,p);return d.inclusive?y<=0:y<0}(s.startAt,sc(s),o)||s.endAt&&!function(d,m,p){const y=H0(d,m,p);return d.inclusive?y>=0:y>0}(s.endAt,sc(s),o))}(r,e)}function _C(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Eb(r){return(e,n)=>{let s=!1;for(const o of sc(r)){const c=vC(o,e,n);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function vC(r,e,n){const s=r.field.isKeyField()?Ne.comparator(e.key,n.key):function(c,d,m){const p=d.data.field(c),y=m.data.field(c);return p!==null&&y!==null?Oo(p,y):je()}(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return je()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ls(this.inner,(n,s)=>{for(const[o,c]of s)e(o,c)})}isEmpty(){return ib(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=new jt(Ne.comparator);function Gr(){return EC}const Tb=new jt(Ne.comparator);function ec(...r){let e=Tb;for(const n of r)e=e.insert(n.key,n);return e}function bb(r){let e=Tb;return r.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Ea(){return ac()}function wb(){return ac()}function ac(){return new Ca(r=>r.toString(),(r,e)=>r.isEqual(e))}const TC=new jt(Ne.comparator),bC=new on(Ne.comparator);function it(...r){let e=bC;for(const n of r)e=e.add(n);return e}const wC=new on(Qe);function AC(){return wC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mh(e)?"-0":e}}function Ab(r){return{integerValue:""+r}}function Sb(r,e){return ZN(e)?Ab(e):Qp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(){this._=void 0}}function SC(r,e,n){return r instanceof zh?function(o,c){const d={fields:{[ab]:{stringValue:sb},[lb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Hp(c)&&(c=sd(c)),c&&(d.fields[ob]=c),{mapValue:d}}(n,e):r instanceof vc?Ib(r,e):r instanceof Ec?xb(r,e):function(o,c){const d=Rb(o,c),m=K0(d)+K0(o.Ie);return sp(d)&&sp(o.Ie)?Ab(m):Qp(o.serializer,m)}(r,e)}function RC(r,e,n){return r instanceof vc?Ib(r,e):r instanceof Ec?xb(r,e):n}function Rb(r,e){return r instanceof Tc?function(s){return sp(s)||function(c){return!!c&&"doubleValue"in c}(s)}(e)?e:{integerValue:0}:null}class zh extends ld{}class vc extends ld{constructor(e){super(),this.elements=e}}function Ib(r,e){const n=Nb(e);for(const s of r.elements)n.some(o=>sr(o,s))||n.push(s);return{arrayValue:{values:n}}}class Ec extends ld{constructor(e){super(),this.elements=e}}function xb(r,e){let n=Nb(e);for(const s of r.elements)n=n.filter(o=>!sr(o,s));return{arrayValue:{values:n}}}class Tc extends ld{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function K0(r){return Ft(r.integerValue||r.doubleValue)}function Nb(r){return Fp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n){this.field=e,this.transform=n}}function xC(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof vc&&o instanceof vc||s instanceof Ec&&o instanceof Ec?Do(s.elements,o.elements,sr):s instanceof Tc&&o instanceof Tc?sr(s.Ie,o.Ie):s instanceof zh&&o instanceof zh}(r.transform,e.transform)}class NC{constructor(e,n){this.version=e,this.transformResults=n}}class Vn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Vn}static exists(e){return new Vn(void 0,e)}static updateTime(e){return new Vn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class cd{}function Cb(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new ud(r.key,Vn.none()):new Dc(r.key,r.data,Vn.none());{const n=r.data,s=qn.empty();let o=new on(bn.comparator);for(let c of e.fields)if(!o.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),o=o.add(c)}return new zs(r.key,s,new ni(o.toArray()),Vn.none())}}function CC(r,e,n){r instanceof Dc?function(o,c,d){const m=o.value.clone(),p=Y0(o.fieldTransforms,c,d.transformResults);m.setAll(p),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(r,e,n):r instanceof zs?function(o,c,d){if(!bh(o.precondition,c))return void c.convertToUnknownDocument(d.version);const m=Y0(o.fieldTransforms,c,d.transformResults),p=c.data;p.setAll(Db(o)),p.setAll(m),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()}(r,e,n):function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,n)}function oc(r,e,n,s){return r instanceof Dc?function(c,d,m,p){if(!bh(c.precondition,d))return m;const y=c.value.clone(),T=X0(c.fieldTransforms,p,d);return y.setAll(T),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null}(r,e,n,s):r instanceof zs?function(c,d,m,p){if(!bh(c.precondition,d))return m;const y=X0(c.fieldTransforms,p,d),T=d.data;return T.setAll(Db(c)),T.setAll(y),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(A=>A.field))}(r,e,n,s):function(c,d,m){return bh(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m}(r,e,n)}function DC(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),c=Rb(s.transform,o||null);c!=null&&(n===null&&(n=qn.empty()),n.set(s.field,c))}return n||null}function Q0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Do(s,o,(c,d)=>xC(c,d))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Dc extends cd{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class zs extends cd{constructor(e,n,s,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Db(r){const e=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}}),e}function Y0(r,e,n){const s=new Map;Et(r.length===n.length);for(let o=0;o<n.length;o++){const c=r[o],d=c.transform,m=e.data.field(c.field);s.set(c.field,RC(d,m,n[o]))}return s}function X0(r,e,n){const s=new Map;for(const o of r){const c=o.transform,d=n.data.field(o.field);s.set(o.field,SC(c,d,e))}return s}class ud extends cd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OC extends cd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&CC(c,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=oc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=oc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=wb();return this.mutations.forEach(o=>{const c=e.get(o.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=n.has(o.key)?null:m;const p=Cb(d,m);p!==null&&s.set(o.key,p),d.isValidDocument()||d.convertToNoDocument(Le.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),it())}isEqual(e){return this.batchId===e.batchId&&Do(this.mutations,e.mutations,(n,s)=>Q0(n,s))&&Do(this.baseMutations,e.baseMutations,(n,s)=>Q0(n,s))}}class Yp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Et(e.mutations.length===s.length);let o=function(){return TC}();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,s[d].version);return new Yp(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt,ut;function VC(r){switch(r){case ne.OK:return je();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return je()}}function Ob(r){if(r===void 0)return Fr("GRPC error has no .code"),ne.UNKNOWN;switch(r){case Xt.OK:return ne.OK;case Xt.CANCELLED:return ne.CANCELLED;case Xt.UNKNOWN:return ne.UNKNOWN;case Xt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Xt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Xt.INTERNAL:return ne.INTERNAL;case Xt.UNAVAILABLE:return ne.UNAVAILABLE;case Xt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Xt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Xt.NOT_FOUND:return ne.NOT_FOUND;case Xt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Xt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Xt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Xt.ABORTED:return ne.ABORTED;case Xt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Xt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Xt.DATA_LOSS:return ne.DATA_LOSS;default:return je()}}(ut=Xt||(Xt={}))[ut.OK=0]="OK",ut[ut.CANCELLED=1]="CANCELLED",ut[ut.UNKNOWN=2]="UNKNOWN",ut[ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ut[ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ut[ut.NOT_FOUND=5]="NOT_FOUND",ut[ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",ut[ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",ut[ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",ut[ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ut[ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ut[ut.ABORTED=10]="ABORTED",ut[ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",ut[ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",ut[ut.INTERNAL=13]="INTERNAL",ut[ut.UNAVAILABLE=14]="UNAVAILABLE",ut[ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=new Is([4294967295,4294967295],0);function W0(r){const e=eb().encode(r),n=new KT;return n.update(e),new Uint8Array(n.digest())}function Z0(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Is([n,s],0),new Is([o,c],0)]}class Xp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new tc(`Invalid padding: ${n}`);if(s<0)throw new tc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new tc(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new tc(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=Is.fromNumber(this.Ee)}Ae(e,n,s){let o=e.add(n.multiply(Is.fromNumber(s)));return o.compare(jC)===1&&(o=new Is([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=W0(e),[s,o]=Z0(n);for(let c=0;c<this.hashCount;c++){const d=this.Ae(s,o,c);if(!this.Re(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Xp(c,o,n);return s.forEach(m=>d.insert(m)),d}insert(e){if(this.Ee===0)return;const n=W0(e),[s,o]=Z0(n);for(let c=0;c<this.hashCount;c++){const d=this.Ae(s,o,c);this.Ve(d)}}Ve(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class tc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,n,s,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Oc.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new hd(Le.min(),o,new jt(Qe),Gr(),it())}}class Oc{constructor(e,n,s,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Oc(s,n,it(),it(),it())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,n,s,o){this.me=e,this.removedTargetIds=n,this.key=s,this.fe=o}}class kb{constructor(e,n){this.targetId=e,this.ge=n}}class Pb{constructor(e,n,s=wn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class J0{constructor(){this.pe=0,this.ye=eE(),this.we=wn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=it(),n=it(),s=it();return this.ye.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:je()}}),new Oc(this.we,this.Se,e,n,s)}Me(){this.be=!1,this.ye=eE()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Et(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class UC{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Gr(),this.$e=uh(),this.Ue=uh(),this.Ke=new jt(Qe)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const s=this.He(n);switch(e.state){case 0:this.Je(n)&&s.Ce(e.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(e.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(n);break;case 3:this.Je(n)&&(s.Le(),s.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),s.Ce(e.resumeToken));break;default:je()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((s,o)=>{this.Je(o)&&n(o)})}Ze(e){const n=e.targetId,s=e.ge.count,o=this.Xe(n);if(o){const c=o.target;if(op(c))if(s===0){const d=new Ne(c.path);this.ze(n,d,Nn.newNoDocument(d,Le.min()))}else Et(s===1);else{const d=this.et(n);if(d!==s){const m=this.tt(e),p=m?this.nt(m,e,d):1;if(p!==0){this.Ye(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,y)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=n;let d,m;try{d=Os(s).toUint8Array()}catch(p){if(p instanceof rb)return Co("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Xp(d,o,c)}catch(p){return Co(p instanceof tc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.Ee===0?null:m}nt(e,n,s){return n.ge.count===s-this.st(e,n.targetId)?0:2}st(e,n){const s=this.ke.getRemoteKeysForTarget(n);let o=0;return s.forEach(c=>{const d=this.ke.it(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.ze(n,c,null),o++)}),o}ot(e){const n=new Map;this.qe.forEach((c,d)=>{const m=this.Xe(d);if(m){if(c.current&&op(m.target)){const p=new Ne(m.target.path);this._t(p).has(d)||this.ut(d,p)||this.ze(d,p,Nn.newNoDocument(p,e))}c.ve&&(n.set(d,c.Fe()),c.Me())}});let s=it();this.Ue.forEach((c,d)=>{let m=!0;d.forEachWhile(p=>{const y=this.Xe(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(c))}),this.Qe.forEach((c,d)=>d.setReadTime(e));const o=new hd(e,n,this.Ke,this.Qe,s);return this.Qe=Gr(),this.$e=uh(),this.Ue=uh(),this.Ke=new jt(Qe),o}Ge(e,n){if(!this.Je(e))return;const s=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,s),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}ze(e,n,s){if(!this.Je(e))return;const o=this.He(e);this.ut(e,n)?o.xe(n,1):o.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),this.Ue=this.Ue.insert(n,this.ct(n).add(e)),s&&(this.Qe=this.Qe.insert(n,s))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new J0,this.qe.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new on(Qe),this.Ue=this.Ue.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new on(Qe),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||Te("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new J0),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function uh(){return new jt(Ne.comparator)}function eE(){return new jt(Ne.comparator)}const LC={asc:"ASCENDING",desc:"DESCENDING"},zC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BC={and:"AND",or:"OR"};class qC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function cp(r,e){return r.useProto3Json||rd(e)?e:{value:e}}function Bh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mb(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function HC(r,e){return Bh(r,e.toTimestamp())}function ir(r){return Et(!!r),Le.fromTimestamp(function(n){const s=Ds(n);return new an(s.seconds,s.nanos)}(r))}function Wp(r,e){return up(r,e).canonicalString()}function up(r,e){const n=function(o){return new kt(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?n:n.child(e)}function Vb(r){const e=kt.fromString(r);return Et(Bb(e)),e}function hp(r,e){return Wp(r.databaseId,e.path)}function Um(r,e){const n=Vb(e);if(n.get(1)!==r.databaseId.projectId)throw new Ee(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new Ee(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Ne(Ub(n))}function jb(r,e){return Wp(r.databaseId,e)}function FC(r){const e=Vb(r);return e.length===4?kt.emptyPath():Ub(e)}function dp(r){return new kt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Ub(r){return Et(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function tE(r,e,n){return{name:hp(r,e),fields:n.value.mapValue.fields}}function GC(r,e){let n;if("targetChange"in e){e.targetChange;const s=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:je()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=function(y,T){return y.useProto3Json?(Et(T===void 0||typeof T=="string"),wn.fromBase64String(T||"")):(Et(T===void 0||T instanceof Buffer||T instanceof Uint8Array),wn.fromUint8Array(T||new Uint8Array))}(r,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(y){const T=y.code===void 0?ne.UNKNOWN:Ob(y.code);return new Ee(T,y.message||"")}(d);n=new Pb(s,o,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Um(r,s.document.name),c=ir(s.document.updateTime),d=s.document.createTime?ir(s.document.createTime):Le.min(),m=new qn({mapValue:{fields:s.document.fields}}),p=Nn.newFoundDocument(o,c,d,m),y=s.targetIds||[],T=s.removedTargetIds||[];n=new wh(y,T,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Um(r,s.document),c=s.readTime?ir(s.readTime):Le.min(),d=Nn.newNoDocument(o,c),m=s.removedTargetIds||[];n=new wh([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Um(r,s.document),c=s.removedTargetIds||[];n=new wh([],c,o,null)}else{if(!("filter"in e))return je();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,d=new MC(o,c),m=s.targetId;n=new kb(m,d)}}return n}function $C(r,e){let n;if(e instanceof Dc)n={update:tE(r,e.key,e.value)};else if(e instanceof ud)n={delete:hp(r,e.key)};else if(e instanceof zs)n={update:tE(r,e.key,e.data),updateMask:t2(e.fieldMask)};else{if(!(e instanceof OC))return je();n={verify:hp(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(c,d){const m=d.transform;if(m instanceof zh)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof vc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Ec)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Tc)return{fieldPath:d.field.canonicalString(),increment:m.Ie};throw je()}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,c){return c.updateTime!==void 0?{updateTime:HC(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:je()}(r,e.precondition)),n}function KC(r,e){return r&&r.length>0?(Et(e!==void 0),r.map(n=>function(o,c){let d=o.updateTime?ir(o.updateTime):ir(c);return d.isEqual(Le.min())&&(d=ir(c)),new NC(d,o.transformResults||[])}(n,e))):[]}function QC(r,e){return{documents:[jb(r,e.path)]}}function YC(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=jb(r,o);const c=function(y){if(y.length!==0)return zb(Di.create(y,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const d=function(y){if(y.length!==0)return y.map(T=>function(S){return{field:wo(S.field),direction:ZC(S.dir)}}(T))}(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=cp(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ht:n,parent:o}}function XC(r){let e=FC(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Et(s===1);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let c=[];n.where&&(c=function(A){const S=Lb(A);return S instanceof Di&&mb(S)?S.getFilters():[S]}(n.where));let d=[];n.orderBy&&(d=function(A){return A.map(S=>function(U){return new _c(Ao(U.field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(U.direction))}(S))}(n.orderBy));let m=null;n.limit&&(m=function(A){let S;return S=typeof A=="object"?A.value:A,rd(S)?null:S}(n.limit));let p=null;n.startAt&&(p=function(A){const S=!!A.before,P=A.values||[];return new Uh(P,S)}(n.startAt));let y=null;return n.endAt&&(y=function(A){const S=!A.before,P=A.values||[];return new Uh(P,S)}(n.endAt)),gC(e,o,d,c,m,"F",p,y)}function WC(r,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Lb(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ao(n.unaryFilter.field);return Wt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Ao(n.unaryFilter.field);return Wt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ao(n.unaryFilter.field);return Wt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ao(n.unaryFilter.field);return Wt.create(d,"!=",{nullValue:"NULL_VALUE"});default:return je()}}(r):r.fieldFilter!==void 0?function(n){return Wt.create(Ao(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return je()}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return Di.create(n.compositeFilter.filters.map(s=>Lb(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return je()}}(n.compositeFilter.op))}(r):je()}function ZC(r){return LC[r]}function JC(r){return zC[r]}function e2(r){return BC[r]}function wo(r){return{fieldPath:r.canonicalString()}}function Ao(r){return bn.fromServerFormat(r.fieldPath)}function zb(r){return r instanceof Wt?function(n){if(n.op==="=="){if(q0(n.value))return{unaryFilter:{field:wo(n.field),op:"IS_NAN"}};if(B0(n.value))return{unaryFilter:{field:wo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(q0(n.value))return{unaryFilter:{field:wo(n.field),op:"IS_NOT_NAN"}};if(B0(n.value))return{unaryFilter:{field:wo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wo(n.field),op:JC(n.op),value:n.value}}}(r):r instanceof Di?function(n){const s=n.getFilters().map(o=>zb(o));return s.length===1?s[0]:{compositeFilter:{op:e2(n.op),filters:s}}}(r):je()}function t2(r){const e=[];return r.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Bb(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n,s,o,c=Le.min(),d=Le.min(),m=wn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new As(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e){this.Tt=e}}function i2(r){const e=XC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Lh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(){this.Tn=new s2}addToCollectionParentIndex(e,n){return this.Tn.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(Cs.min())}updateCollectionGroup(e,n,s){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class s2{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new on(kt.comparator),c=!o.has(s);return this.index[n]=o.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new on(kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qb=41943040;class Bn{static withCacheSize(e){return new Bn(e,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(qb,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Po(0)}static Kn(){return new Po(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="LruGarbageCollector",a2=1048576;function rE([r,e],[n,s]){const o=Qe(r,n);return o===0?Qe(e,s):o}class o2{constructor(e){this.Hn=e,this.buffer=new on(rE),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();rE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class l2{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){Te(iE,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ho(n)?Te(iE,"Ignoring IndexedDB error during garbage collection: ",n):await qo(n)}await this.er(3e5)})}}class c2{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return se.resolve(id.ae);const s=new o2(n);return this.tr.forEachTarget(e,o=>s.Zn(o.sequenceNumber)).next(()=>this.tr.rr(e,o=>s.Zn(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.tr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(nE)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nE):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let s,o,c,d,m,p,y;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,d=Date.now(),this.nthSequenceNumber(e,o))).next(A=>(s=A,m=Date.now(),this.removeTargets(e,s,n))).next(A=>(c=A,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(A=>(y=Date.now(),To()<=nt.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${c} targets in `+(p-m)+`ms
	Removed ${A} documents in `+(y-p)+`ms
Total Duration: ${y-T}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:A})))}}function u2(r,e){return new c2(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(){this.changes=new Ca(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?se.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&oc(s.mutation,o,ni.empty(),an.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,it()).next(()=>s))}getLocalViewOfDocuments(e,n,s=it()){const o=Ea();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(c=>{let d=ec();return c.forEach((m,p)=>{d=d.insert(m,p.overlayedDocument)}),d}))}getOverlayedDocuments(e,n){const s=Ea();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,it()))}populateOverlays(e,n,s){const o=[];return s.forEach(c=>{n.has(c)||o.push(c)}),this.documentOverlayCache.getOverlays(e,o).next(c=>{c.forEach((d,m)=>{n.set(d,m)})})}computeViews(e,n,s,o){let c=Gr();const d=ac(),m=function(){return ac()}();return n.forEach((p,y)=>{const T=s.get(y.key);o.has(y.key)&&(T===void 0||T.mutation instanceof zs)?c=c.insert(y.key,y):T!==void 0?(d.set(y.key,T.mutation.getFieldMask()),oc(T.mutation,y,T.mutation.getFieldMask(),an.now())):d.set(y.key,ni.empty())}),this.recalculateAndSaveOverlays(e,c).next(p=>(p.forEach((y,T)=>d.set(y,T)),n.forEach((y,T)=>{var A;return m.set(y,new d2(T,(A=d.get(y))!==null&&A!==void 0?A:null))}),m))}recalculateAndSaveOverlays(e,n){const s=ac();let o=new jt((d,m)=>d-m),c=it();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(d=>{for(const m of d)m.keys().forEach(p=>{const y=n.get(p);if(y===null)return;let T=s.get(p)||ni.empty();T=m.applyToLocalView(y,T),s.set(p,T);const A=(o.get(m.batchId)||it()).add(p);o=o.insert(m.batchId,A)})}).next(()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),y=p.key,T=p.value,A=wb();T.forEach(S=>{if(!c.has(S)){const P=Cb(n.get(S),s.get(S));P!==null&&A.set(S,P),c=c.add(S)}}),d.push(this.documentOverlayCache.saveOverlays(e,y,A))}return se.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(d){return Ne.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_b(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-c.size):se.resolve(Ea());let m=mc,p=c;return d.next(y=>se.forEach(y,(T,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),c.get(T)?se.resolve():this.remoteDocumentCache.getEntry(e,T).next(S=>{p=p.insert(T,S)}))).next(()=>this.populateOverlays(e,y,c)).next(()=>this.computeViews(e,p,y,it())).next(T=>({batchId:m,changes:bb(T)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ne(n)).next(s=>{let o=ec();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const c=n.collectionGroup;let d=ec();return this.indexManager.getCollectionParents(e,c).next(m=>se.forEach(m,p=>{const y=function(A,S){return new Fo(S,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(n,p.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next(T=>{T.forEach((A,S)=>{d=d.insert(A,S)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,n,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,o))).next(d=>{c.forEach((p,y)=>{const T=y.getKey();d.get(T)===null&&(d=d.insert(T,Nn.newInvalidDocument(T)))});let m=ec();return d.forEach((p,y)=>{const T=c.get(p);T!==void 0&&oc(T.mutation,y,ni.empty(),an.now()),od(n,y)&&(m=m.insert(p,y))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return se.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:ir(o.createTime)}}(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(o){return{name:o.name,query:i2(o.bundledQuery),readTime:ir(o.readTime)}}(n)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(){this.overlays=new jt(Ne.comparator),this.Rr=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ea();return se.forEach(n,o=>this.getOverlay(e,o).next(c=>{c!==null&&s.set(o,c)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,c)=>{this.Et(e,n,c)}),se.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Rr.get(s);return o!==void 0&&(o.forEach(c=>this.overlays=this.overlays.remove(c)),this.Rr.delete(s)),se.resolve()}getOverlaysForCollection(e,n,s){const o=Ea(),c=n.length+1,d=new Ne(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const p=m.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&p.largestBatchId>s&&o.set(p.getKey(),p)}return se.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let c=new jt((y,T)=>y-T);const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let T=c.get(y.largestBatchId);T===null&&(T=Ea(),c=c.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const m=Ea(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,T)=>m.set(y,T)),!(m.size()>=o)););return se.resolve(m)}Et(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.Rr.get(o.largestBatchId).delete(s.key);this.Rr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new PC(n,s));let c=this.Rr.get(n);c===void 0&&(c=it(),this.Rr.set(n,c)),this.Rr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(){this.sessionToken=wn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(){this.Vr=new on(fn.mr),this.gr=new on(fn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const s=new fn(e,n);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.wr(new fn(e,n))}Sr(e,n){e.forEach(s=>this.removeReference(s,n))}br(e){const n=new Ne(new kt([])),s=new fn(n,e),o=new fn(n,e+1),c=[];return this.gr.forEachInRange([s,o],d=>{this.wr(d),c.push(d.key)}),c}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new Ne(new kt([])),s=new fn(n,e),o=new fn(n,e+1);let c=it();return this.gr.forEachInRange([s,o],d=>{c=c.add(d.key)}),c}containsKey(e){const n=new fn(e,0),s=this.Vr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class fn{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return Ne.comparator(e.key,n.key)||Qe(e.Cr,n.Cr)}static pr(e,n){return Qe(e.Cr,n.Cr)||Ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new on(fn.mr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const c=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new kC(c,n,s,o);this.mutationQueue.push(d);for(const m of o)this.Mr=this.Mr.add(new fn(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return se.resolve(d)}lookupMutationBatch(e,n){return se.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.Nr(s),c=o<0?0:o;return se.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?qp:this.Fr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new fn(n,0),o=new fn(n,Number.POSITIVE_INFINITY),c=[];return this.Mr.forEachInRange([s,o],d=>{const m=this.Or(d.Cr);c.push(m)}),se.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new on(Qe);return n.forEach(o=>{const c=new fn(o,0),d=new fn(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([c,d],m=>{s=s.add(m.Cr)})}),se.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let c=s;Ne.isDocumentKey(c)||(c=c.child(""));const d=new fn(new Ne(c),0);let m=new on(Qe);return this.Mr.forEachWhile(p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(m=m.add(p.Cr)),!0)},d),se.resolve(this.Br(m))}Br(e){const n=[];return e.forEach(s=>{const o=this.Or(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){Et(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return se.forEach(n.mutations,o=>{const c=new fn(o.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Mr=s})}qn(e){}containsKey(e,n){const s=new fn(n,0),o=this.Mr.firstAfterOrEqual(s);return se.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e){this.kr=e,this.docs=function(){return new jt(Ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),c=o?o.size:0,d=this.kr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return se.resolve(s?s.document.mutableCopy():Nn.newInvalidDocument(n))}getEntries(e,n){let s=Gr();return n.forEach(o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():Nn.newInvalidDocument(o))}),se.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let c=Gr();const d=n.path,m=new Ne(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:y,value:{document:T}}=p.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||QN(KN(T),s)<=0||(o.has(T.key)||od(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return se.resolve(c)}getAllFromCollectionGroup(e,n,s,o){je()}qr(e,n){return se.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new v2(this)}getSize(e){return se.resolve(this.size)}}class v2 extends h2{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Ir.addEntry(e,o)):this.Ir.removeEntry(s)}),se.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e){this.persistence=e,this.Qr=new Ca(n=>Gp(n),$p),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Zp,this.targetCount=0,this.Kr=Po.Un()}forEachTarget(e,n){return this.Qr.forEach((s,o)=>n(o)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.$r&&(this.$r=n),se.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Kr=new Po(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.zn(n),se.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,s){let o=0;const c=[];return this.Qr.forEach((d,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.Qr.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),se.waitFor(c).next(()=>o)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const s=this.Qr.get(n)||null;return se.resolve(s)}addMatchingKeys(e,n,s){return this.Ur.yr(n,s),se.resolve()}removeMatchingKeys(e,n,s){this.Ur.Sr(n,s);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach(d=>{c.push(o.markPotentiallyOrphaned(e,d))}),se.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.Ur.br(n),se.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Ur.vr(n);return se.resolve(s)}containsKey(e,n){return se.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new id(0),this.zr=!1,this.zr=!0,this.jr=new g2,this.referenceDelegate=e(this),this.Hr=new E2(this),this.indexManager=new r2,this.remoteDocumentCache=function(o){return new _2(o)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new n2(n),this.Yr=new m2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new p2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Wr[e.toKey()];return s||(s=new y2(n,this.referenceDelegate),this.Wr[e.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,s){Te("MemoryPersistence","Starting transaction:",e);const o=new T2(this.Gr.next());return this.referenceDelegate.Zr(),s(o).next(c=>this.referenceDelegate.Xr(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}ei(e,n){return se.or(Object.values(this.Wr).map(s=>()=>s.containsKey(e,n)))}}class T2 extends XN{constructor(e){super(),this.currentSequenceNumber=e}}class Jp{constructor(e){this.persistence=e,this.ti=new Zp,this.ni=null}static ri(e){return new Jp(e)}get ii(){if(this.ni)return this.ni;throw je()}addReference(e,n,s){return this.ti.addReference(s,n),this.ii.delete(s.toString()),se.resolve()}removeReference(e,n,s){return this.ti.removeReference(s,n),this.ii.add(s.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),se.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(o=>this.ii.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(c=>this.ii.add(c.toString()))}).next(()=>s.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.ii,s=>{const o=Ne.fromPath(s);return this.si(e,o).next(c=>{c||n.removeEntry(o,Le.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(s=>{s?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return se.or([()=>se.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class qh{constructor(e,n){this.persistence=e,this.oi=new Ca(s=>JN(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=u2(this,n)}static ri(e,n){return new qh(e,n)}Zr(){}Xr(e){return se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}sr(e){let n=0;return this.rr(e,s=>{n++}).next(()=>n)}rr(e,n){return se.forEach(this.oi,(s,o)=>this.ar(e,s,o).next(c=>c?se.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.qr(e,d=>this.ar(e,d,n).next(m=>{m||(s++,c.removeEntry(d,Le.min()))})).next(()=>c.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),se.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.oi.set(s,e.currentSequenceNumber),se.resolve()}removeReference(e,n,s){return this.oi.set(s,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),se.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Eh(e.data.value)),n}ar(e,n,s){return se.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.oi.get(n);return se.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Hi=s,this.Ji=o}static Yi(e,n){let s=it(),o=it();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new eg(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return r1()?8:WN(Dn())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,s,o){const c={result:null};return this.rs(e,n).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.ss(e,n,o,s).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new b2;return this._s(e,n,d).next(m=>{if(c.result=m,this.Xi)return this.us(e,n,d,m.size)})}).next(()=>c.result)}us(e,n,s,o){return s.documentReadCount<this.es?(To()<=nt.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",bo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),se.resolve()):(To()<=nt.DEBUG&&Te("QueryEngine","Query:",bo(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ts*o?(To()<=nt.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",bo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nr(n))):se.resolve())}rs(e,n){if($0(n))return se.resolve(null);let s=nr(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=Lh(n,null,"F"),s=nr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const d=it(...c);return this.ns.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,s).next(p=>{const y=this.cs(n,m);return this.ls(n,y,d,p.readTime)?this.rs(e,Lh(n,null,"F")):this.hs(e,y,n,p)}))})))}ss(e,n,s,o){return $0(n)||o.isEqual(Le.min())?se.resolve(null):this.ns.getDocuments(e,s).next(c=>{const d=this.cs(n,c);return this.ls(n,d,s,o)?se.resolve(null):(To()<=nt.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),bo(n)),this.hs(e,d,n,$N(o,mc)).next(m=>m))})}cs(e,n){let s=new on(Eb(e));return n.forEach((o,c)=>{od(e,c)&&(s=s.add(c))}),s}ls(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}_s(e,n,s){return To()<=nt.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",bo(n)),this.ns.getDocumentsMatchingQuery(e,n,Cs.min(),s)}hs(e,n,s,o){return this.ns.getDocumentsMatchingQuery(e,s,o).next(c=>(n.forEach(d=>{c=c.insert(d.key,d)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="LocalStore",A2=3e8;class S2{constructor(e,n,s,o){this.persistence=e,this.Ps=n,this.serializer=o,this.Ts=new jt(Qe),this.Is=new Ca(c=>Gp(c),$p),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(s)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new f2(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function R2(r,e,n,s){return new S2(r,e,n,s)}async function Fb(r,e){const n=Be(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(c=>(o=c,n.As(e),n.mutationQueue.getAllMutationBatches(s))).next(c=>{const d=[],m=[];let p=it();for(const y of o){d.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}for(const y of c){m.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}return n.localDocuments.getDocuments(s,p).next(y=>({Rs:y,removedBatchIds:d,addedBatchIds:m}))})})}function I2(r,e){const n=Be(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),c=n.ds.newChangeBuffer({trackRemovals:!0});return function(m,p,y,T){const A=y.batch,S=A.keys();let P=se.resolve();return S.forEach(U=>{P=P.next(()=>T.getEntry(p,U)).next(q=>{const z=y.docVersions.get(U);Et(z!==null),q.version.compareTo(z)<0&&(A.applyToRemoteDocument(q,y),q.isValidDocument()&&(q.setReadTime(y.commitVersion),T.addEntry(q)))})}),P.next(()=>m.mutationQueue.removeMutationBatch(p,A))}(n,s,e,c).next(()=>c.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let p=it();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(p=p.add(m.batch.mutations[y].key));return p}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function Gb(r){const e=Be(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function x2(r,e){const n=Be(r),s=e.snapshotVersion;let o=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=n.ds.newChangeBuffer({trackRemovals:!0});o=n.Ts;const m=[];e.targetChanges.forEach((T,A)=>{const S=o.get(A);if(!S)return;m.push(n.Hr.removeMatchingKeys(c,T.removedDocuments,A).next(()=>n.Hr.addMatchingKeys(c,T.addedDocuments,A)));let P=S.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(A)!==null?P=P.withResumeToken(wn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):T.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(T.resumeToken,s)),o=o.insert(A,P),function(q,z,Y){return q.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=A2?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0}(S,P,T)&&m.push(n.Hr.updateTargetData(c,P))});let p=Gr(),y=it();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))}),m.push(N2(c,d,e.documentUpdates).next(T=>{p=T.Vs,y=T.fs})),!s.isEqual(Le.min())){const T=n.Hr.getLastRemoteSnapshotVersion(c).next(A=>n.Hr.setTargetsMetadata(c,c.currentSequenceNumber,s));m.push(T)}return se.waitFor(m).next(()=>d.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,p,y)).next(()=>p)}).then(c=>(n.Ts=o,c))}function N2(r,e,n){let s=it(),o=it();return n.forEach(c=>s=s.add(c)),e.getEntries(r,s).next(c=>{let d=Gr();return n.forEach((m,p)=>{const y=c.get(m);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Le.min())?(e.removeEntry(m,p.readTime),d=d.insert(m,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),d=d.insert(m,p)):Te(tg,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",p.version)}),{Vs:d,fs:o}})}function C2(r,e){const n=Be(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=qp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function D2(r,e){const n=Be(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Hr.getTargetData(s,e).next(c=>c?(o=c,se.resolve(o)):n.Hr.allocateTargetId(s).next(d=>(o=new As(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Hr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.Ts.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(s.targetId,s),n.Is.set(e,s.targetId)),s})}async function fp(r,e,n){const s=Be(r),o=s.Ts.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,d=>s.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!Ho(d))throw d;Te(tg,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ts=s.Ts.remove(e),s.Is.delete(o.target)}function sE(r,e,n){const s=Be(r);let o=Le.min(),c=it();return s.persistence.runTransaction("Execute query","readwrite",d=>function(p,y,T){const A=Be(p),S=A.Is.get(T);return S!==void 0?se.resolve(A.Ts.get(S)):A.Hr.getTargetData(y,T)}(s,d,nr(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(d,m.targetId).next(p=>{c=p})}).next(()=>s.Ps.getDocumentsMatchingQuery(d,e,n?o:Le.min(),n?c:it())).next(m=>(O2(s,_C(e),m),{documents:m,gs:c})))}function O2(r,e,n){let s=r.Es.get(e)||Le.min();n.forEach((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),r.Es.set(e,s)}class aE{constructor(){this.activeTargetIds=AC()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class k2{constructor(){this.ho=new aE,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,s){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new aE,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="ConnectivityMonitor";class lE{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Te(oE,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){Te(oE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hh=null;function mp(){return hh===null?hh=function(){return 268435456+Math.round(2147483648*Math.random())}():hh++,"0x"+hh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="RestConnection",M2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class V2{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${s}/databases/${o}`,this.wo=this.databaseId.database===Vh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}So(e,n,s,o,c){const d=mp(),m=this.bo(e,n.toUriEncodedString());Te(Lm,`Sending RPC '${e}' ${d}:`,m,s);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,o,c),this.vo(e,m,p,s).then(y=>(Te(Lm,`Received RPC '${e}' ${d}: `,y),y),y=>{throw Co(Lm,`RPC '${e}' ${d} failed with error: `,y,"url: ",m,"request:",s),y})}Co(e,n,s,o,c,d){return this.So(e,n,s,o,c)}Do(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,c)=>e[c]=o),s&&s.headers.forEach((o,c)=>e[c]=o)}bo(e,n){const s=M2[e];return`${this.po}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In="WebChannelConnection";class U2 extends V2{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,s,o){const c=mp();return new Promise((d,m)=>{const p=new QT;p.setWithCredentials(!0),p.listenOnce(YT.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case vh.NO_ERROR:const T=p.getResponseJson();Te(In,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),d(T);break;case vh.TIMEOUT:Te(In,`RPC '${e}' ${c} timed out`),m(new Ee(ne.DEADLINE_EXCEEDED,"Request time out"));break;case vh.HTTP_ERROR:const A=p.getStatus();if(Te(In,`RPC '${e}' ${c} failed with status:`,A,"response text:",p.getResponseText()),A>0){let S=p.getResponseJson();Array.isArray(S)&&(S=S[0]);const P=S==null?void 0:S.error;if(P&&P.status&&P.message){const U=function(z){const Y=z.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(Y)>=0?Y:ne.UNKNOWN}(P.status);m(new Ee(U,P.message))}else m(new Ee(ne.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new Ee(ne.UNAVAILABLE,"Connection failed."));break;default:je()}}finally{Te(In,`RPC '${e}' ${c} completed.`)}});const y=JSON.stringify(o);Te(In,`RPC '${e}' ${c} sending request:`,o),p.send(n,"POST",y,s,15)})}Wo(e,n,s){const o=mp(),c=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=ZT(),m=WT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const T=c.join("");Te(In,`Creating RPC '${e}' stream ${o}: ${T}`,p);const A=d.createWebChannel(T,p);let S=!1,P=!1;const U=new j2({Fo:z=>{P?Te(In,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(S||(Te(In,`Opening RPC '${e}' stream ${o} transport.`),A.open(),S=!0),Te(In,`RPC '${e}' stream ${o} sending:`,z),A.send(z))},Mo:()=>A.close()}),q=(z,Y,ae)=>{z.listen(Y,W=>{try{ae(W)}catch(de){setTimeout(()=>{throw de},0)}})};return q(A,Jl.EventType.OPEN,()=>{P||(Te(In,`RPC '${e}' stream ${o} transport opened.`),U.Qo())}),q(A,Jl.EventType.CLOSE,()=>{P||(P=!0,Te(In,`RPC '${e}' stream ${o} transport closed`),U.Uo())}),q(A,Jl.EventType.ERROR,z=>{P||(P=!0,Co(In,`RPC '${e}' stream ${o} transport errored:`,z),U.Uo(new Ee(ne.UNAVAILABLE,"The operation could not be completed")))}),q(A,Jl.EventType.MESSAGE,z=>{var Y;if(!P){const ae=z.data[0];Et(!!ae);const W=ae,de=(W==null?void 0:W.error)||((Y=W[0])===null||Y===void 0?void 0:Y.error);if(de){Te(In,`RPC '${e}' stream ${o} received error:`,de);const ce=de.status;let le=function(I){const O=Xt[I];if(O!==void 0)return Ob(O)}(ce),x=de.message;le===void 0&&(le=ne.INTERNAL,x="Unknown error status: "+ce+" with message "+de.message),P=!0,U.Uo(new Ee(le,x)),A.close()}else Te(In,`RPC '${e}' stream ${o} received:`,ae),U.Ko(ae)}}),q(m,XT.STAT_EVENT,z=>{z.stat===tp.PROXY?Te(In,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===tp.NOPROXY&&Te(In,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{U.$o()},0),U}}function zm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(r){return new qC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,n,s=1e3,o=1.5,c=6e4){this.Ti=e,this.timerId=n,this.Go=s,this.zo=o,this.jo=c,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),o=Math.max(0,n-s);o>0&&Te("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="PersistentStream";class Kb{constructor(e,n,s,o,c,d,m,p){this.Ti=e,this.n_=s,this.r_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new $b(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(Fr(n.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.i_===n&&this.V_(s,o)},s=>{e(()=>{const o=new Ee(ne.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(o)})})}V_(e,n){const s=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{s(()=>this.m_(o))}),this.stream.onMessage(o=>{s(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return Te(cE,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(Te(cE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class L2 extends Kb{constructor(e,n,s,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=c}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=GC(this.serializer,e),s=function(c){if(!("targetChange"in c))return Le.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Le.min():d.readTime?ir(d.readTime):Le.min()}(e);return this.listener.p_(n,s)}y_(e){const n={};n.database=dp(this.serializer),n.addTarget=function(c,d){let m;const p=d.target;if(m=op(p)?{documents:QC(c,p)}:{query:YC(c,p).ht},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=Mb(c,d.resumeToken);const y=cp(c,d.expectedCount);y!==null&&(m.expectedCount=y)}else if(d.snapshotVersion.compareTo(Le.min())>0){m.readTime=Bh(c,d.snapshotVersion.toTimestamp());const y=cp(c,d.expectedCount);y!==null&&(m.expectedCount=y)}return m}(this.serializer,e);const s=WC(this.serializer,e);s&&(n.labels=s),this.I_(n)}w_(e){const n={};n.database=dp(this.serializer),n.removeTarget=e,this.I_(n)}}class z2 extends Kb{constructor(e,n,s,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=c}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return Et(!!e.streamToken),this.lastStreamToken=e.streamToken,Et(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=KC(e.writeResults,e.commitTime),s=ir(e.commitTime);return this.listener.v_(s,n)}C_(){const e={};e.database=dp(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>$C(this.serializer,s))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{}class q2 extends B2{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new Ee(ne.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.So(e,up(n,s),o,c,d)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ee(ne.UNKNOWN,c.toString())})}Co(e,n,s,o,c){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Co(e,up(n,s),o,d,m,c)).catch(d=>{throw d.name==="FirebaseError"?(d.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Ee(ne.UNKNOWN,d.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class H2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Fr(n),this.N_=!1):Te("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia="RemoteStore";class F2{constructor(e,n,s,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=c,this.z_.To(d=>{s.enqueueAndForget(async()=>{Da(this)&&(Te(Ia,"Restarting streams for network reachability change."),await async function(p){const y=Be(p);y.W_.add(4),await kc(y),y.j_.set("Unknown"),y.W_.delete(4),await fd(y)}(this))})}),this.j_=new H2(s,o)}}async function fd(r){if(Da(r))for(const e of r.G_)await e(!0)}async function kc(r){for(const e of r.G_)await e(!1)}function Qb(r,e){const n=Be(r);n.K_.has(e.targetId)||(n.K_.set(e.targetId,e),sg(n)?rg(n):Go(n).c_()&&ig(n,e))}function ng(r,e){const n=Be(r),s=Go(n);n.K_.delete(e),s.c_()&&Yb(n,e),n.K_.size===0&&(s.c_()?s.P_():Da(n)&&n.j_.set("Unknown"))}function ig(r,e){if(r.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Go(r).y_(e)}function Yb(r,e){r.H_.Ne(e),Go(r).w_(e)}function rg(r){r.H_=new UC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>r.K_.get(e)||null,it:()=>r.datastore.serializer.databaseId}),Go(r).start(),r.j_.B_()}function sg(r){return Da(r)&&!Go(r).u_()&&r.K_.size>0}function Da(r){return Be(r).W_.size===0}function Xb(r){r.H_=void 0}async function G2(r){r.j_.set("Online")}async function $2(r){r.K_.forEach((e,n)=>{ig(r,e)})}async function K2(r,e){Xb(r),sg(r)?(r.j_.q_(e),rg(r)):r.j_.set("Unknown")}async function Q2(r,e,n){if(r.j_.set("Online"),e instanceof Pb&&e.state===2&&e.cause)try{await async function(o,c){const d=c.cause;for(const m of c.targetIds)o.K_.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.K_.delete(m),o.H_.removeTarget(m))}(r,e)}catch(s){Te(Ia,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Hh(r,s)}else if(e instanceof wh?r.H_.We(e):e instanceof kb?r.H_.Ze(e):r.H_.je(e),!n.isEqual(Le.min()))try{const s=await Gb(r.localStore);n.compareTo(s)>=0&&await function(c,d){const m=c.H_.ot(d);return m.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const T=c.K_.get(y);T&&c.K_.set(y,T.withResumeToken(p.resumeToken,d))}}),m.targetMismatches.forEach((p,y)=>{const T=c.K_.get(p);if(!T)return;c.K_.set(p,T.withResumeToken(wn.EMPTY_BYTE_STRING,T.snapshotVersion)),Yb(c,p);const A=new As(T.target,p,y,T.sequenceNumber);ig(c,A)}),c.remoteSyncer.applyRemoteEvent(m)}(r,n)}catch(s){Te(Ia,"Failed to raise snapshot:",s),await Hh(r,s)}}async function Hh(r,e,n){if(!Ho(e))throw e;r.W_.add(1),await kc(r),r.j_.set("Offline"),n||(n=()=>Gb(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{Te(Ia,"Retrying IndexedDB access"),await n(),r.W_.delete(1),await fd(r)})}function Wb(r,e){return e().catch(n=>Hh(r,n,e))}async function md(r){const e=Be(r),n=Ps(e);let s=e.U_.length>0?e.U_[e.U_.length-1].batchId:qp;for(;Y2(e);)try{const o=await C2(e.localStore,s);if(o===null){e.U_.length===0&&n.P_();break}s=o.batchId,X2(e,o)}catch(o){await Hh(e,o)}Zb(e)&&Jb(e)}function Y2(r){return Da(r)&&r.U_.length<10}function X2(r,e){r.U_.push(e);const n=Ps(r);n.c_()&&n.S_&&n.b_(e.mutations)}function Zb(r){return Da(r)&&!Ps(r).u_()&&r.U_.length>0}function Jb(r){Ps(r).start()}async function W2(r){Ps(r).C_()}async function Z2(r){const e=Ps(r);for(const n of r.U_)e.b_(n.mutations)}async function J2(r,e,n){const s=r.U_.shift(),o=Yp.from(s,e,n);await Wb(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await md(r)}async function eD(r,e){e&&Ps(r).S_&&await async function(s,o){if(function(d){return VC(d)&&d!==ne.ABORTED}(o.code)){const c=s.U_.shift();Ps(s).h_(),await Wb(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o)),await md(s)}}(r,e),Zb(r)&&Jb(r)}async function uE(r,e){const n=Be(r);n.asyncQueue.verifyOperationInProgress(),Te(Ia,"RemoteStore received new credentials");const s=Da(n);n.W_.add(3),await kc(n),s&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await fd(n)}async function tD(r,e){const n=Be(r);e?(n.W_.delete(2),await fd(n)):e||(n.W_.add(2),await kc(n),n.j_.set("Unknown"))}function Go(r){return r.J_||(r.J_=function(n,s,o){const c=Be(n);return c.M_(),new L2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(r.datastore,r.asyncQueue,{xo:G2.bind(null,r),No:$2.bind(null,r),Lo:K2.bind(null,r),p_:Q2.bind(null,r)}),r.G_.push(async e=>{e?(r.J_.h_(),sg(r)?rg(r):r.j_.set("Unknown")):(await r.J_.stop(),Xb(r))})),r.J_}function Ps(r){return r.Y_||(r.Y_=function(n,s,o){const c=Be(n);return c.M_(),new z2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(r.datastore,r.asyncQueue,{xo:()=>Promise.resolve(),No:W2.bind(null,r),Lo:eD.bind(null,r),D_:Z2.bind(null,r),v_:J2.bind(null,r)}),r.G_.push(async e=>{e?(r.Y_.h_(),await md(r)):(await r.Y_.stop(),r.U_.length>0&&(Te(Ia,`Stopping write stream with ${r.U_.length} pending writes`),r.U_=[]))})),r.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,n,s,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,c){const d=Date.now()+s,m=new ag(e,n,d,o,c);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function og(r,e){if(Fr("AsyncQueue",`${e}: ${r}`),Ho(r))return new Ee(ne.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{static emptySet(e){return new No(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Ne.comparator(n.key,s.key):(n,s)=>Ne.comparator(n.key,s.key),this.keyedMap=ec(),this.sortedSet=new jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof No)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new No;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(){this.Z_=new jt(Ne.comparator)}track(e){const n=e.doc.key,s=this.Z_.get(n);s?e.type!==0&&s.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&s.type!==1?this.Z_=this.Z_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Z_=this.Z_.remove(n):e.type===1&&s.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):je():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,s)=>{e.push(s)}),e}}class Mo{constructor(e,n,s,o,c,d,m,p,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,o,c){const d=[];return n.forEach(m=>{d.push({type:0,doc:m})}),new Mo(e,n,No.emptySet(n),d,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ad(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class iD{constructor(){this.queries=dE(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,s){const o=Be(n),c=o.queries;o.queries=dE(),c.forEach((d,m)=>{for(const p of m.ta)p.onError(s)})})(this,new Ee(ne.ABORTED,"Firestore shutting down"))}}function dE(){return new Ca(r=>vb(r),ad)}async function ew(r,e){const n=Be(r);let s=3;const o=e.query;let c=n.queries.get(o);c?!c.na()&&e.ra()&&(s=2):(c=new nD,s=e.ra()?0:1);try{switch(s){case 0:c.ea=await n.onListen(o,!0);break;case 1:c.ea=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const m=og(d,`Initialization of query '${bo(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,c),c.ta.push(e),e.sa(n.onlineState),c.ea&&e.oa(c.ea)&&lg(n)}async function tw(r,e){const n=Be(r),s=e.query;let o=3;const c=n.queries.get(s);if(c){const d=c.ta.indexOf(e);d>=0&&(c.ta.splice(d,1),c.ta.length===0?o=e.ra()?0:1:!c.na()&&e.ra()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function rD(r,e){const n=Be(r);let s=!1;for(const o of e){const c=o.query,d=n.queries.get(c);if(d){for(const m of d.ta)m.oa(o)&&(s=!0);d.ea=o}}s&&lg(n)}function sD(r,e,n){const s=Be(r),o=s.queries.get(e);if(o)for(const c of o.ta)c.onError(n);s.queries.delete(e)}function lg(r){r.ia.forEach(e=>{e.next()})}var pp,fE;(fE=pp||(pp={}))._a="default",fE.Cache="cache";class nw{constructor(e,n,s){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Mo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const s=n!=="Offline";return(!this.options.Ta||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=Mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==pp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e){this.key=e}}class rw{constructor(e){this.key=e}}class aD{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=it(),this.mutatedKeys=it(),this.ya=Eb(e),this.wa=new No(this.ya)}get Sa(){return this.fa}ba(e,n){const s=n?n.Da:new hE,o=n?n.wa:this.wa;let c=n?n.mutatedKeys:this.mutatedKeys,d=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((T,A)=>{const S=o.get(T),P=od(this.query,A)?A:null,U=!!S&&this.mutatedKeys.has(S.key),q=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let z=!1;S&&P?S.data.isEqual(P.data)?U!==q&&(s.track({type:3,doc:P}),z=!0):this.va(S,P)||(s.track({type:2,doc:P}),z=!0,(p&&this.ya(P,p)>0||y&&this.ya(P,y)<0)&&(m=!0)):!S&&P?(s.track({type:0,doc:P}),z=!0):S&&!P&&(s.track({type:1,doc:S}),z=!0,(p||y)&&(m=!0)),z&&(P?(d=d.add(P),c=q?c.add(T):c.delete(T)):(d=d.delete(T),c=c.delete(T)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),c=c.delete(T.key),s.track({type:1,doc:T})}return{wa:d,Da:s,ls:m,mutatedKeys:c}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const c=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const d=e.Da.X_();d.sort((T,A)=>function(P,U){const q=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je()}};return q(P)-q(U)}(T.type,A.type)||this.ya(T.doc,A.doc)),this.Ca(s),o=o!=null&&o;const m=n&&!o?this.Fa():[],p=this.pa.size===0&&this.current&&!o?1:0,y=p!==this.ga;return this.ga=p,d.length!==0||y?{snapshot:new Mo(this.query,e.wa,c,d,e.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:m}:{Ma:m}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new hE,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=it(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const n=[];return e.forEach(s=>{this.pa.has(s)||n.push(new rw(s))}),this.pa.forEach(s=>{e.has(s)||n.push(new iw(s))}),n}Oa(e){this.fa=e.gs,this.pa=it();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return Mo.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const cg="SyncEngine";class oD{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class lD{constructor(e){this.key=e,this.Ba=!1}}class cD{constructor(e,n,s,o,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.La={},this.ka=new Ca(m=>vb(m),ad),this.qa=new Map,this.Qa=new Set,this.$a=new jt(Ne.comparator),this.Ua=new Map,this.Ka=new Zp,this.Wa={},this.Ga=new Map,this.za=Po.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function uD(r,e,n=!0){const s=uw(r);let o;const c=s.ka.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.Na()):o=await sw(s,e,n,!0),o}async function hD(r,e){const n=uw(r);await sw(n,e,!0,!1)}async function sw(r,e,n,s){const o=await D2(r.localStore,nr(e)),c=o.targetId,d=r.sharedClientState.addLocalQueryTarget(c,n);let m;return s&&(m=await dD(r,e,c,d==="current",o.resumeToken)),r.isPrimaryClient&&n&&Qb(r.remoteStore,o),m}async function dD(r,e,n,s,o){r.Ha=(A,S,P)=>async function(q,z,Y,ae){let W=z.view.ba(Y);W.ls&&(W=await sE(q.localStore,z.query,!1).then(({documents:x})=>z.view.ba(x,W)));const de=ae&&ae.targetChanges.get(z.targetId),ce=ae&&ae.targetMismatches.get(z.targetId)!=null,le=z.view.applyChanges(W,q.isPrimaryClient,de,ce);return pE(q,z.targetId,le.Ma),le.snapshot}(r,A,S,P);const c=await sE(r.localStore,e,!0),d=new aD(e,c.gs),m=d.ba(c.documents),p=Oc.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),y=d.applyChanges(m,r.isPrimaryClient,p);pE(r,n,y.Ma);const T=new oD(e,n,d);return r.ka.set(e,T),r.qa.has(n)?r.qa.get(n).push(e):r.qa.set(n,[e]),y.snapshot}async function fD(r,e,n){const s=Be(r),o=s.ka.get(e),c=s.qa.get(o.targetId);if(c.length>1)return s.qa.set(o.targetId,c.filter(d=>!ad(d,e))),void s.ka.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await fp(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&ng(s.remoteStore,o.targetId),gp(s,o.targetId)}).catch(qo)):(gp(s,o.targetId),await fp(s.localStore,o.targetId,!0))}async function mD(r,e){const n=Be(r),s=n.ka.get(e),o=n.qa.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),ng(n.remoteStore,s.targetId))}async function pD(r,e,n){const s=bD(r);try{const o=await function(d,m){const p=Be(d),y=an.now(),T=m.reduce((P,U)=>P.add(U.key),it());let A,S;return p.persistence.runTransaction("Locally write mutations","readwrite",P=>{let U=Gr(),q=it();return p.ds.getEntries(P,T).next(z=>{U=z,U.forEach((Y,ae)=>{ae.isValidDocument()||(q=q.add(Y))})}).next(()=>p.localDocuments.getOverlayedDocuments(P,U)).next(z=>{A=z;const Y=[];for(const ae of m){const W=DC(ae,A.get(ae.key).overlayedDocument);W!=null&&Y.push(new zs(ae.key,W,hb(W.value.mapValue),Vn.exists(!0)))}return p.mutationQueue.addMutationBatch(P,y,Y,m)}).next(z=>{S=z;const Y=z.applyToLocalDocumentSet(A,q);return p.documentOverlayCache.saveOverlays(P,z.batchId,Y)})}).then(()=>({batchId:S.batchId,changes:bb(A)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(d,m,p){let y=d.Wa[d.currentUser.toKey()];y||(y=new jt(Qe)),y=y.insert(m,p),d.Wa[d.currentUser.toKey()]=y}(s,o.batchId,n),await Pc(s,o.changes),await md(s.remoteStore)}catch(o){const c=og(o,"Failed to persist write");n.reject(c)}}async function aw(r,e){const n=Be(r);try{const s=await x2(n.localStore,e);e.targetChanges.forEach((o,c)=>{const d=n.Ua.get(c);d&&(Et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.Ba=!0:o.modifiedDocuments.size>0?Et(d.Ba):o.removedDocuments.size>0&&(Et(d.Ba),d.Ba=!1))}),await Pc(n,s,e)}catch(s){await qo(s)}}function mE(r,e,n){const s=Be(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.ka.forEach((c,d)=>{const m=d.view.sa(e);m.snapshot&&o.push(m.snapshot)}),function(d,m){const p=Be(d);p.onlineState=m;let y=!1;p.queries.forEach((T,A)=>{for(const S of A.ta)S.sa(m)&&(y=!0)}),y&&lg(p)}(s.eventManager,e),o.length&&s.La.p_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function gD(r,e,n){const s=Be(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Ua.get(e),c=o&&o.key;if(c){let d=new jt(Ne.comparator);d=d.insert(c,Nn.newNoDocument(c,Le.min()));const m=it().add(c),p=new hd(Le.min(),new Map,new jt(Qe),d,m);await aw(s,p),s.$a=s.$a.remove(c),s.Ua.delete(e),ug(s)}else await fp(s.localStore,e,!1).then(()=>gp(s,e,n)).catch(qo)}async function yD(r,e){const n=Be(r),s=e.batch.batchId;try{const o=await I2(n.localStore,e);lw(n,s,null),ow(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Pc(n,o)}catch(o){await qo(o)}}async function _D(r,e,n){const s=Be(r);try{const o=await function(d,m){const p=Be(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let T;return p.mutationQueue.lookupMutationBatch(y,m).next(A=>(Et(A!==null),T=A.keys(),p.mutationQueue.removeMutationBatch(y,A))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,T,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T)).next(()=>p.localDocuments.getDocuments(y,T))})}(s.localStore,e);lw(s,e,n),ow(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Pc(s,o)}catch(o){await qo(o)}}function ow(r,e){(r.Ga.get(e)||[]).forEach(n=>{n.resolve()}),r.Ga.delete(e)}function lw(r,e,n){const s=Be(r);let o=s.Wa[s.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),s.Wa[s.currentUser.toKey()]=o}}function gp(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.qa.get(e))r.ka.delete(s),n&&r.La.Ja(s,n);r.qa.delete(e),r.isPrimaryClient&&r.Ka.br(e).forEach(s=>{r.Ka.containsKey(s)||cw(r,s)})}function cw(r,e){r.Qa.delete(e.path.canonicalString());const n=r.$a.get(e);n!==null&&(ng(r.remoteStore,n),r.$a=r.$a.remove(e),r.Ua.delete(n),ug(r))}function pE(r,e,n){for(const s of n)s instanceof iw?(r.Ka.addReference(s.key,e),vD(r,s)):s instanceof rw?(Te(cg,"Document no longer in limbo: "+s.key),r.Ka.removeReference(s.key,e),r.Ka.containsKey(s.key)||cw(r,s.key)):je()}function vD(r,e){const n=e.key,s=n.path.canonicalString();r.$a.get(n)||r.Qa.has(s)||(Te(cg,"New document in limbo: "+n),r.Qa.add(s),ug(r))}function ug(r){for(;r.Qa.size>0&&r.$a.size<r.maxConcurrentLimboResolutions;){const e=r.Qa.values().next().value;r.Qa.delete(e);const n=new Ne(kt.fromString(e)),s=r.za.next();r.Ua.set(s,new lD(n)),r.$a=r.$a.insert(n,s),Qb(r.remoteStore,new As(nr(Kp(n.path)),s,"TargetPurposeLimboResolution",id.ae))}}async function Pc(r,e,n){const s=Be(r),o=[],c=[],d=[];s.ka.isEmpty()||(s.ka.forEach((m,p)=>{d.push(s.Ha(p,e,n).then(y=>{var T;if((y||n)&&s.isPrimaryClient){const A=y?!y.fromCache:(T=n==null?void 0:n.targetChanges.get(p.targetId))===null||T===void 0?void 0:T.current;s.sharedClientState.updateQueryState(p.targetId,A?"current":"not-current")}if(y){o.push(y);const A=eg.Yi(p.targetId,y);c.push(A)}}))}),await Promise.all(d),s.La.p_(o),await async function(p,y){const T=Be(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>se.forEach(y,S=>se.forEach(S.Hi,P=>T.persistence.referenceDelegate.addReference(A,S.targetId,P)).next(()=>se.forEach(S.Ji,P=>T.persistence.referenceDelegate.removeReference(A,S.targetId,P)))))}catch(A){if(!Ho(A))throw A;Te(tg,"Failed to update sequence numbers: "+A)}for(const A of y){const S=A.targetId;if(!A.fromCache){const P=T.Ts.get(S),U=P.snapshotVersion,q=P.withLastLimboFreeSnapshotVersion(U);T.Ts=T.Ts.insert(S,q)}}}(s.localStore,c))}async function ED(r,e){const n=Be(r);if(!n.currentUser.isEqual(e)){Te(cg,"User change. New user:",e.toKey());const s=await Fb(n.localStore,e);n.currentUser=e,function(c,d){c.Ga.forEach(m=>{m.forEach(p=>{p.reject(new Ee(ne.CANCELLED,d))})}),c.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Pc(n,s.Rs)}}function TD(r,e){const n=Be(r),s=n.Ua.get(e);if(s&&s.Ba)return it().add(s.key);{let o=it();const c=n.qa.get(e);if(!c)return o;for(const d of c){const m=n.ka.get(d);o=o.unionWith(m.view.Sa)}return o}}function uw(r){const e=Be(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=aw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gD.bind(null,e),e.La.p_=rD.bind(null,e.eventManager),e.La.Ja=sD.bind(null,e.eventManager),e}function bD(r){const e=Be(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_D.bind(null,e),e}class Fh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dd(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return R2(this.persistence,new w2,e.initialUser,this.serializer)}Xa(e){return new Hb(Jp.ri,this.serializer)}Za(e){return new k2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fh.provider={build:()=>new Fh};class wD extends Fh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){Et(this.persistence.referenceDelegate instanceof qh);const s=this.persistence.referenceDelegate.garbageCollector;return new l2(s,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new Hb(s=>qh.ri(s,n),this.serializer)}}class yp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>mE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=ED.bind(null,this.syncEngine),await tD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new iD}()}createDatastore(e){const n=dd(e.databaseInfo.databaseId),s=function(c){return new U2(c)}(e.databaseInfo);return function(c,d,m,p){return new q2(c,d,m,p)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,c,d,m){return new F2(s,o,c,d,m)}(this.localStore,this.datastore,e.asyncQueue,n=>mE(this.syncEngine,n,0),function(){return lE.D()?new lE:new P2}())}createSyncEngine(e,n){return function(o,c,d,m,p,y,T){const A=new cD(o,c,d,m,p,y);return T&&(A.ja=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const c=Be(o);Te(Ia,"RemoteStore shutting down."),c.W_.add(5),await kc(c),c.z_.shutdown(),c.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}yp.provider={build:()=>new yp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Fr("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="FirestoreClient";class AD{constructor(e,n,s,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=xn.UNAUTHENTICATED,this.clientId=tb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async d=>{Te(Ms,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(Te(Ms,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=og(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Bm(r,e){r.asyncQueue.verifyOperationInProgress(),Te(Ms,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await Fb(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function gE(r,e){r.asyncQueue.verifyOperationInProgress();const n=await SD(r);Te(Ms,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener(s=>uE(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>uE(e.remoteStore,o)),r._onlineComponents=e}async function SD(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Te(Ms,"Using user provided OfflineComponentProvider");try{await Bm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===ne.FAILED_PRECONDITION||o.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;Co("Error using user provided cache. Falling back to memory cache: "+n),await Bm(r,new Fh)}}else Te(Ms,"Using default OfflineComponentProvider"),await Bm(r,new wD(void 0));return r._offlineComponents}async function dw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Te(Ms,"Using user provided OnlineComponentProvider"),await gE(r,r._uninitializedComponentsProvider._online)):(Te(Ms,"Using default OnlineComponentProvider"),await gE(r,new yp))),r._onlineComponents}function RD(r){return dw(r).then(e=>e.syncEngine)}async function fw(r){const e=await dw(r),n=e.eventManager;return n.onListen=uD.bind(null,e.syncEngine),n.onUnlisten=fD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=hD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=mD.bind(null,e.syncEngine),n}function ID(r,e,n={}){const s=new Lr;return r.asyncQueue.enqueueAndForget(async()=>function(c,d,m,p,y){const T=new hw({next:S=>{T.su(),d.enqueueAndForget(()=>tw(c,A));const P=S.docs.has(m);!P&&S.fromCache?y.reject(new Ee(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&p&&p.source==="server"?y.reject(new Ee(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),A=new nw(Kp(m.path),T,{includeMetadataChanges:!0,Ta:!0});return ew(c,A)}(await fw(r),r.asyncQueue,e,n,s)),s.promise}function xD(r,e,n={}){const s=new Lr;return r.asyncQueue.enqueueAndForget(async()=>function(c,d,m,p,y){const T=new hw({next:S=>{T.su(),d.enqueueAndForget(()=>tw(c,A)),S.fromCache&&p.source==="server"?y.reject(new Ee(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),A=new nw(m,T,{includeMetadataChanges:!0,Ta:!0});return ew(c,A)}(await fw(r),r.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(r,e,n){if(!n)throw new Ee(ne.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function ND(r,e,n,s){if(e===!0&&s===!0)throw new Ee(ne.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function _E(r){if(!Ne.isDocumentKey(r))throw new Ee(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function vE(r){if(Ne.isDocumentKey(r))throw new Ee(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function pd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":je()}function yi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Ee(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pd(r);throw new Ee(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw="firestore.googleapis.com",EE=!0;class TE{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gw,this.ssl=EE}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:EE;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<a2)throw new Ee(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ND("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mw((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new Ee(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new Ee(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new Ee(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gd{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new jN;switch(s.type){case"firstParty":return new BN(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ee(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=yE.get(n);s&&(Te("ComponentProvider","Removing Datastore"),yE.delete(n),s.terminate())}(this),Promise.resolve()}}function CD(r,e,n,s={}){var o;const c=(r=yi(r,gd))._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:r._getEmulatorOptions()}),m=`${e}:${n}`;c.host!==gw&&c.host!==m&&Co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},c),{host:m,ssl:!1,emulatorOptions:s});if(!ba(p,d)&&(r._setSettings(p),s.mockUserToken)){let y,T;if(typeof s.mockUserToken=="string")y=s.mockUserToken,T=xn.MOCK_USER;else{y=aT(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new Ee(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new xn(A)}r._authCredentials=new UN(new JT(y,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Bs(this.firestore,e,this._query)}}class jn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jn(this.firestore,e,this._key)}}class xs extends Bs{constructor(e,n,s){super(e,n,Kp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jn(this.firestore,null,new Ne(e))}withConverter(e){return new xs(this.firestore,e,this._path)}}function Ot(r,e,...n){if(r=Zt(r),pw("collection","path",e),r instanceof gd){const s=kt.fromString(e,...n);return vE(s),new xs(r,null,s)}{if(!(r instanceof jn||r instanceof xs))throw new Ee(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(kt.fromString(e,...n));return vE(s),new xs(r.firestore,null,s)}}function tt(r,e,...n){if(r=Zt(r),arguments.length===1&&(e=tb.newId()),pw("doc","path",e),r instanceof gd){const s=kt.fromString(e,...n);return _E(s),new jn(r,null,new Ne(s))}{if(!(r instanceof jn||r instanceof xs))throw new Ee(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(kt.fromString(e,...n));return _E(s),new jn(r.firestore,r instanceof xs?r.converter:null,new Ne(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="AsyncQueue";class wE{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new $b(this,"async_queue_retry"),this.Su=()=>{const s=zm();s&&Te(bE,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.bu=e;const n=zm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=zm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Lr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Ho(e))throw e;Te(bE,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(s=>{this.gu=s,this.pu=!1;const o=function(d){let m=d.message||"";return d.stack&&(m=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),m}(s);throw Fr("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.pu=!1,s))));return this.bu=n,n}enqueueAfterDelay(e,n,s){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const o=ag.createAndSchedule(this,e,n,s,c=>this.Fu(c));return this.fu.push(o),o}Du(){this.gu&&je()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}class qs extends gd{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new wE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wE(e),this._firestoreClient=void 0,await e}}}function DD(r,e){const n=typeof r=="object"?r:Dp(),s=typeof r=="string"?r:Vh,o=Jh(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=iT("firestore");c&&CD(o,...c)}return o}function yd(r){if(r._terminated)throw new Ee(ne.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||OD(r),r._firestoreClient}function OD(r){var e,n,s;const o=r._freezeSettings(),c=function(m,p,y,T){return new nC(m,p,y,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,mw(T.experimentalLongPollingOptions),T.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new AD(r._authCredentials,r._appCheckCredentials,r._queue,c,r._componentsProvider&&function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vo(wn.fromBase64String(e))}catch(n){throw new Ee(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vo(wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ee(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function hg(){return new $o(ip)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ee(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ee(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=/^__.*__$/;class PD{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new zs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Dc(e,this.data,n,this.fieldTransforms)}}class yw{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new zs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function _w(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je()}}class mg{constructor(e,n,s,o,c,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this.Bu(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new mg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ku({path:s,Qu:!1});return o.$u(e),o}Uu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ku({path:s,Qu:!1});return o.Bu(),o}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Gh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(_w(this.Lu)&&kD.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class MD{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||dd(e)}ju(e,n,s,o=!1){return new mg({Lu:e,methodName:n,zu:s,path:bn.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mc(r){const e=r._freezeSettings(),n=dd(r._databaseId);return new MD(r._databaseId,!!e.ignoreUndefinedProperties,n)}function pg(r,e,n,s,o,c={}){const d=r.ju(c.merge||c.mergeFields?2:0,e,n,o);yg("Data must be an object, but it was:",d,s);const m=Tw(s,d);let p,y;if(c.merge)p=new ni(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const T=[];for(const A of c.mergeFields){const S=_p(e,A,n);if(!d.contains(S))throw new Ee(ne.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);ww(T,S)||T.push(S)}p=new ni(T),y=d.fieldTransforms.filter(A=>p.covers(A.field))}else p=null,y=d.fieldTransforms;return new PD(new qn(m),p,y)}class vd extends _d{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vd}}class gg extends _d{constructor(e,n){super(e),this.Ju=n}_toFieldTransform(e){const n=new Tc(e.serializer,Sb(e.serializer,this.Ju));return new IC(e.path,n)}isEqual(e){return e instanceof gg&&this.Ju===e.Ju}}function vw(r,e,n,s){const o=r.ju(1,e,n);yg("Data must be an object, but it was:",o,s);const c=[],d=qn.empty();Ls(s,(p,y)=>{const T=_g(e,p,n);y=Zt(y);const A=o.Uu(T);if(y instanceof vd)c.push(T);else{const S=Vc(y,A);S!=null&&(c.push(T),d.set(T,S))}});const m=new ni(c);return new yw(d,m,o.fieldTransforms)}function Ew(r,e,n,s,o,c){const d=r.ju(1,e,n),m=[_p(e,s,n)],p=[o];if(c.length%2!=0)throw new Ee(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<c.length;S+=2)m.push(_p(e,c[S])),p.push(c[S+1]);const y=[],T=qn.empty();for(let S=m.length-1;S>=0;--S)if(!ww(y,m[S])){const P=m[S];let U=p[S];U=Zt(U);const q=d.Uu(P);if(U instanceof vd)y.push(P);else{const z=Vc(U,q);z!=null&&(y.push(P),T.set(P,z))}}const A=new ni(y);return new yw(T,A,d.fieldTransforms)}function VD(r,e,n,s=!1){return Vc(n,r.ju(s?4:3,e))}function Vc(r,e){if(bw(r=Zt(r)))return yg("Unsupported field value:",e,r),Tw(r,e);if(r instanceof _d)return function(s,o){if(!_w(o.Lu))throw o.Wu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(s,o){const c=[];let d=0;for(const m of s){let p=Vc(m,o.Ku(d));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),d++}return{arrayValue:{values:c}}}(r,e)}return function(s,o){if((s=Zt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Sb(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=an.fromDate(s);return{timestampValue:Bh(o.serializer,c)}}if(s instanceof an){const c=new an(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Bh(o.serializer,c)}}if(s instanceof dg)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Vo)return{bytesValue:Mb(o.serializer,s._byteString)};if(s instanceof jn){const c=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw o.Wu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Wp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof fg)return function(d,m){return{mapValue:{fields:{[cb]:{stringValue:ub},[jh]:{arrayValue:{values:d.toArray().map(y=>{if(typeof y!="number")throw m.Wu("VectorValues must only contain numeric values.");return Qp(m.serializer,y)})}}}}}}(s,o);throw o.Wu(`Unsupported field value: ${pd(s)}`)}(r,e)}function Tw(r,e){const n={};return ib(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ls(r,(s,o)=>{const c=Vc(o,e.qu(s));c!=null&&(n[s]=c)}),{mapValue:{fields:n}}}function bw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof an||r instanceof dg||r instanceof Vo||r instanceof jn||r instanceof _d||r instanceof fg)}function yg(r,e,n){if(!bw(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const s=pd(n);throw s==="an object"?e.Wu(r+" a custom object"):e.Wu(r+" "+s)}}function _p(r,e,n){if((e=Zt(e))instanceof $o)return e._internalPath;if(typeof e=="string")return _g(r,e);throw Gh("Field path arguments must be of type string or ",r,!1,void 0,n)}const jD=new RegExp("[~\\*/\\[\\]]");function _g(r,e,n){if(e.search(jD)>=0)throw Gh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new $o(...e.split("."))._internalPath}catch{throw Gh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Gh(r,e,n,s,o){const c=s&&!s.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(c||d)&&(p+=" (found",c&&(p+=` in field ${s}`),d&&(p+=` in document ${o}`),p+=")"),new Ee(ne.INVALID_ARGUMENT,m+r+p)}function ww(r,e){return r.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,n,s,o,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new jn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ed("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class UD extends Aw{data(){return super.data()}}function Ed(r,e){return typeof e=="string"?_g(r,e):e instanceof $o?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Ee(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vg{}class Eg extends vg{}function ti(r,e,...n){let s=[];e instanceof vg&&s.push(e),s=s.concat(n),function(c){const d=c.filter(p=>p instanceof Tg).length,m=c.filter(p=>p instanceof Td).length;if(d>1||d>0&&m>0)throw new Ee(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class Td extends Eg{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Td(e,n,s)}_apply(e){const n=this._parse(e);return Rw(e._query,n),new Bs(e.firestore,e.converter,lp(e._query,n))}_parse(e){const n=Mc(e.firestore);return function(c,d,m,p,y,T,A){let S;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new Ee(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){SE(A,T);const U=[];for(const q of A)U.push(AE(p,c,q));S={arrayValue:{values:U}}}else S=AE(p,c,A)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||SE(A,T),S=VD(m,d,A,T==="in"||T==="not-in");return Wt.create(y,T,S)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Zi(r,e,n){const s=e,o=Ed("where",r);return Td._create(o,s,n)}class Tg extends vg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Tg(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Di.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,c){let d=o;const m=c.getFlattenedFilters();for(const p of m)Rw(d,p),d=lp(d,p)}(e._query,n),new Bs(e.firestore,e.converter,lp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class bg extends Eg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new bg(e,n)}_apply(e){const n=function(o,c,d){if(o.startAt!==null)throw new Ee(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Ee(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _c(c,d)}(e._query,this._field,this._direction);return new Bs(e.firestore,e.converter,function(o,c){const d=o.explicitOrderBy.concat([c]);return new Fo(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,n))}}function zD(r,e="asc"){const n=e,s=Ed("orderBy",r);return bg._create(s,n)}class wg extends Eg{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new wg(e,n,s)}_apply(e){return new Bs(e.firestore,e.converter,Lh(e._query,this._limit,this._limitType))}}function Sw(r){return wg._create("limit",r,"F")}function AE(r,e,n){if(typeof(n=Zt(n))=="string"){if(n==="")throw new Ee(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_b(e)&&n.indexOf("/")!==-1)throw new Ee(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(kt.fromString(n));if(!Ne.isDocumentKey(s))throw new Ee(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return z0(r,new Ne(s))}if(n instanceof jn)return z0(r,n._key);throw new Ee(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pd(n)}.`)}function SE(r,e){if(!Array.isArray(r)||r.length===0)throw new Ee(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Rw(r,e){const n=function(o,c){for(const d of o)for(const m of d.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ee(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class BD{convertValue(e,n="none"){switch(ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw je()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ls(e,(o,c)=>{s[o]=this.convertValue(c,n)}),s}convertVectorValue(e){var n,s,o;const c=(o=(s=(n=e.fields)===null||n===void 0?void 0:n[jh].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(d=>Ft(d.doubleValue));return new fg(c)}convertGeoPoint(e){return new dg(Ft(e.latitude),Ft(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=sd(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(pc(e));default:return null}}convertTimestamp(e){const n=Ds(e);return new an(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=kt.fromString(e);Et(Bb(s));const o=new gc(s.get(1),s.get(3)),c=new Ne(s.popFirst(5));return o.isEqual(n)||Fr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Iw extends Aw{constructor(e,n,s,o,c,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ah(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Ed("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Ah extends Iw{data(e={}){return super.data(e)}}class qD{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new nc(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Ah(this._firestore,this._userDataWriter,s.key,s,new nc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ee(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(m=>{const p=new Ah(o._firestore,o._userDataWriter,m.doc.key,m.doc,new nc(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const p=new Ah(o._firestore,o._userDataWriter,m.doc.key,m.doc,new nc(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,T=-1;return m.type!==0&&(y=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),T=d.indexOf(m.doc.key)),{type:HD(m.type),doc:p,oldIndex:y,newIndex:T}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function HD(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(r){r=yi(r,jn);const e=yi(r.firestore,qs);return ID(yd(e),r._key).then(n=>GD(e,r,n))}class xw extends BD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jn(this.firestore,null,n)}}function Cn(r){r=yi(r,Bs);const e=yi(r.firestore,qs),n=yd(e),s=new xw(e);return LD(r._query),xD(n,r._query).then(o=>new qD(e,s,r,o))}function zr(r,e,n){r=yi(r,jn);const s=yi(r.firestore,qs),o=Ag(r.converter,e,n);return jc(s,[pg(Mc(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,Vn.none())])}function gi(r,e,n,...s){r=yi(r,jn);const o=yi(r.firestore,qs),c=Mc(o);let d;return d=typeof(e=Zt(e))=="string"||e instanceof $o?Ew(c,"updateDoc",r._key,e,n,s):vw(c,"updateDoc",r._key,e),jc(o,[d.toMutation(r._key,Vn.exists(!0))])}function FD(r){return jc(yi(r.firestore,qs),[new ud(r._key,Vn.none())])}function RE(r,e){const n=yi(r.firestore,qs),s=tt(r),o=Ag(r.converter,e);return jc(n,[pg(Mc(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,Vn.exists(!1))]).then(()=>s)}function jc(r,e){return function(s,o){const c=new Lr;return s.asyncQueue.enqueueAndForget(async()=>pD(await RD(s),o,c)),c.promise}(yd(r),e)}function GD(r,e,n){const s=n.docs.get(e._key),o=new xw(r);return new Iw(r,o,e._key,s,new nc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Mc(e)}set(e,n,s){this._verifyNotCommitted();const o=qm(e,this._firestore),c=Ag(o.converter,n,s),d=pg(this._dataReader,"WriteBatch.set",o._key,c,o.converter!==null,s);return this._mutations.push(d.toMutation(o._key,Vn.none())),this}update(e,n,s,...o){this._verifyNotCommitted();const c=qm(e,this._firestore);let d;return d=typeof(n=Zt(n))=="string"||n instanceof $o?Ew(this._dataReader,"WriteBatch.update",c._key,n,s,o):vw(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(d.toMutation(c._key,Vn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=qm(e,this._firestore);return this._mutations=this._mutations.concat(new ud(n._key,Vn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ee(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qm(r,e){if((r=Zt(r)).firestore!==e)throw new Ee(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function $h(r){return new gg("increment",r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(r){return yd(r=yi(r,qs)),new $D(r,e=>jc(r,e))}(function(e,n=!0){(function(o){Bo=o})(xa),wa(new Ns("firestore",(s,{instanceIdentifier:o,options:c})=>{const d=s.getProvider("app").getImmediate(),m=new qs(new LN(s.getProvider("auth-internal")),new qN(d,s.getProvider("app-check-internal")),function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Ee(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gc(y.options.projectId,T)}(d,o),d);return c=Object.assign({useFetchStreams:n},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),Ji(N0,C0,e),Ji(N0,C0,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="firebasestorage.googleapis.com",KD="storageBucket",QD=2*60*1e3,YD=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends lr{constructor(e,n,s=0){super(Hm(e),`Firebase Storage: ${n} (${Hm(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,cr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Hm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ar;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ar||(ar={}));function Hm(r){return"storage/"+r}function XD(){const r="An unknown error occurred, please check the error payload for server response.";return new cr(ar.UNKNOWN,r)}function WD(){return new cr(ar.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ZD(){return new cr(ar.CANCELED,"User canceled the upload/download.")}function JD(r){return new cr(ar.INVALID_URL,"Invalid URL '"+r+"'.")}function eO(r){return new cr(ar.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function IE(r){return new cr(ar.INVALID_ARGUMENT,r)}function Dw(){return new cr(ar.APP_DELETED,"The Firebase app was deleted.")}function tO(r){return new cr(ar.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=xi.makeFromUrl(e,n)}catch{return new xi(e,"")}if(s.path==="")return s;throw eO(e)}static makeFromUrl(e,n){let s=null;const o="([A-Za-z0-9.\\-_]+)";function c(de){de.path.charAt(de.path.length-1)==="/"&&(de.path_=de.path_.slice(0,-1))}const d="(/(.*))?$",m=new RegExp("^gs://"+o+d,"i"),p={bucket:1,path:3};function y(de){de.path_=decodeURIComponent(de.path)}const T="v[A-Za-z0-9_]+",A=n.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",P=new RegExp(`^https?://${A}/${T}/b/${o}/o${S}`,"i"),U={bucket:1,path:3},q=n===Cw?"(?:storage.googleapis.com|storage.cloud.google.com)":n,z="([^?#]*)",Y=new RegExp(`^https?://${q}/${o}/${z}`,"i"),W=[{regex:m,indices:p,postModify:c},{regex:P,indices:U,postModify:y},{regex:Y,indices:{bucket:1,path:2},postModify:y}];for(let de=0;de<W.length;de++){const ce=W[de],le=ce.regex.exec(e);if(le){const x=le[ce.indices.bucket];let R=le[ce.indices.path];R||(R=""),s=new xi(x,R),ce.postModify(s);break}}if(s==null)throw JD(e);return s}}class nO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(r,e,n){let s=1,o=null,c=null,d=!1,m=0;function p(){return m===2}let y=!1;function T(...z){y||(y=!0,e.apply(null,z))}function A(z){o=setTimeout(()=>{o=null,r(P,p())},z)}function S(){c&&clearTimeout(c)}function P(z,...Y){if(y){S();return}if(z){S(),T.call(null,z,...Y);return}if(p()||d){S(),T.call(null,z,...Y);return}s<64&&(s*=2);let W;m===1?(m=2,W=0):W=(s+Math.random())*1e3,A(W)}let U=!1;function q(z){U||(U=!0,S(),!y&&(o!==null?(z||(m=2),clearTimeout(o),A(0)):z||(m=1)))}return A(0),c=setTimeout(()=>{d=!0,q(!0)},n),q}function rO(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(r){return r!==void 0}function xE(r,e,n,s){if(s<e)throw IE(`Invalid value for '${r}'. Expected ${e} or greater.`);if(s>n)throw IE(`Invalid value for '${r}'. Expected ${n} or less.`)}function aO(r){const e=encodeURIComponent;let n="?";for(const s in r)if(r.hasOwnProperty(s)){const o=e(s)+"="+e(r[s]);n=n+o+"&"}return n=n.slice(0,-1),n}var Kh;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Kh||(Kh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(r,e){const n=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,c=e.indexOf(r)!==-1;return n||o||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e,n,s,o,c,d,m,p,y,T,A,S=!0){this.url_=e,this.method_=n,this.headers_=s,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=T,this.connectionFactory_=A,this.retry=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,U)=>{this.resolve_=P,this.reject_=U,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new dh(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=m=>{const p=m.loaded,y=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,y)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const m=c.getErrorCode()===Kh.NO_ERROR,p=c.getStatus();if(!m||oO(p,this.additionalRetryCodes_)&&this.retry){const T=c.getErrorCode()===Kh.ABORT;s(!1,new dh(!1,null,T));return}const y=this.successCodes_.indexOf(p)!==-1;s(!0,new dh(y,c))})},n=(s,o)=>{const c=this.resolve_,d=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(m,m.getResponse());sO(p)?c(p):c()}catch(p){d(p)}else if(m!==null){const p=XD();p.serverResponse=m.getErrorText(),this.errorCallback_?d(this.errorCallback_(m,p)):d(p)}else if(o.canceled){const p=this.appDelete_?Dw():ZD();d(p)}else{const p=WD();d(p)}};this.canceled_?n(!1,new dh(!1,null,!0)):this.backoffId_=iO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&rO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class dh{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function cO(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function uO(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function hO(r,e){e&&(r["X-Firebase-GMPID"]=e)}function dO(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function fO(r,e,n,s,o,c,d=!0){const m=aO(r.urlParams),p=r.url+m,y=Object.assign({},r.headers);return hO(y,e),cO(y,n),uO(y,c),dO(y,s),new lO(p,r.method,y,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function pO(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n){this._service=e,n instanceof xi?this._location=n:this._location=xi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Qh(e,n)}get root(){const e=new xi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return pO(this._location.path)}get storage(){return this._service}get parent(){const e=mO(this._location.path);if(e===null)return null;const n=new xi(this._location.bucket,e);return new Qh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw tO(e)}}function NE(r,e){const n=e==null?void 0:e[KD];return n==null?null:xi.makeFromBucketSpec(n,r)}function gO(r,e,n,s={}){r.host=`${e}:${n}`,r._protocol="http";const{mockUserToken:o}=s;o&&(r._overrideAuthToken=typeof o=="string"?o:aT(o,r.app.options.projectId))}class yO{constructor(e,n,s,o,c){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=o,this._firebaseVersion=c,this._bucket=null,this._host=Cw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=QD,this._maxUploadRetryTime=YD,this._requests=new Set,o!=null?this._bucket=xi.makeFromBucketSpec(o,this._host):this._bucket=NE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=xi.makeFromBucketSpec(this._url,e):this._bucket=NE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qh(this,e)}_makeRequest(e,n,s,o,c=!0){if(this._deleted)return new nO(Dw());{const d=fO(e,this._appId,s,o,n,this._firebaseVersion,c);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,o).getPromise()}}const CE="@firebase/storage",DE="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="storage";function _O(r=Dp(),e){r=Zt(r);const s=Jh(r,Ow).getImmediate({identifier:e}),o=iT("storage");return o&&vO(s,...o),s}function vO(r,e,n,s={}){gO(r,e,n,s)}function EO(r,{instanceIdentifier:e}){const n=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new yO(n,s,o,e,xa)}function TO(){wa(new Ns(Ow,EO,"PUBLIC").setMultipleInstances(!0)),Ji(CE,DE,""),Ji(CE,DE,"esm2017")}TO();const bO={apiKey:"AIzaSyCa4IVNZWaW41Lt-zm4TzKvURv2q4qM6io",authDomain:"storeshop-1b056.firebaseapp.com",projectId:"storeshop-1b056",storageBucket:"storeshop-1b056.firebasestorage.app",messagingSenderId:"621075712142",appId:"1:621075712142:web:62347e94419db8e36ca1df",measurementId:"G-ZPRGDHWYVS"},Sg=cT(bO),ft=$T(Sg),Re=DD(Sg);_O(Sg);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),AO=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),OE=r=>{const e=AO(r);return e.charAt(0).toUpperCase()+e.slice(1)},kw=(...r)=>r.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var SO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=k.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:c,iconNode:d,...m},p)=>k.createElement("svg",{ref:p,...SO,width:e,height:e,stroke:r,strokeWidth:s?Number(n)*24/Number(e):n,className:kw("lucide",o),...m},[...d.map(([y,T])=>k.createElement(y,T)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=(r,e)=>{const n=k.forwardRef(({className:s,...o},c)=>k.createElement(RO,{ref:c,iconNode:e,className:kw(`lucide-${wO(OE(r))}`,`lucide-${r}`,s),...o}));return n.displayName=OE(r),n};/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],kE=ii("circle-check-big",IO);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Ta=ii("clock",xO);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],lc=ii("heart",NO);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Pw=ii("house",CO);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],OO=ii("log-out",DO);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],PE=ii("map-pin",kO);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Sh=ii("search",PO);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],ME=ii("shopping-bag",MO);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Yh=ii("shopping-cart",VO);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],VE=ii("square-pen",jO);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],vp=ii("truck",UO);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Mw=ii("user",LO);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],cc=ii("x",zO);function BO(r){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n),n.styleSheet?n.styleSheet.cssText=r:n.appendChild(document.createTextNode(r))}BO(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Rg=r=>typeof r=="number"&&!isNaN(r),bc=r=>typeof r=="string",Vw=r=>typeof r=="function",qO=r=>bc(r)||Rg(r),HO=r=>k.isValidElement(r)||bc(r)||Vw(r)||Rg(r),FO=1,jw=()=>`${FO++}`,rr=new Map,Ep=[],jE=new Set,Uw=()=>rr.size>0,GO=(r,{containerId:e})=>{var n;return(n=rr.get(e||1))==null?void 0:n.toasts.get(r)};function $O(r,e){var n;if(e)return!!((n=rr.get(e))!=null&&n.isToastActive(r));let s=!1;return rr.forEach(o=>{o.isToastActive(r)&&(s=!0)}),s}function KO(r){if(!Uw()){Ep=Ep.filter(e=>r!=null&&e.options.toastId!==r);return}if(r==null||qO(r))rr.forEach(e=>{e.removeToast(r)});else if(r&&("containerId"in r||"id"in r)){let e=rr.get(r.containerId);e?e.removeToast(r.id):rr.forEach(n=>{n.removeToast(r.id)})}}var QO=(r={})=>{rr.forEach(e=>{e.props.limit&&(!r.containerId||e.id===r.containerId)&&e.clearQueue()})};function YO(r,e){HO(r)&&(Uw()||Ep.push({content:r,options:e}),rr.forEach(n=>{n.buildToast(r,e)}))}function Lw(r,e){rr.forEach(n=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===n.id)&&n.toggle(r,e==null?void 0:e.id)})}function XO(r){return jE.add(r),()=>{jE.delete(r)}}function WO(r){return r&&(bc(r.toastId)||Rg(r.toastId))?r.toastId:jw()}function Uc(r,e){return YO(r,e),e.toastId}function bd(r,e){return{...e,type:e&&e.type||r,toastId:WO(e)}}function wd(r){return(e,n)=>Uc(e,bd(r,n))}function ye(r,e){return Uc(r,bd("default",e))}ye.loading=(r,e)=>Uc(r,bd("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function ZO(r,{pending:e,error:n,success:s},o){let c;e&&(c=bc(e)?ye.loading(e,o):ye.loading(e.render,{...o,...e}));let d={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},m=(y,T,A)=>{if(T==null){ye.dismiss(c);return}let S={type:y,...d,...o,data:A},P=bc(T)?{render:T}:T;return c?ye.update(c,{...S,...P}):ye(P.render,{...S,...P}),A},p=Vw(r)?r():r;return p.then(y=>m("success",s,y)).catch(y=>m("error",n,y)),p}ye.promise=ZO;ye.success=wd("success");ye.info=wd("info");ye.error=wd("error");ye.warning=wd("warning");ye.warn=ye.warning;ye.dark=(r,e)=>Uc(r,bd("default",{theme:"dark",...e}));function JO(r){KO(r)}ye.dismiss=JO;ye.clearWaitingQueue=QO;ye.isActive=$O;ye.update=(r,e={})=>{let n=GO(r,e);if(n){let{props:s,content:o}=n,c={delay:100,...s,...e,toastId:e.toastId||r,updateId:jw()};c.toastId!==r&&(c.staleId=r);let d=c.render||o;delete c.render,Uc(d,c)}};ye.done=r=>{ye.update(r,{progress:1})};ye.onChange=XO;ye.play=r=>Lw(!0,r);ye.pause=r=>Lw(!1,r);const ek=[{id:"fruits",name:"Fruits",icon:"",image:"https://images.unsplash.com/photo-1610832958506-aa56368176cf?auto=format&fit=crop&q=80&w=1740&ixlib=rb-4.0.3"},{id:"vegetables",name:"Vegetables",icon:"",image:"https://images.unsplash.com/photo-1566385101042-1a0aa0c1268c?auto=format&fit=crop&q=80&w=1932&ixlib=rb-4.0.3"},{id:"dairy",name:"Dairy",icon:"",image:"https://images.unsplash.com/photo-1550583724-b2692b85b150?auto=format&fit=crop&q=80&w=1887&ixlib=rb-4.0.3"},{id:"bakery",name:"Bakery",icon:"",image:"https://images.unsplash.com/photo-1608198093002-ad4e005484ec?auto=format&fit=crop&q=80&w=1932&ixlib=rb-4.0.3"},{id:"meat",name:"Meat",icon:"",image:"https://images.unsplash.com/photo-1607623814075-e51df1bdc82f?auto=format&fit=crop&q=80&w=1740&ixlib=rb-4.0.3"},{id:"snacks",name:"Snacks",icon:"",image:"https://images.unsplash.com/photo-1599629954294-14df9f8291bc?auto=format&fit=crop&q=80&w=1964&ixlib=rb-4.0.3"}];function tk(){var _t;const r=or(),[e,n]=k.useState([]),[s,o]=k.useState([]),[c,d]=k.useState(""),[m,p]=k.useState([]),[y,T]=k.useState(!0),[A,S]=k.useState([]),[P,U]=k.useState(""),[q,z]=k.useState(""),[Y,ae]=k.useState(!1),[W,de]=k.useState([]),[ce,le]=k.useState({formatted:"",street:"",city:"",state:"",pincode:""}),[x,R]=k.useState(!1),[I,O]=k.useState(!0),[M,L]=k.useState(""),[N,ge]=k.useState([]),[Oe,K]=k.useState(!1),[ue,Ae]=k.useState([]),[Ye,D]=k.useState([]),[ie,fe]=k.useState(!1),[he,xe]=k.useState(["Milk","Bread","Eggs","Bananas","Rice","Chicken"]),[Ce,ke]=k.useState("cash"),[Se,et]=k.useState({number:"",expiry:"",cvc:"",name:"",last4:"",brand:""}),[Hn,An]=k.useState([]),[Jt,Fn]=k.useState(null);k.useEffect(()=>{const j=ft.onAuthStateChanged(async J=>{J?(fe(!0),await _i(J.uid),await yt(J.uid),await mn(J.uid),await Pi(J.uid),await vi(J.uid)):(fe(!1),L(""),ge([]),Ae([]),de([]),An([]))});Hs(),$r();const Z=localStorage.getItem("recentlyViewed");if(Z)try{D(JSON.parse(Z))}catch(J){console.error("Error parsing recently viewed items:",J),localStorage.removeItem("recentlyViewed")}return()=>j()},[]);const _i=async j=>{try{const Z=await sn(tt(Re,"users",j));if(Z.exists()){const J=Z.data();L(J.displayName||J.firstName||""),J.address&&le(J.address)}}catch(Z){console.error("Error fetching user data:",Z)}},vi=async j=>{try{const Z=Ot(Re,"users",j,"orders"),J=ti(Z,Zi("status","in",["pending","confirmed","preparing","out_for_delivery"])),ve=await Cn(J),be=[];for(const st of ve.docs){const qe=st.data();try{let mt="Unknown Shop";if(qe.shopId){const ze=await sn(st(Re,"shops",qe.shopId));ze.exists()&&(mt=ze.data().name)}be.push({id:st.id,...qe,shopName:mt})}catch(mt){console.error("Error fetching shop details for order:",mt),be.push({id:st.id,...qe,shopName:"Unknown Shop"})}}An(be)}catch(Z){console.error("Error fetching active orders:",Z)}},Pi=async j=>{try{const Z=Ot(Re,"users",j,"searchHistory"),ve=(await Cn(ti(Z,Sw(5)))).docs.map(be=>be.data().query);de(ve)}catch(Z){console.error("Error loading search history:",Z)}},ur=async j=>{if(!(!ft.currentUser||!j.trim()))try{const Z=ft.currentUser.uid,J=Ot(Re,"users",Z,"searchHistory"),ve=ti(J,Zi("query","==",j.trim())),be=await Cn(ve);if(be.empty)await RE(J,{query:j.trim(),timestamp:new Date});else{const st=be.docs[0].id;await gi(tt(J,st),{timestamp:new Date})}Pi(Z)}catch(Z){console.error("Error saving search history:",Z)}},mn=async j=>{try{const Z=Ot(Re,"users",j,"wishlist"),J=await Cn(Z),ve=[];for(const be of J.docs)ve.push({id:be.id,productId:be.data().productId});Ae(ve)}catch(Z){console.error("Error fetching wishlist items:",Z)}},Hs=async(j=null)=>{try{T(!0);let Z;j?(Fn(j),Z=ti(Ot(Re,"products"),Zi("category","==",j))):(Fn(null),Z=Ot(Re,"products"));const ve=(await Cn(Z)).docs.map(st=>({id:st.id,...st.data()}));o(ve);const be=ve.filter(st=>st.trending||st.rating&&st.rating>=4.5).slice(0,8);n(be.length?be:ve.slice(0,8)),p(ve),T(!1)}catch(Z){console.error("Error fetching products:",Z),T(!1)}};k.useEffect(()=>{if(!s||s.length===0)return;let j=[...s];if(q){const Z=q.toLowerCase().trim();j=s.filter(J=>J.name&&J.name.toLowerCase().includes(Z)||J.description&&J.description.toLowerCase().includes(Z)||J.category&&J.category.toLowerCase().includes(Z)||J.tags&&Array.isArray(J.tags)&&J.tags.some(ve=>ve.toLowerCase().includes(Z)))}Jt&&(j=j.filter(Z=>Z.category===Jt)),I&&ce.city&&(j=j.filter(Z=>!Z.availableCities||Array.isArray(Z.availableCities)&&Z.availableCities.includes(ce.city))),p(j)},[q,I,s,ce.city,Jt]);const Ei=j=>{j.preventDefault(),q.trim()&&ur(q)},Gn=j=>{z(j),ae(!1),j.trim()&&ur(j)},Ti=()=>{z("")},$r=()=>{const j=[],Z=new Date;let J=Z.getHours();Z.getMinutes()>45&&(J+=1);for(let ve=0;ve<12;ve++){const be=(J+ve)%24;j.push(`${be}:00 - ${be}:15`),j.push(`${be}:15 - ${be}:30`),j.push(`${be}:30 - ${be}:45`),j.push(`${be}:45 - ${(be+1)%24}:00`)}S(j),U(j[0])},pn=j=>{const{name:Z,value:J}=j.target;le(ve=>({...ve,[Z]:J,formatted:Z==="formatted"?J:`${ve.street||""}, ${ve.city||""}, ${ve.state||""}, ${ve.pincode||""}`.replace(/^,\s*|,\s*$/g,"").replace(/,\s*,/g,",")}))},hr=async()=>{if(ft.currentUser)try{const j=tt(Re,"users",ft.currentUser.uid);await gi(j,{address:ce}),R(!1),ye.success("Address saved successfully!")}catch(j){console.error("Error updating address:",j),ye.error("Failed to save address")}else ye.warning("Please login to save your address"),r("/login")},ri=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(async j=>{try{const J=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${j.coords.latitude}&lon=${j.coords.longitude}`)).json();if(J.address){const ve={formatted:J.display_name,street:`${J.address.road||""} ${J.address.house_number||""}`.trim(),city:J.address.city||J.address.town||J.address.village||"",state:J.address.state||"",pincode:J.address.postcode||""};if(le(ve),ft.currentUser){const be=tt(Re,"users",ft.currentUser.uid);await gi(be,{address:ve}),ye.success("Location updated successfully")}}}catch(Z){console.error("Error fetching location data:",Z),ye.error("Failed to get your location")}},j=>{console.error("Geolocation error:",j),ye.error("Could not access your location. Please check your browser settings.")}):ye.error("Geolocation is not supported by this browser.")},yt=async j=>{try{const Z=tt(Re,"carts",j),J=await sn(Z);if(!J.exists())return await zr(Z,{items:[],createdAt:new Date,updatedAt:new Date,total:0}),ge([]),[];const st=(J.data().items||[]).filter(ze=>ze&&ze.productId&&typeof ze.quantity=="number");if(st.length===0)return ge([]),[];const qe=st.map(ze=>ze.productId),mt=[];for(let ze=0;ze<qe.length;ze+=10){const Dt=qe.slice(ze,ze+10);if(Dt.length>0){const At=ti(Ot(Re,"products"),Zi(hg(),"in",Dt)),zt=await Cn(At),$e={};zt.forEach(at=>{$e[at.id]={id:at.id,...at.data()}}),st.filter(at=>Dt.includes(at.productId)).forEach(at=>{mt.push({...at,product:$e[at.productId]||{id:at.productId,name:"Product not found",price:0,imageUrl:"/placeholder.jpg"}})})}}return ge(mt),mt}catch(Z){return console.error("Error fetching cart items:",Z),ye.error("Failed to load cart items"),ge([]),[]}},oe=async j=>{try{if(!j||!j.id)return ye.error("Invalid product"),!1;if(!ft.currentUser)return ye.info("Please log in to add items to cart"),r("/login"),!1;const Z=ft.currentUser.uid,J=tt(Re,"carts",Z),ve=await sn(J);let be=[];ve.exists()?be=[...ve.data().items||[]]:await zr(J,{items:[],createdAt:new Date,updatedAt:new Date,total:0});const st={productId:j.id,quantity:1,price:Number(j.price)||0,name:String(j.name)||"Unnamed Product",image:j.imageUrl||""},qe=be.findIndex(ze=>ze&&ze.productId===j.id);qe>=0?(be[qe].quantity+=1,ye.success(`Added another ${j.name} to cart`)):(be.push(st),ye.success(`${j.name} added to cart`));const mt=be.reduce((ze,Dt)=>ze+(Dt.price||0)*(Dt.quantity||0),0);return await gi(J,{items:be.filter(ze=>ze),updatedAt:new Date,total:mt}),await yt(Z),!0}catch(Z){return console.error("Error adding to cart:",Z),ye.error("Failed to add item to cart"),!1}},pe=async(j,Z)=>{if(!ft.currentUser){ye.info("Please log in to update your cart"),r("/login");return}try{const J=ft.currentUser.uid,ve=tt(Re,"carts",J),be=await sn(ve);if(!be.exists()){await zr(ve,{items:[],createdAt:new Date,updatedAt:new Date,total:0});return}const qe=[...be.data().items||[]],mt=qe.findIndex($e=>$e&&$e.productId===j);if(mt===-1)return;const ze=[...qe],Dt=ze[mt],At=(Dt.quantity||0)+Z;At<=0?(ze.splice(mt,1),ye.info(`Removed ${Dt.name||"item"} from cart`)):ze[mt]={...Dt,quantity:At};const zt=ze.reduce(($e,at)=>$e+(at.price||0)*(at.quantity||0),0);await gi(ve,{items:ze.filter($e=>$e),updatedAt:new Date,total:zt}),await yt(J)}catch(J){console.error("Error updating quantity:",J),ye.error("Failed to update quantity")}},_e=async j=>{if(!ft.currentUser){ye.info("Please log in to update your cart"),r("/login");return}try{const Z=ft.currentUser.uid,J=tt(Re,"carts",Z),ve=await sn(J);if(!ve.exists())return;const st=[...ve.data().items||[]],qe=st.find(At=>At.productId===j),mt=qe?qe.name:"Item",ze=st.filter(At=>At.productId!==j),Dt=ze.reduce((At,zt)=>At+(zt.price||0)*(zt.quantity||0),0);await gi(J,{items:ze,updatedAt:new Date,total:Dt}),ye.success(`${mt} removed from cart`),await yt(Z)}catch(Z){console.error("Error removing item from cart:",Z),ye.error("Failed to remove item from cart")}},Ge=async j=>{if(!ie){ye.info("Please log in to add to wishlist"),r("/login");return}try{const Z=ft.currentUser.uid;if(ue.some(ve=>ve.productId===j)){const ve=ue.find(be=>be.productId===j).id;await FD(tt(Re,"users",Z,"wishlist",ve)),ye.success("Removed from wishlist")}else await RE(Ot(Re,"users",Z,"wishlist"),{productId:j,addedAt:new Date}),ye.success("Added to wishlist");mn(Z)}catch(Z){console.error("Error updating wishlist:",Z),ye.error("Failed to update wishlist")}},Xe=j=>{if(!(!j||!j.id))try{const Z=[...Ye],J=Z.findIndex(be=>be&&be.id===j.id);J!==-1&&Z.splice(J,1),Z.unshift(j);const ve=Z.slice(0,5);D(ve),localStorage.setItem("recentlyViewed",JSON.stringify(ve))}catch(Z){console.error("Error updating recently viewed:",Z)}},rt=()=>N.reduce((j,Z)=>j+(Z.quantity||0),0),He=()=>N.reduce((j,Z)=>{var J;return j+(((J=Z.product)==null?void 0:J.price)||0)*(Z.quantity||0)},0),ht=async()=>{if(N.length===0){ye.warning("Your cart is empty");return}if(!ce.formatted){ye.warning("Please set your delivery address first"),R(!0);return}if(Ce==="card"){if(!Se.number||!Se.expiry||!Se.cvc||!Se.name){ye.warning("Please enter your complete card details");return}Se.last4=Se.number.slice(-4);const j=Se.number.charAt(0);j==="4"?Se.brand="Visa":j==="5"?Se.brand="Mastercard":j==="3"?Se.brand="Amex":Se.brand="Card"}try{const j=ft.currentUser.uid,Z=Nw(Re),J={};N.forEach(qe=>{var ze,Dt,At,zt,$e;const mt=((ze=qe.product)==null?void 0:ze.shopId)||"default";J[mt]||(J[mt]=[]),J[mt].push({productId:qe.productId,name:((Dt=qe.product)==null?void 0:Dt.name)||"Unknown Product",quantity:qe.quantity||0,price:((At=qe.product)==null?void 0:At.price)||0,imageUrl:((zt=qe.product)==null?void 0:zt.imageUrl)||"",shopId:(($e=qe.product)==null?void 0:$e.shopId)||"default"})});const ve=[],be=[];for(const qe in J){const mt=J[qe],ze=mt.reduce((pt,$t)=>pt+$t.price*$t.quantity,0);let Dt={shopName:"Default Shop"};try{const pt=tt(Re,"shops",qe),$t=await sn(pt);$t.exists()&&(Dt=$t.data())}catch(pt){console.error("Error fetching shop data:",pt)}const At=tt(Ot(Re,"orders"));ve.push(At.id);const zt={orderId:At.id,userId:j,userEmail:ft.currentUser.email||"",userName:ft.currentUser.displayName||M||"Customer",shopId:qe,shopName:Dt.shopName,shopkeeperId:qe,items:mt,totalAmount:ze,deliveryFee:ze>100?0:20,status:"pending",deliveryAddress:ce,deliveryTime:P,createdAt:new Date,updatedAt:new Date,paymentMethod:Ce,paymentStatus:Ce==="cash"?"pending":"paid",customerNotes:c};Ce==="card"&&(zt.paymentStatus="paid",zt.paymentDetails={last4:Se.last4,brand:Se.brand}),Z.set(At,zt);const $e=tt(Ot(Re,"users",j,"orders"),At.id);Z.set($e,zt);const at=tt(Ot(Re,"shops",qe,"orders"),At.id);Z.set(at,zt),be.push(zt);for(const pt of mt)if(pt.productId){const $t=tt(Re,"products",pt.productId);Z.update($t,{inventory:$h(-pt.quantity),soldCount:$h(pt.quantity)})}}const st=tt(Re,"carts",j);Z.update(st,{items:[],updatedAt:new Date,total:0}),await Z.commit(),ge([]),K(!1),d(""),An(qe=>[...be,...qe]),ye.success(`Order${ve.length>1?"s":""} placed successfully!`),r("/orders")}catch(j){console.error("Error during checkout:",j),ye.error("Failed to place order. Please try again.")}},Ue=()=>{K(!Oe)},wt=j=>{r(`/product/${j}`)};return g.jsxs("div",{className:"home-container",children:[g.jsxs("header",{className:"header-main",children:[g.jsx("div",{className:"location-bar",children:x?g.jsxs("div",{className:"address-edit-container",children:[g.jsx("input",{type:"text",name:"formatted",value:ce.formatted,onChange:pn,placeholder:"Enter your full address",className:"address-input"}),g.jsxs("div",{className:"address-detail-fields",children:[g.jsx("input",{type:"text",name:"street",value:ce.street,onChange:pn,placeholder:"Street",className:"address-detail-input"}),g.jsx("input",{type:"text",name:"city",value:ce.city,onChange:pn,placeholder:"City",className:"address-detail-input"}),g.jsx("input",{type:"text",name:"state",value:ce.state,onChange:pn,placeholder:"State",className:"address-detail-input"}),g.jsx("input",{type:"text",name:"pincode",value:ce.pincode,onChange:pn,placeholder:"Pincode",className:"address-detail-input"})]}),g.jsxs("div",{className:"address-actions",children:[g.jsx("button",{onClick:ri,className:"location-button",children:"Use Current Location"}),g.jsx("button",{onClick:hr,className:"save-button",children:"Save Address"}),g.jsx("button",{onClick:()=>R(!1),className:"cancel-button",children:"Cancel"})]})]}):g.jsxs("div",{className:"location-display",onClick:()=>R(!0),children:[g.jsx("span",{className:"location-icon",children:""}),g.jsx("span",{className:"location-text",children:ce.formatted?`Deliver to: ${ce.formatted}`:"Add delivery address"})]})}),g.jsxs("form",{onSubmit:Ei,className:"search-bar-container",children:[g.jsxs("div",{className:`search-bar ${Y?"focused":""}`,children:[g.jsx(Sh,{size:18,className:"search-icon"}),g.jsx("input",{type:"text",value:q,onChange:j=>z(j.target.value),onFocus:()=>ae(!0),onBlur:()=>setTimeout(()=>ae(!1),200),placeholder:"Search for groceries...",className:"search-input"}),q&&g.jsx("button",{type:"button",onClick:Ti,className:"clear-search",children:g.jsx(cc,{size:18})})]}),Y&&g.jsxs("div",{className:"search-suggestions",children:[q&&g.jsxs("div",{className:"search-suggestion-item",onClick:()=>Gn(q),children:[g.jsx(Sh,{size:16}),g.jsxs("span",{children:['Search for "',q,'"']})]}),W.length>0&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"suggestion-heading",children:"Recent Searches"}),W.map((j,Z)=>g.jsxs("div",{className:"search-suggestion-item",onClick:()=>Gn(j),children:[g.jsx(Ta,{size:16}),g.jsx("span",{children:j})]},`history-${Z}`))]}),g.jsx("div",{className:"suggestion-heading",children:"Popular Searches"}),he.map((j,Z)=>g.jsx("div",{className:"search-suggestion-item",onClick:()=>Gn(j),children:g.jsx("span",{children:j})},`popular-${Z}`))]})]})]}),g.jsxs("div",{className:"delivery-timer",children:[g.jsx("div",{className:"timer-icon",children:""}),g.jsxs("div",{className:"timer-text",children:[g.jsx("span",{className:"delivery-heading",children:"Delivery in 10 minutes"}),g.jsx("span",{className:"delivery-subtext",children:"Fresh groceries at your doorstep"})]})]}),Hn.length>0&&g.jsx("div",{className:"active-orders-banner",children:g.jsxs("div",{className:"active-orders-content",children:[g.jsx(vp,{size:24,className:"truck-icon"}),g.jsx("div",{className:"active-orders-text",children:g.jsx("p",{children:"Your orders!"})}),g.jsx("button",{className:"track-button",onClick:()=>r("/yourorders"),children:"Track"})]})}),g.jsx("div",{className:"promotion-banner",children:g.jsxs("div",{className:"promotion-content",children:[g.jsx("h3",{children:"The Only QuickCommerce App in Nainital"}),g.jsx("p",{children:" Find Best Prices : No Fixed Prices"})]})}),Ye.length>0&&g.jsxs("div",{className:"products-section recently-viewed-section",children:[g.jsxs("div",{className:"section-header",children:[g.jsx("h2",{className:"section-title",children:"Recently Viewed"}),g.jsx("button",{className:"see-all-btn",onClick:()=>r("/history"),children:"See All"})]}),g.jsx("div",{className:"products-scroll",children:Ye.map(j=>{var Z;return g.jsxs("div",{className:"product-card",onClick:()=>wt(j.id),children:[g.jsxs("div",{className:"product-image-container",children:[g.jsx("img",{src:j.imageUrl||"https://via.placeholder.com/150",alt:j.name,className:"product-image-img"}),j.discount&&g.jsxs("span",{className:"discount-tag",children:[j.discount,"% OFF"]}),g.jsx("button",{className:"wishlist-icon",onClick:J=>{J.stopPropagation(),Ge(j.id)},children:g.jsx(lc,{size:20,fill:ue.some(J=>J.productId===j.id)?"#ff4d4f":"none",stroke:ue.some(J=>J.productId===j.id)?"#ff4d4f":"currentColor"})})]}),g.jsxs("div",{className:"product-details",children:[g.jsx("div",{className:"product-name",children:j.name}),g.jsx("div",{className:"product-weight",children:j.weight||""}),g.jsxs("div",{className:"product-price-container",children:[g.jsxs("div",{className:"product-price",children:["",(Z=j.price)==null?void 0:Z.toFixed(2)]}),j.originalPrice&&g.jsxs("div",{className:"product-original-price",children:["",j.originalPrice.toFixed(2)]})]}),g.jsx("button",{className:"add-to-cart",onClick:J=>{J.stopPropagation(),oe(j)},children:"Add"})]})]},j.id)})})]}),m.length>0&&g.jsxs("div",{className:"products-section all-products-section",children:[g.jsx("div",{className:"section-header",children:g.jsx("h2",{className:"section-title",children:q?`Search Results for "${q}"`:Jt?`${((_t=ek.find(j=>j.id===Jt))==null?void 0:_t.name)||"Category"} Products`:"All Products"})}),g.jsx("div",{className:"products-grid",children:m.map(j=>{var Z;return g.jsxs("div",{className:"product-card",onClick:()=>{Xe(j),wt(j.id)},children:[g.jsxs("div",{className:"product-image-container",children:[g.jsx("img",{src:j.imageUrl||"https://via.placeholder.com/150",alt:j.name,className:"product-image-img"}),j.discount&&g.jsxs("span",{className:"discount-tag",children:[j.discount,"% OFF"]}),g.jsx("button",{className:"wishlist-icon",onClick:J=>{J.stopPropagation(),Ge(j.id)},children:g.jsx(lc,{size:20,fill:ue.some(J=>J.productId===j.id)?"#ff4d4f":"none",stroke:ue.some(J=>J.productId===j.id)?"#ff4d4f":"currentColor"})})]}),g.jsxs("div",{className:"product-details",children:[g.jsx("div",{className:"product-name",children:j.name}),g.jsx("div",{className:"product-weight",children:j.weight||""}),g.jsxs("div",{className:"product-price-container",children:[g.jsxs("div",{className:"product-price",children:["",(Z=j.price)==null?void 0:Z.toFixed(2)]}),j.originalPrice&&g.jsxs("div",{className:"product-original-price",children:["",j.originalPrice.toFixed(2)]})]}),g.jsx("button",{className:"add-to-cart",onClick:J=>{J.stopPropagation(),oe(j)},children:"Add"})]})]},j.id)})})]}),g.jsxs("div",{className:"products-section trending-section",children:[g.jsxs("div",{className:"section-header",children:[g.jsx("h2",{className:"section-title",children:"Trending Products"}),g.jsx("button",{className:"see-all-btn",onClick:()=>r("/trending"),children:"See All"})]}),y?g.jsxs("div",{className:"loading-spinner",children:[g.jsx("div",{className:"spinner"}),g.jsx("p",{children:"."})]}):g.jsx("div",{className:"products-grid",children:e.map(j=>{var Z;return g.jsxs("div",{className:"product-card",onClick:()=>{Xe(j),wt(j.id)},children:[g.jsxs("div",{className:"product-image-container",children:[g.jsx("img",{src:j.imageUrl||"https://via.placeholder.com/150",alt:j.name,className:"product-image-img"}),j.discount&&g.jsxs("span",{className:"discount-tag",children:[j.discount,"% OFF"]}),g.jsx("button",{className:"wishlist-icon",onClick:J=>{J.stopPropagation(),Ge(j.id)},children:g.jsx(lc,{size:20,fill:ue.some(J=>J.productId===j.id)?"#ff4d4f":"none",stroke:ue.some(J=>J.productId===j.id)?"#ff4d4f":"currentColor"})})]}),g.jsxs("div",{className:"product-details",children:[g.jsx("div",{className:"product-name",children:j.name}),g.jsx("div",{className:"product-weight",children:j.weight||""}),g.jsxs("div",{className:"product-price-container",children:[g.jsxs("div",{className:"product-price",children:["",(Z=j.price)==null?void 0:Z.toFixed(2)]}),j.originalPrice&&g.jsxs("div",{className:"product-original-price",children:["",j.originalPrice.toFixed(2)]})]}),g.jsx("button",{className:"add-to-cart",onClick:J=>{J.stopPropagation(),oe(j)},children:"Add"})]})]},j.id)})})]}),g.jsxs("div",{className:"feature-banners",children:[g.jsxs("div",{className:"feature-banner",children:[g.jsx("div",{className:"feature-icon",children:""}),g.jsxs("div",{className:"feature-details",children:[g.jsx("h3",{children:"Express Delivery"}),g.jsx("p",{children:"Get your groceries in minutes"})]})]}),g.jsxs("div",{className:"feature-banner",children:[g.jsx("div",{className:"feature-icon",children:""}),g.jsxs("div",{className:"feature-details",children:[g.jsx("h3",{children:"100% Fresh"}),g.jsx("p",{children:"Farm-fresh products"})]})]}),g.jsxs("div",{className:"feature-banner",children:[g.jsx("div",{className:"feature-icon",children:""}),g.jsxs("div",{className:"feature-details",children:[g.jsx("h3",{children:"Best Prices"}),g.jsx("p",{children:"Lowest price guaranteed"})]})]})]}),Oe&&g.jsx("div",{className:"cart-overlay",children:g.jsxs("div",{className:"cart-sidebar",children:[g.jsxs("div",{className:"cart-header",children:[g.jsxs("h3",{children:["Shopping Cart (",rt(),")"]}),g.jsx("button",{className:"close-cart",onClick:Ue,children:g.jsx(cc,{size:24})})]}),N.length===0?g.jsxs("div",{className:"empty-cart",children:[g.jsx(Yh,{size:64,className:"empty-cart-icon"}),g.jsx("p",{children:"Your cart is empty"}),g.jsx("button",{className:"start-shopping",onClick:Ue,children:"Start Shopping"})]}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"cart-items",children:N.map(j=>{var Z,J,ve,be,st;return g.jsxs("div",{className:"cart-item",children:[g.jsx("img",{src:((Z=j.product)==null?void 0:Z.imageUrl)||"https://via.placeholder.com/50",alt:(J=j.product)==null?void 0:J.name,className:"cart-item-image",onClick:()=>{Ue(),wt(j.productId)}}),g.jsxs("div",{className:"cart-item-details",children:[g.jsx("div",{className:"cart-item-name",onClick:()=>{Ue(),wt(j.productId)},children:((ve=j.product)==null?void 0:ve.name)||"Unknown Product"}),g.jsx("div",{className:"cart-item-weight",children:((be=j.product)==null?void 0:be.weight)||""}),g.jsxs("div",{className:"cart-item-price",children:["",(((st=j.product)==null?void 0:st.price)||0).toFixed(2)]})]}),g.jsxs("div",{className:"cart-item-controls",children:[g.jsxs("div",{className:"quantity-controls",children:[g.jsx("button",{className:"quantity-btn",onClick:()=>pe(j.productId,-1),children:"-"}),g.jsx("span",{className:"quantity",children:j.quantity}),g.jsx("button",{className:"quantity-btn",onClick:()=>pe(j.productId,1),children:"+"})]}),g.jsx("button",{className:"remove-item",onClick:()=>_e(j.productId),children:g.jsx(cc,{size:18})})]})]},j.productId)})}),g.jsxs("div",{className:"order-notes",children:[g.jsx("h4",{children:"Order Notes (Optional)"}),g.jsx("textarea",{value:c,onChange:j=>d(j.target.value),placeholder:"Special instructions for delivery...",className:"notes-input"})]}),g.jsxs("div",{className:"payment-method-selection",children:[g.jsx("h4",{children:"Payment Method"}),g.jsxs("div",{className:"payment-options",children:[g.jsxs("label",{className:"payment-option",children:[g.jsx("input",{type:"radio",name:"payment",value:"cash",checked:Ce==="cash",onChange:()=>ke("cash")}),g.jsxs("div",{className:"payment-option-content",children:[g.jsx("span",{className:"payment-option-icon",children:""}),g.jsx("span",{className:"payment-label",children:"Cash on Delivery"})]})]}),g.jsx("label",{className:"payment-option",children:g.jsxs("div",{className:"payment-option-content",children:[g.jsx("span",{className:"payment-option-icon",children:""}),g.jsx("span",{className:"payment-label",children:"Credit/Debit Card Not Availible Yet."})]})})]}),Ce==="card"&&g.jsxs("div",{className:"card-details",children:[g.jsx("input",{type:"text",placeholder:"Card Number",value:Se.number,onChange:j=>et({...Se,number:j.target.value}),className:"card-input"}),g.jsxs("div",{className:"card-row",children:[g.jsx("input",{type:"text",placeholder:"MM/YY",value:Se.expiry,onChange:j=>et({...Se,expiry:j.target.value}),className:"card-input expiry"}),g.jsx("input",{type:"text",placeholder:"CVC",value:Se.cvc,onChange:j=>et({...Se,cvc:j.target.value}),className:"card-input cvc"})]}),g.jsx("input",{type:"text",placeholder:"Cardholder Name",value:Se.name,onChange:j=>et({...Se,name:j.target.value}),className:"card-input"})]})]}),g.jsxs("div",{className:"cart-summary",children:[g.jsxs("div",{className:"summary-row",children:[g.jsx("span",{children:"Subtotal"}),g.jsxs("span",{children:["",He().toFixed(2)]})]}),g.jsxs("div",{className:"summary-row",children:[g.jsx("span",{children:"Delivery Fee"}),g.jsx("span",{children:He()>500?"FREE":"60.00"})]}),g.jsxs("div",{children:["                  ",g.jsx("span",{children:"Delivery Fee is Free On Order More Than 600"})]}),g.jsxs("div",{className:"summary-row total",children:[g.jsx("span",{children:"Total"}),g.jsxs("span",{children:["",(He()+(He()>100?0:60)).toFixed(2)]})]}),g.jsx("button",{className:"checkout-button",onClick:ht,children:"Place Order"})]})]})]})}),g.jsxs("nav",{className:"bottom-nav",children:[g.jsx(Gt,{to:"/",className:"nav-item active",children:g.jsx(Pw,{size:22})}),g.jsx(Gt,{to:"/categories",className:"nav-item",children:g.jsx(Sh,{size:22})}),g.jsx(Gt,{to:"/cart",className:"nav-item cart-nav-item",onClick:j=>{j.preventDefault(),Ue()},children:g.jsxs("div",{className:"cart-icon-container",children:[g.jsx(Yh,{size:22}),N.length>0&&g.jsx("span",{className:"cart-nav-badge",children:rt()})]})}),g.jsx(Gt,{to:"/Yourorders",className:"nav-item",children:g.jsx(Ta,{size:22})}),g.jsx(Gt,{to:"/profile",className:"nav-item",children:g.jsx(Mw,{size:22})})]})]})}function nk(){const[r,e]=k.useState(""),[n,s]=k.useState(""),[o,c]=k.useState(""),[d,m]=k.useState(!1),[p,y]=k.useState(!1),[T,A]=k.useState(!1),[S,P]=k.useState(!1),U=or();k.useEffect(()=>{const ae=localStorage.getItem("lakesmart_email");ae&&(e(ae),A(!0)),setTimeout(()=>P(!0),300)},[]);const q=async ae=>{if(ae.preventDefault(),!d){c(""),m(!0);try{await Ex(ft,r,n),T?localStorage.setItem("lakesmart_email",r):localStorage.removeItem("lakesmart_email"),localStorage.setItem("isLoggedIn","true"),P(!1),document.querySelector(".login-success-ripple").classList.add("active"),setTimeout(()=>{U("/")},800)}catch(W){console.error("Login error:",W),c(z(W.code)),m(!1),localStorage.setItem("isLoggedIn","false");const de=document.querySelector(".auth-form");de.classList.add("shake"),setTimeout(()=>de.classList.remove("shake"),500)}}},z=ae=>{switch(ae){case"auth/user-not-found":return"No account found with this email. Please check or sign up.";case"auth/wrong-password":return"Incorrect password. Please try again.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";default:return"Login failed. Please check your information and try again."}},Y=[...Array(6)].map((ae,W)=>g.jsx("div",{className:`bubble bubble-${W+1} ${S?"animate":""}`},W));return g.jsxs("div",{className:"auth-container",children:[g.jsx("div",{className:"water-container",children:Y}),g.jsx("div",{className:"login-success-ripple"}),g.jsxs("div",{className:"auth-form",children:[g.jsxs("div",{className:"logo-container",children:[g.jsxs("div",{className:"logo",children:[g.jsx("span",{className:"logo-wave"}),g.jsx("span",{className:"logo-wave"}),g.jsx("span",{className:"logo-wave"})]}),g.jsx("h1",{className:"app-name",children:"LakeSmart"})]}),g.jsx("h2",{children:"Welcome Back!"}),g.jsx("p",{className:"slogan",children:"Groceries in Minutes, Smiles for Hours."}),o&&g.jsxs("div",{className:"error-message",children:[g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[g.jsx("circle",{cx:"12",cy:"12",r:"10"}),g.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),g.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),g.jsx("span",{children:o})]}),g.jsxs("form",{onSubmit:q,children:[g.jsxs("div",{className:"input-group",children:[g.jsxs("svg",{className:"input-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[g.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),g.jsx("polyline",{points:"22,6 12,13 2,6"})]}),g.jsx("input",{type:"email",value:r,onChange:ae=>e(ae.target.value),placeholder:"Email",required:!0,className:r?"has-value":""}),g.jsx("label",{children:"Email"})]}),g.jsxs("div",{className:"input-group",children:[g.jsxs("svg",{className:"input-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[g.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),g.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),g.jsx("input",{type:p?"text":"password",value:n,onChange:ae=>s(ae.target.value),placeholder:"Password",required:!0,className:n?"has-value":""}),g.jsx("label",{children:"Password"}),g.jsx("button",{type:"button",className:"password-toggle",onClick:()=>y(!p),tabIndex:"-1",children:p?g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[g.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),g.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[g.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),g.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),g.jsxs("div",{className:"form-options",children:[g.jsxs("label",{className:"remember-me",children:[g.jsx("input",{type:"checkbox",checked:T,onChange:()=>A(!T)}),g.jsx("span",{className:"checkmark"}),"Remember me"]}),g.jsx(Gt,{to:"/forgot-password",className:"forgot-password",children:"Forgot Password?"})]}),g.jsx("div",{}),g.jsxs("button",{type:"submit",className:`login-button ${d?"loading":""}`,children:[g.jsx("span",{className:"button-text",children:"Login"}),g.jsx("span",{className:"button-loader"})]})]}),g.jsxs("p",{className:"auth-link",children:["Don't have an account? ",g.jsx(Gt,{to:"/signup",children:"Sign Up"})]})]})]})}function ik(){const[r,e]=k.useState(""),[n,s]=k.useState(""),[o,c]=k.useState(""),[d,m]=k.useState(""),[p,y]=k.useState(""),T=or(),A=async S=>{S.preventDefault();try{const U=(await vx(ft,r,n)).user;await zr(tt(Re,"users",U.uid),{name:o,email:r,phone:d,createdAt:new Date,role:"customer"}),await zr(tt(Re,"carts",U.uid),{items:[],createdAt:new Date,updatedAt:new Date,total:0}),localStorage.setItem("isLoggedIn","true"),T("/")}catch(P){y(P.message),localStorage.setItem("isLoggedIn","false")}};return g.jsx("div",{className:"auth-container",children:g.jsxs("div",{className:"auth-form",children:[g.jsx("h2",{children:"Quickmart"}),p&&g.jsx("div",{className:"error-message",children:p}),g.jsxs("form",{onSubmit:A,children:[g.jsx("input",{type:"text",value:o,onChange:S=>c(S.target.value),placeholder:"Full Name",required:!0}),g.jsx("input",{type:"email",value:r,onChange:S=>e(S.target.value),placeholder:"Email",required:!0}),g.jsx("input",{type:"password",value:n,onChange:S=>s(S.target.value),placeholder:"Password",required:!0,minLength:"6"}),g.jsx("input",{type:"tel",value:d,onChange:S=>m(S.target.value),placeholder:"Phone Number",required:!0}),g.jsx("button",{type:"submit",children:"Sign Up"})]}),g.jsxs("p",{className:"auth-link",children:["Already have an account? ",g.jsx(Gt,{to:"/login",children:"Login"})]})]})})}function Ad(){const r=or(),[e,n]=k.useState([]),[s,o]=k.useState([]),[c,d]=k.useState(""),[m,p]=k.useState([]),[y,T]=k.useState(!0),[A,S]=k.useState([]),[P,U]=k.useState(""),[q,z]=k.useState(""),[Y,ae]=k.useState(!1),[W,de]=k.useState([]),[ce,le]=k.useState({formatted:"",street:"",city:"",state:"",pincode:""}),[x,R]=k.useState(!1),[I,O]=k.useState(!0),[M,L]=k.useState(""),[N,ge]=k.useState([]),[Oe,K]=k.useState(!1),[ue,Ae]=k.useState([]),[Ye,D]=k.useState([]),[ie,fe]=k.useState(!1),[he,xe]=k.useState(["Milk","Bread","Eggs","Bananas","Rice","Chicken"]),[Ce,ke]=k.useState("cash"),[Se,et]=k.useState({number:"",expiry:"",cvc:"",name:"",last4:"",brand:""}),[Hn,An]=k.useState([]),[Jt,Fn]=k.useState(null);k.useEffect(()=>{const oe=ft.onAuthStateChanged(async _e=>{_e?(fe(!0),await _i(_e.uid),await Ei(_e.uid),await ur(_e.uid),await Pi(_e.uid),await vi(_e.uid)):(fe(!1),L(""),ge([]),Ae([]),de([]),An([]))});mn(),Hs();const pe=localStorage.getItem("recentlyViewed");if(pe)try{D(JSON.parse(pe))}catch(_e){console.error("Error parsing recently viewed items:",_e),localStorage.removeItem("recentlyViewed")}return()=>oe()},[]);const _i=async oe=>{try{const pe=await sn(tt(Re,"users",oe));if(pe.exists()){const _e=pe.data();L(_e.displayName||_e.firstName||""),_e.address&&le(_e.address)}}catch(pe){console.error("Error fetching user data:",pe)}},vi=async oe=>{try{const pe=Ot(Re,"users",oe,"orders"),_e=ti(pe,Zi("status","in",["pending","confirmed","preparing","out_for_delivery"])),Ge=await Cn(_e),Xe=[];for(const rt of Ge.docs){const He=rt.data();try{let ht="Unknown Shop";if(He.shopId){const Ue=await sn(rt(Re,"shops",He.shopId));Ue.exists()&&(ht=Ue.data().name)}Xe.push({id:rt.id,...He,shopName:ht})}catch(ht){console.error("Error fetching shop details for order:",ht),Xe.push({id:rt.id,...He,shopName:"Unknown Shop"})}}An(Xe)}catch(pe){console.error("Error fetching active orders:",pe)}},Pi=async oe=>{try{const pe=Ot(Re,"users",oe,"searchHistory"),Ge=(await Cn(ti(pe,Sw(5)))).docs.map(Xe=>Xe.data().query);de(Ge)}catch(pe){console.error("Error loading search history:",pe)}},ur=async oe=>{try{const pe=Ot(Re,"users",oe,"wishlist"),_e=await Cn(pe),Ge=[];for(const Xe of _e.docs)Ge.push({id:Xe.id,productId:Xe.data().productId});Ae(Ge)}catch(pe){console.error("Error fetching wishlist items:",pe)}},mn=async(oe=null)=>{try{T(!0);let pe;oe?(Fn(oe),pe=ti(Ot(Re,"products"),Zi("category","==",oe))):(Fn(null),pe=Ot(Re,"products"));const Ge=(await Cn(pe)).docs.map(rt=>({id:rt.id,...rt.data()}));o(Ge);const Xe=Ge.filter(rt=>rt.trending||rt.rating&&rt.rating>=4.5).slice(0,8);n(Xe.length?Xe:Ge.slice(0,8)),p(Ge),T(!1)}catch(pe){console.error("Error fetching products:",pe),T(!1)}};k.useEffect(()=>{if(!s||s.length===0)return;let oe=[...s];if(q){const pe=q.toLowerCase().trim();oe=s.filter(_e=>_e.name&&_e.name.toLowerCase().includes(pe)||_e.description&&_e.description.toLowerCase().includes(pe)||_e.category&&_e.category.toLowerCase().includes(pe)||_e.tags&&Array.isArray(_e.tags)&&_e.tags.some(Ge=>Ge.toLowerCase().includes(pe)))}Jt&&(oe=oe.filter(pe=>pe.category===Jt)),I&&ce.city&&(oe=oe.filter(pe=>!pe.availableCities||Array.isArray(pe.availableCities)&&pe.availableCities.includes(ce.city))),p(oe)},[q,I,s,ce.city,Jt]);const Hs=()=>{const oe=[],pe=new Date;let _e=pe.getHours();pe.getMinutes()>45&&(_e+=1);for(let Ge=0;Ge<12;Ge++){const Xe=(_e+Ge)%24;oe.push(`${Xe}:00 - ${Xe}:15`),oe.push(`${Xe}:15 - ${Xe}:30`),oe.push(`${Xe}:30 - ${Xe}:45`),oe.push(`${Xe}:45 - ${(Xe+1)%24}:00`)}S(oe),U(oe[0])},Ei=async oe=>{try{const pe=tt(Re,"carts",oe),_e=await sn(pe);if(!_e.exists())return await zr(pe,{items:[],createdAt:new Date,updatedAt:new Date,total:0}),ge([]),[];const rt=(_e.data().items||[]).filter(Ue=>Ue&&Ue.productId&&typeof Ue.quantity=="number");if(rt.length===0)return ge([]),[];const He=rt.map(Ue=>Ue.productId),ht=[];for(let Ue=0;Ue<He.length;Ue+=10){const wt=He.slice(Ue,Ue+10);if(wt.length>0){const _t=ti(Ot(Re,"products"),Zi(hg(),"in",wt)),j=await Cn(_t),Z={};j.forEach(J=>{Z[J.id]={id:J.id,...J.data()}}),rt.filter(J=>wt.includes(J.productId)).forEach(J=>{ht.push({...J,product:Z[J.productId]||{id:J.productId,name:"Product not found",price:0,imageUrl:"/placeholder.jpg"}})})}}return ge(ht),ht}catch(pe){return console.error("Error fetching cart items:",pe),ye.error("Failed to load cart items"),ge([]),[]}},Gn=async(oe,pe)=>{if(!ft.currentUser){ye.info("Please log in to update your cart"),r("/login");return}try{const _e=ft.currentUser.uid,Ge=tt(Re,"carts",_e),Xe=await sn(Ge);if(!Xe.exists()){await zr(Ge,{items:[],createdAt:new Date,updatedAt:new Date,total:0});return}const He=[...Xe.data().items||[]],ht=He.findIndex(Z=>Z&&Z.productId===oe);if(ht===-1)return;const Ue=[...He],wt=Ue[ht],_t=(wt.quantity||0)+pe;_t<=0?(Ue.splice(ht,1),ye.info(`Removed ${wt.name||"item"} from cart`)):Ue[ht]={...wt,quantity:_t};const j=Ue.reduce((Z,J)=>Z+(J.price||0)*(J.quantity||0),0);await gi(Ge,{items:Ue.filter(Z=>Z),updatedAt:new Date,total:j}),await Ei(_e)}catch(_e){console.error("Error updating quantity:",_e),ye.error("Failed to update quantity")}},Ti=async oe=>{if(!ft.currentUser){ye.info("Please log in to update your cart"),r("/login");return}try{const pe=ft.currentUser.uid,_e=tt(Re,"carts",pe),Ge=await sn(_e);if(!Ge.exists())return;const rt=[...Ge.data().items||[]],He=rt.find(_t=>_t.productId===oe),ht=He?He.name:"Item",Ue=rt.filter(_t=>_t.productId!==oe),wt=Ue.reduce((_t,j)=>_t+(j.price||0)*(j.quantity||0),0);await gi(_e,{items:Ue,updatedAt:new Date,total:wt}),ye.success(`${ht} removed from cart`),await Ei(pe)}catch(pe){console.error("Error removing item from cart:",pe),ye.error("Failed to remove item from cart")}},$r=()=>N.reduce((oe,pe)=>oe+(pe.quantity||0),0),pn=()=>N.reduce((oe,pe)=>{var _e;return oe+(((_e=pe.product)==null?void 0:_e.price)||0)*(pe.quantity||0)},0),hr=async()=>{if(N.length===0){ye.warning("Your cart is empty");return}if(!ce.formatted){ye.warning("Please set your delivery address first"),R(!0);return}if(Ce==="card"){if(!Se.number||!Se.expiry||!Se.cvc||!Se.name){ye.warning("Please enter your complete card details");return}Se.last4=Se.number.slice(-4);const oe=Se.number.charAt(0);oe==="4"?Se.brand="Visa":oe==="5"?Se.brand="Mastercard":oe==="3"?Se.brand="Amex":Se.brand="Card"}try{const oe=ft.currentUser.uid,pe=Nw(Re),_e={};N.forEach(He=>{var Ue,wt,_t,j,Z;const ht=((Ue=He.product)==null?void 0:Ue.shopId)||"default";_e[ht]||(_e[ht]=[]),_e[ht].push({productId:He.productId,name:((wt=He.product)==null?void 0:wt.name)||"Unknown Product",quantity:He.quantity||0,price:((_t=He.product)==null?void 0:_t.price)||0,imageUrl:((j=He.product)==null?void 0:j.imageUrl)||"",shopId:((Z=He.product)==null?void 0:Z.shopId)||"default"})});const Ge=[],Xe=[];for(const He in _e){const ht=_e[He],Ue=ht.reduce((ve,be)=>ve+be.price*be.quantity,0);let wt={shopName:"Default Shop"};try{const ve=tt(Re,"shops",He),be=await sn(ve);be.exists()&&(wt=be.data())}catch(ve){console.error("Error fetching shop data:",ve)}const _t=tt(Ot(Re,"orders"));Ge.push(_t.id);const j={orderId:_t.id,userId:oe,userEmail:ft.currentUser.email||"",userName:ft.currentUser.displayName||M||"Customer",shopId:He,shopName:wt.shopName,shopkeeperId:He,items:ht,totalAmount:Ue,deliveryFee:Ue>100?0:20,status:"pending",deliveryAddress:ce,deliveryTime:P,createdAt:new Date,updatedAt:new Date,paymentMethod:Ce,paymentStatus:Ce==="cash"?"pending":"paid",customerNotes:c};Ce==="card"&&(j.paymentStatus="paid",j.paymentDetails={last4:Se.last4,brand:Se.brand}),pe.set(_t,j);const Z=tt(Ot(Re,"users",oe,"orders"),_t.id);pe.set(Z,j);const J=tt(Ot(Re,"shops",He,"orders"),_t.id);pe.set(J,j),Xe.push(j);for(const ve of ht)if(ve.productId){const be=tt(Re,"products",ve.productId);pe.update(be,{inventory:$h(-ve.quantity),soldCount:$h(ve.quantity)})}}const rt=tt(Re,"carts",oe);pe.update(rt,{items:[],updatedAt:new Date,total:0}),await pe.commit(),ge([]),K(!1),d(""),An(He=>[...Xe,...He]),ye.success(`Order${Ge.length>1?"s":""} placed successfully!`),r("/orders")}catch(oe){console.error("Error during checkout:",oe),ye.error("Failed to place order. Please try again.")}},ri=()=>{K(!Oe)},yt=oe=>{r(`/product/${oe}`)};return g.jsxs("div",{className:"home",children:[Oe&&g.jsx("div",{className:"cart-ovrlay",children:g.jsxs("div",{className:"cart-sidebar",children:[g.jsxs("div",{className:"cart-header",children:[g.jsxs("h3",{children:["Shopping Cart (",$r(),")"]}),g.jsx("button",{className:"close-cart",onClick:ri,children:g.jsx(cc,{size:24})})]}),N.length===0?g.jsxs("div",{className:"empty-cart",children:[g.jsx(Yh,{size:64,className:"empty-cart-icon"}),g.jsx("p",{children:"Your cart is empty"}),g.jsx("button",{className:"start-shopping",onClick:ri,children:"Start Shopping"})]}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"cart-items",children:N.map(oe=>{var pe,_e,Ge,Xe,rt;return g.jsxs("div",{className:"cart-item",children:[g.jsx("img",{src:((pe=oe.product)==null?void 0:pe.imageUrl)||"https://via.placeholder.com/50",alt:(_e=oe.product)==null?void 0:_e.name,className:"cart-item-image",onClick:()=>{ri(),yt(oe.productId)}}),g.jsxs("div",{className:"cart-item-details",children:[g.jsx("div",{className:"cart-item-name",onClick:()=>{ri(),yt(oe.productId)},children:((Ge=oe.product)==null?void 0:Ge.name)||"Unknown Product"}),g.jsx("div",{className:"cart-item-weight",children:((Xe=oe.product)==null?void 0:Xe.weight)||""}),g.jsxs("div",{className:"cart-item-price",children:["",(((rt=oe.product)==null?void 0:rt.price)||0).toFixed(2)]})]}),g.jsxs("div",{className:"cart-item-controls",children:[g.jsxs("div",{className:"quantity-controls",children:[g.jsx("button",{className:"quantity-btn",onClick:()=>Gn(oe.productId,-1),children:"-"}),g.jsx("span",{className:"quantity",children:oe.quantity}),g.jsx("button",{className:"quantity-btn",onClick:()=>Gn(oe.productId,1),children:"+"})]}),g.jsx("button",{className:"remove-item",onClick:()=>Ti(oe.productId),children:g.jsx(cc,{size:18})})]})]},oe.productId)})}),g.jsxs("div",{className:"order-notes",children:[g.jsx("h4",{children:"Order Notes (Optional)"}),g.jsx("textarea",{value:c,onChange:oe=>d(oe.target.value),placeholder:"Special instructions for delivery...",className:"notes-input"})]}),g.jsxs("div",{className:"payment-method-selection",children:[g.jsx("h4",{children:"Payment Method"}),g.jsxs("div",{className:"payment-options",children:[g.jsxs("label",{className:"payment-option",children:[g.jsx("input",{type:"radio",name:"payment",value:"cash",checked:Ce==="cash",onChange:()=>ke("cash")}),g.jsxs("div",{className:"payment-option-content",children:[g.jsx("span",{className:"payment-option-icon",children:""}),g.jsx("span",{className:"payment-label",children:"Cash on Delivery"})]})]}),g.jsx("label",{className:"payment-option",children:g.jsxs("div",{className:"payment-option-content",children:[g.jsx("span",{className:"payment-option-icon",children:""}),g.jsx("span",{className:"payment-label",children:"Credit/Debit Card Not Availible Yet."})]})})]}),Ce==="card"&&g.jsxs("div",{className:"card-details",children:[g.jsx("input",{type:"text",placeholder:"Card Number",value:Se.number,onChange:oe=>et({...Se,number:oe.target.value}),className:"card-input"}),g.jsxs("div",{className:"card-row",children:[g.jsx("input",{type:"text",placeholder:"MM/YY",value:Se.expiry,onChange:oe=>et({...Se,expiry:oe.target.value}),className:"card-input expiry"}),g.jsx("input",{type:"text",placeholder:"CVC",value:Se.cvc,onChange:oe=>et({...Se,cvc:oe.target.value}),className:"card-input cvc"})]}),g.jsx("input",{type:"text",placeholder:"Cardholder Name",value:Se.name,onChange:oe=>et({...Se,name:oe.target.value}),className:"card-input"})]})]}),g.jsxs("div",{className:"cart-summary",children:[g.jsxs("div",{className:"summary-row",children:[g.jsx("span",{children:"Subtotal"}),g.jsxs("span",{children:["",pn().toFixed(2)]})]}),g.jsxs("div",{className:"summary-row",children:[g.jsx("span",{children:"Delivery Fee"}),g.jsx("span",{children:pn()>100?"FREE":"80.00"})]}),g.jsxs("div",{className:"summary-row total",children:[g.jsx("span",{children:"Total"}),g.jsxs("span",{children:["",(pn()+(pn()>100?0:20)).toFixed(2)]})]}),g.jsx("button",{className:"checkout-button",onClick:hr,children:"Proceed to Checkout"})]})]})]})}),g.jsxs("nav",{className:"bottom-nav",children:[g.jsx(Gt,{to:"/",className:"nav-item active",children:g.jsx(Pw,{size:22})}),g.jsx(Gt,{to:"/categories",className:"nav-item",children:g.jsx(Sh,{size:22})}),g.jsx(Gt,{to:"/cart",className:"nav-item cart-nav-item",onClick:oe=>{oe.preventDefault(),ri()},children:g.jsxs("div",{className:"cart-icon-container",children:[g.jsx(Yh,{size:22}),N.length>0&&g.jsx("span",{className:"cart-nav-badge",children:$r()})]})}),g.jsx(Gt,{to:"/Yourorders",className:"nav-item",children:g.jsx(Ta,{size:22})}),g.jsx(Gt,{to:"/profile",className:"nav-item",children:g.jsx(Mw,{size:22})})]})]})}function rk(){var de,ce;const r=or(),[e,n]=k.useState(null),[s,o]=k.useState([]),[c,d]=k.useState([]),[m,p]=k.useState(!0),[y,T]=k.useState("orders"),[A,S]=k.useState([]);k.useEffect(()=>{const le=ft.onAuthStateChanged(async x=>{x?(await P(x.uid),await U(x.uid),await q(x.uid),z()):r("/login"),p(!1)});return()=>le()},[r]);const P=async le=>{try{const x=await sn(tt(Re,"users",le));x.exists()&&n({id:x.id,...x.data()})}catch(x){console.error("Error fetching user data:",x)}},U=async le=>{try{const x=Ot(Re,"users",le,"orders"),R=ti(x,zD("createdAt","desc")),I=await Cn(R),O=[];for(const M of I.docs){const L=M.data(),N=await sn(M(Re,"shops",L.shopId));O.push({id:M.id,...L,shopName:N.exists()?N.data().name:"Unknown Shop"})}o(O)}catch(x){console.error("Error fetching orders:",x)}},q=async le=>{try{const x=Ot(Re,"users",le,"wishlist"),R=await Cn(x),I=[];for(const O of R.docs){const M=await sn(tt(Re,"products",O.data().productId));M.exists()&&I.push({id:O.id,productId:M.id,...M.data()})}d(I)}catch(x){console.error("Error fetching wishlist:",x)}},z=()=>{const le=localStorage.getItem("recentlyViewed");le&&S(JSON.parse(le))},Y=async()=>{try{await ft.signOut(),r("/")}catch(le){console.error("Error signing out:",le)}},ae=le=>{switch(le){case"pending":return g.jsx(Ta,{size:16,color:"orange"});case"confirmed":return g.jsx(kE,{size:16,color:"green"});case"preparing":return g.jsx(vp,{size:16,color:"blue"});case"out_for_delivery":return g.jsx(vp,{size:16,color:"purple"});case"delivered":return g.jsx(kE,{size:16,color:"green"});default:return g.jsx(Ta,{size:16})}},W=le=>le.replace(/_/g," ").toUpperCase();return m?g.jsx("div",{className:"profile-loading",children:"Loading your profile..."}):e?g.jsxs("div",{className:"profile-container",children:[g.jsxs("div",{className:"profile-header",children:[g.jsx("div",{className:"profile-avatar",children:e.photoURL?g.jsx("img",{src:e.photoURL,alt:"Profile"}):g.jsx("div",{className:"avatar-placeholder",children:((de=e.displayName)==null?void 0:de.charAt(0))||((ce=e.firstName)==null?void 0:ce.charAt(0))||"U"})}),g.jsxs("div",{className:"profile-info",children:[g.jsx("h1",{children:e.displayName||`${e.firstName} ${e.lastName||""}`}),g.jsx("p",{className:"profile-email",children:e.email}),g.jsx("p",{className:"profile-phone",children:e.phoneNumber||"No phone number"})]})]}),g.jsxs("div",{className:"profile-address-section",children:[g.jsxs("div",{className:"section-header",children:[g.jsx(PE,{size:20}),g.jsx("h2",{children:"Delivery Address"}),g.jsx("button",{className:"edit-btn",children:g.jsx(VE,{size:16})})]}),e.address?g.jsxs("div",{className:"address-card",children:[g.jsx("p",{className:"address-type",children:"Home"}),g.jsx("p",{className:"address-text",children:e.address.formatted})]}):g.jsxs("div",{className:"no-address",children:[g.jsx("p",{children:"No address saved"}),g.jsx("button",{className:"add-address-btn",children:"Add Address"})]})]}),g.jsxs("div",{className:"profile-tabs",children:[g.jsxs("button",{className:`tab-btn ${y==="orders"?"active":""}`,onClick:()=>T("orders"),children:[g.jsx(ME,{size:18})," My Orders"]}),g.jsxs("button",{className:`tab-btn ${y==="wishlist"?"active":""}`,onClick:()=>T("wishlist"),children:[g.jsx(lc,{size:18})," Wishlist"]}),g.jsxs("button",{className:`tab-btn ${y==="recent"?"active":""}`,onClick:()=>T("recent"),children:[g.jsx(Ta,{size:18})," Recently Viewed"]})]}),y==="orders"&&g.jsx("div",{className:"tab-content",children:s.length===0?g.jsxs("div",{className:"empty-state",children:[g.jsx(ME,{size:48,className:"empty-icon"}),g.jsx("h3",{children:"No Orders Yet"}),g.jsx("p",{children:"Your orders will appear here"}),g.jsx(Gt,{to:"/",className:"shop-now-btn",children:"Shop Now"})]}):g.jsx("div",{className:"orders-list",children:s.map(le=>{var x;return g.jsxs("div",{className:"order-card",children:[g.jsxs("div",{className:"order-header",children:[g.jsxs("div",{className:"order-status",children:[ae(le.status),g.jsx("span",{children:W(le.status)})]}),g.jsx("div",{className:"order-date",children:(x=le.createdAt)==null?void 0:x.toDate().toLocaleDateString()})]}),g.jsxs("div",{className:"order-shop",children:[g.jsx("span",{children:"From:"})," ",le.shopName]}),g.jsxs("div",{className:"order-items-preview",children:[le.items.slice(0,3).map((R,I)=>g.jsxs("div",{className:"order-item",children:[g.jsx("div",{className:"item-image",children:R.imageUrl?g.jsx("img",{src:R.imageUrl,alt:R.name}):g.jsx("div",{className:"item-image-placeholder"})}),g.jsxs("div",{className:"item-details",children:[g.jsx("p",{className:"item-name",children:R.name}),g.jsxs("p",{className:"item-quantity",children:["Qty: ",R.quantity]})]})]},I)),le.items.length>3&&g.jsxs("div",{className:"more-items",children:["+",le.items.length-3," more items"]})]}),g.jsxs("div",{className:"order-footer",children:[g.jsxs("div",{className:"order-total",children:[g.jsx("span",{children:"Total:"})," ",le.totalAmount.toFixed(2)]}),g.jsx(Gt,{to:`/order/${le.id}`,className:"order-details-btn",children:"View Details"})]})]},le.id)})})}),y==="wishlist"&&g.jsx("div",{className:"tab-content",children:c.length===0?g.jsxs("div",{className:"empty-state",children:[g.jsx(lc,{size:48,className:"empty-icon"}),g.jsx("h3",{children:"Your Wishlist is Empty"}),g.jsx("p",{children:"Save your favorite items here"}),g.jsx(Gt,{to:"/",className:"shop-now-btn",children:"Browse Products"})]}):g.jsx("div",{className:"wishlist-grid",children:c.map(le=>g.jsxs(Gt,{to:`/product/${le.productId}`,className:"wishlist-item",children:[g.jsx("div",{className:"wishlist-item-image",children:g.jsx("img",{src:le.imageUrl,alt:le.name})}),g.jsxs("div",{className:"wishlist-item-details",children:[g.jsx("h3",{children:le.name}),g.jsxs("div",{className:"wishlist-item-price",children:["",le.price,le.originalPrice&&g.jsxs("span",{className:"original-price",children:["",le.originalPrice]})]}),g.jsxs("div",{className:"wishlist-item-actions",children:[g.jsx("button",{className:"move-to-cart-btn",children:"Add to Cart"}),g.jsx("button",{className:"remove-wishlist-btn",children:"Remove"})]})]})]},le.id))})}),y==="recent"&&g.jsx("div",{className:"tab-content",children:A.length===0?g.jsxs("div",{className:"empty-state",children:[g.jsx(Ta,{size:48,className:"empty-icon"}),g.jsx("h3",{children:"No Recently Viewed Items"}),g.jsx("p",{children:"Your recently viewed products will appear here"}),g.jsx(Gt,{to:"/",className:"shop-now-btn",children:"Start Shopping"})]}):g.jsx("div",{className:"recently-viewed-grid",children:A.map(le=>g.jsxs(Gt,{to:`/product/${le.id}`,className:"recent-item",children:[g.jsx("div",{className:"recent-item-image",children:g.jsx("img",{src:le.imageUrl,alt:le.name})}),g.jsxs("div",{className:"recent-item-details",children:[g.jsx("h3",{children:le.name}),g.jsxs("div",{className:"recent-item-price",children:["",le.price,le.originalPrice&&g.jsxs("span",{className:"original-price",children:["",le.originalPrice]})]})]})]},`recent-${le.id}`))})}),g.jsxs("div",{className:"account-actions",children:[g.jsxs("button",{className:"account-action-btn",children:[g.jsx(VE,{size:18})," Edit Profile"]}),g.jsxs("button",{className:"account-action-btn",children:[g.jsx(PE,{size:18})," Manage Addresses"]}),g.jsxs("button",{className:"account-action-btn",onClick:Y,children:[g.jsx(OO,{size:18})," Sign Out"]})]}),g.jsx(Ad,{})]}):g.jsx("div",{className:"profile-error",children:"Error loading profile data"})}const sk=()=>{const r=[{id:1,name:"Groceries",description:"",route:"/groceries"},{id:2,name:"Vegetables",description:"",route:"/vegetable"},{id:3,name:"Electronics",description:"",route:"/electronics"}],e=n=>{window.location.href=n};return g.jsxs("div",{className:"categories-container",children:[g.jsx("div",{className:"categories-header",children:g.jsx("h1",{children:"Shop by Category"})}),g.jsx("div",{className:"categories-grid",children:r.map(n=>g.jsx("div",{className:"category-card",onClick:()=>e(n.route),children:g.jsxs("div",{className:"category-content",children:[g.jsx("h2",{children:n.name}),g.jsx("p",{children:n.description})]})},n.id))}),g.jsx(Ad,{})]})},ak=()=>{var W,de,ce,le,x,R,I,O,M,L,N;const[r,e]=k.useState([]),[n,s]=k.useState(null),[o,c]=k.useState(null),[d,m]=k.useState(!1),[p,y]=k.useState(!0),T=$T();or(),k.useEffect(()=>{(async()=>{var Oe;try{const K=(Oe=T.currentUser)==null?void 0:Oe.uid;if(!K){s("You must be logged in to view orders"),y(!1);return}const ue=Ot(Re,"orders"),Ae=ti(ue,Zi("userId","==",K)),Ye=await Cn(Ae),D=[];Ye.forEach(ie=>{D.push({id:ie.id,...ie.data()})}),D.sort((ie,fe)=>fe.createdAt.seconds-ie.createdAt.seconds),e(D),y(!1)}catch(K){console.error("Error fetching orders: ",K),s("Failed to load orders. Please try again later."),y(!1)}})()},[]);const A=async ge=>{try{const Oe=tt(Re,"orders",ge);await gi(Oe,{status:"paymentneed",receivedAt:new Date}),e(r.map(K=>K.id===ge?{...K,status:"paymentneed",receivedAt:new Date}:K)),ye.success("Order received successfully!")}catch(Oe){console.error("Error confirming order received: ",Oe),ye.error("Failed to confirm order received. Please try again.")}},S=async ge=>{try{const Oe=tt(Re,"orders",ge);await gi(Oe,{status:"payment",paymentStatus:"wait",paidAt:new Date}),e(r.map(K=>K.id===ge?{...K,status:"payment",paymentStatus:"paid",paidAt:new Date}:K)),ye.success("Payment confirmed successfully!")}catch(Oe){console.error("Error confirming payment: ",Oe),ye.error("Failed to confirm payment. Please try again.")}},P=async ge=>{if(window.confirm("Are you sure you want to cancel this order?")){m(!0);try{const Oe=tt(Re,"orders",ge);await gi(Oe,{status:"cancelled",cancelledAt:new Date}),e(r.map(K=>K.id===ge?{...K,status:"cancelled",cancelledAt:new Date}:K)),o&&o.id===ge&&q(),ye.success("Order cancelled successfully!")}catch(Oe){console.error("Error cancelling order: ",Oe),ye.error("Failed to cancel order. Please try again.")}finally{m(!1)}}},U=ge=>{c(ge)},q=()=>{c(null)},z=ge=>{switch(ge){case"pending":return"Order Placed";case"processing":return"Preparing";case"shipped":return"Out for Delivery";case"arrived":return"Order Arrived";case"paymentneed":return"Payment Needed";case"payment":return"Payment Complete";case"delivered":return"Delivered";case"cancelled":return"Cancelled";default:return ge.charAt(0).toUpperCase()+ge.slice(1)}},Y=ge=>{switch(ge){case"pending":return"status-pending";case"processing":return"status-processing";case"shipped":return"status-shipped";case"arrived":return"status-arrived";case"paymentneed":return"status-paymentneed";case"payment":return"status-payment";case"delivered":return"status-delivered";case"cancelled":return"status-cancelled";default:return""}},ae=ge=>["pending","processing"].includes(ge.status);return p?g.jsxs("div",{className:"loading-container",children:[g.jsx("div",{className:"loading-spinner"}),g.jsx("p",{children:"Loading your orders..."})]}):n?g.jsx("div",{className:"error-container",children:n}):r.length===0?g.jsxs("div",{className:"empty-state",children:[g.jsx("img",{src:"/empty-orders.svg",alt:"No orders",className:"empty-icon"}),g.jsx("h2",{children:"You haven't placed any orders yet"}),g.jsx("p",{children:"When you place an order, it will appear here"}),g.jsx("button",{className:"btn-primary",onClick:()=>window.location.href="/products",children:"Start Shopping"})]}):g.jsxs("div",{className:"user-orders-container",children:[g.jsx("h1",{className:"usero",children:"My Orders"}),g.jsx("div",{className:"orders-list",children:r.map(ge=>g.jsxs("div",{className:`order-card ${ge.status}`,children:[g.jsxs("div",{className:"order-header",children:[g.jsxs("div",{className:"order-id-date",children:[g.jsxs("h3",{children:["Order #",ge.id.slice(0,8)]}),g.jsxs("span",{className:"order-date",children:[new Date(ge.createdAt.seconds*1e3).toLocaleDateString()," at "," ",new Date(ge.createdAt.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),g.jsx("span",{className:`status-badge ${Y(ge.status)}`,children:z(ge.status)})]}),g.jsxs("div",{className:"order-items-preview",children:[ge.items.slice(0,3).map((Oe,K)=>g.jsxs("div",{className:"item-preview",children:[g.jsxs("div",{className:"item-image-container",children:[g.jsx("img",{src:Oe.imageUrl||"/placeholder-product.png",alt:Oe.name,className:"item-image",onError:ue=>{ue.target.src="/placeholder-product.png"}}),g.jsxs("span",{className:"item-quantity",children:[Oe.quantity,"x"]})]}),g.jsx("p",{className:"item-name",children:Oe.name})]},K)),ge.items.length>3&&g.jsxs("div",{className:"more-items",children:["+",ge.items.length-3," more"]})]}),g.jsxs("div",{className:"order-summary",children:[g.jsxs("div",{className:"order-total",children:[g.jsxs("p",{children:[g.jsx("strong",{children:"Total:"}),"  ",ge.totalAmount.toFixed(2)]}),g.jsx("p",{className:"payment-status",children:ge.paymentStatus==="paid"?"Paid":"Payment Pending"})]}),g.jsxs("div",{className:"order-actions",children:[g.jsx("button",{className:"btn-view-details",onClick:()=>U(ge),children:"View Details"}),ae(ge)&&g.jsx("button",{className:"btn-cancel",onClick:()=>P(ge.id),disabled:d,children:d?"Cancelling...":"Cancel Order"}),ge.status==="arrived"&&g.jsx("button",{className:"btn-confirm-received",onClick:()=>A(ge.id),children:"Got My Order"}),ge.status==="paymentneed"&&ge.paymentMethod==="cash"&&g.jsx("button",{className:"btn-confirm-payment",onClick:()=>S(ge.id),children:"Paid Cash To Delivery Person"})]})]})]},ge.id))}),o&&g.jsx("div",{className:"order-details-modal",children:g.jsxs("div",{className:"modal-content",children:[g.jsxs("div",{className:"modal-header",children:[g.jsx("h2",{children:"Order Details"}),g.jsx("span",{className:"close-button",onClick:q,children:""})]}),g.jsxs("div",{className:"order-status-timeline",children:[g.jsxs("div",{className:`status-step ${o.status==="cancelled"?"cancelled":"completed"}`,children:[g.jsx("div",{className:"status-icon",children:""}),g.jsx("div",{className:"status-label",children:"Order Placed"}),g.jsx("div",{className:"status-time",children:new Date(o.createdAt.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),g.jsxs("div",{className:`status-step ${o.status==="cancelled"?"cancelled":["processing","shipped","arrived","paymentneed","payment","delivered"].includes(o.status)?"completed":"pending"}`,children:[g.jsx("div",{className:"status-icon",children:""}),g.jsx("div",{className:"status-label",children:"Processing"})]}),g.jsxs("div",{className:`status-step ${o.status==="cancelled"?"cancelled":["shipped","arrived","paymentneed","payment","delivered"].includes(o.status)?"completed":"pending"}`,children:[g.jsx("div",{className:"status-icon",children:""}),g.jsx("div",{className:"status-label",children:"Out for Delivery"})]}),g.jsxs("div",{className:`status-step ${o.status==="cancelled"?"cancelled":["arrived","paymentneed","payment","delivered"].includes(o.status)?"completed":"pending"}`,children:[g.jsx("div",{className:"status-icon",children:""}),g.jsx("div",{className:"status-label",children:"Arrived"}),o.arrivedAt&&g.jsx("div",{className:"status-time",children:new Date(o.arrivedAt.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),g.jsxs("div",{className:`status-step ${o.status==="cancelled"?"cancelled":["paymentneed","payment","delivered"].includes(o.status)?"completed":"pending"}`,children:[g.jsx("div",{className:"status-icon",children:""}),g.jsx("div",{className:"status-label",children:"Order Received"}),o.receivedAt&&g.jsx("div",{className:"status-time",children:new Date(o.receivedAt.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),g.jsxs("div",{className:`status-step ${o.status==="cancelled"?"cancelled":["payment","delivered"].includes(o.status)?"completed":"pending"}`,children:[g.jsx("div",{className:"status-icon",children:""}),g.jsx("div",{className:"status-label",children:"Payment"}),o.paidAt&&g.jsx("div",{className:"status-time",children:new Date(o.paidAt.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),g.jsxs("div",{className:`status-step ${o.status==="cancelled"?"cancelled":o.status==="delivered"?"completed":"pending"}`,children:[g.jsx("div",{className:"status-icon",children:""}),g.jsx("div",{className:"status-label",children:"Completed"}),o.deliveredAt&&g.jsx("div",{className:"status-time",children:new Date(o.deliveredAt.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),g.jsxs("div",{className:"order-info",children:[g.jsxs("div",{className:"info-section",children:[g.jsx("h3",{children:"Order Information"}),g.jsxs("p",{children:[g.jsx("strong",{children:"Order ID:"})," ",o.id]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Date:"})," ",new Date(o.createdAt.seconds*1e3).toLocaleString()]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Status:"})," ",z(o.status)]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Payment Method:"})," ",o.paymentMethod]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Payment Status:"})," ",o.paymentStatus]}),o.arrivedAt&&g.jsxs("p",{children:[g.jsx("strong",{children:"Arrived At:"})," ",new Date(o.arrivedAt.seconds*1e3).toLocaleString()]}),o.receivedAt&&g.jsxs("p",{children:[g.jsx("strong",{children:"Received At:"})," ",new Date(o.receivedAt.seconds*1e3).toLocaleString()]}),o.paidAt&&g.jsxs("p",{children:[g.jsx("strong",{children:"Paid At:"})," ",new Date(o.paidAt.seconds*1e3).toLocaleString()]}),o.deliveredAt&&g.jsxs("p",{children:[g.jsx("strong",{children:"Delivered At:"})," ",new Date(o.deliveredAt.seconds*1e3).toLocaleString()]}),o.cancelledAt&&g.jsxs("p",{children:[g.jsx("strong",{children:"Cancelled At:"})," ",new Date(o.cancelledAt.seconds*1e3).toLocaleString()]})]}),g.jsxs("div",{className:"info-section",children:[g.jsx("h3",{children:"Shipping Address"}),g.jsx("p",{children:((W=o.shippingAddress)==null?void 0:W.name)||o.userName||"N/A"}),g.jsx("p",{children:((de=o.shippingAddress)==null?void 0:de.street)||((ce=o.deliveryAddress)==null?void 0:ce.street)||"N/A"}),g.jsxs("p",{children:[((le=o.shippingAddress)==null?void 0:le.city)||((x=o.deliveryAddress)==null?void 0:x.city)||"N/A",","," ",((R=o.shippingAddress)==null?void 0:R.state)||((I=o.deliveryAddress)==null?void 0:I.state)||"N/A"," ",((O=o.shippingAddress)==null?void 0:O.zip)||((M=o.deliveryAddress)==null?void 0:M.pincode)||"N/A"]}),g.jsx("p",{children:((L=o.shippingAddress)==null?void 0:L.country)||"N/A"}),g.jsxs("p",{children:["Phone: ",((N=o.shippingAddress)==null?void 0:N.phone)||"N/A"]})]})]}),g.jsx("h3",{children:"Order Items"}),g.jsx("div",{className:"order-items-detail",children:o.items.map((ge,Oe)=>{var K;return g.jsxs("div",{className:"order-item",children:[g.jsx("div",{className:"item-image-container",children:g.jsx("img",{src:ge.imageUrl||"/placeholder-product.png",alt:ge.name,onError:ue=>{ue.target.src="/placeholder-product.png"}})}),g.jsxs("div",{className:"item-details",children:[g.jsx("h4",{children:ge.name}),g.jsxs("p",{className:"item-price",children:["",((K=ge.price)==null?void 0:K.toFixed(2))||"0.00"," x ",ge.quantity]}),g.jsxs("p",{className:"item-subtotal",children:["",((ge.price||0)*(ge.quantity||0)).toFixed(2)]})]})]},Oe)})}),g.jsxs("div",{className:"order-summary-detail",children:[g.jsxs("div",{className:"summary-row",children:[g.jsx("span",{children:"Subtotal"}),g.jsxs("span",{children:["",(o.subtotal||o.totalAmount||0).toFixed(2)]})]}),o.tax&&g.jsxs("div",{className:"summary-row",children:[g.jsx("span",{children:"Tax"}),g.jsxs("span",{children:["",o.tax.toFixed(2)]})]}),o.deliveryFee&&g.jsxs("div",{className:"summary-row",children:[g.jsx("span",{children:"Delivery Fee"}),g.jsxs("span",{children:["",o.deliveryFee.toFixed(2)]})]}),o.discount&&g.jsxs("div",{className:"summary-row discount",children:[g.jsx("span",{children:"Discount"}),g.jsxs("span",{children:["-",o.discount.toFixed(2)]})]}),g.jsxs("div",{className:"summary-row total",children:[g.jsx("span",{children:"Total"}),g.jsxs("span",{children:["",o.totalAmount.toFixed(2)]})]})]}),g.jsxs("div",{className:"modal-actions",children:[ae(o)&&g.jsx("button",{className:"btn-cancel",onClick:()=>P(o.id),disabled:d,children:d?"Cancelling...":"Cancel Order"}),o.status==="arrived"&&g.jsx("button",{className:"btn-confirm-received",onClick:()=>{A(o.id),q()},children:"Got My Order"}),o.status==="paymentneed"&&o.paymentMethod==="cash"&&g.jsx("button",{className:"btn-confirm-payment",onClick:()=>{S(o.id),q()},children:"Paid Cash To Delivery Person"}),g.jsx("button",{className:"btn-close",onClick:q,children:"Close"})]})]})}),g.jsx(Ad,{})]})},ok=()=>{var U;const{productId:r}=YS(),[e,n]=k.useState(null),[s,o]=k.useState(null),[c,d]=k.useState(!0),[m,p]=k.useState([]),y=or(),[T,A]=k.useState(""),S=async q=>{try{if(!q||!q.id)return ye.error("Invalid product"),!1;if(!ft.currentUser)return ye.info("Please log in to add items to cart"),y("/login"),!1;const z=ft.currentUser.uid,Y=tt(Re,"carts",z),ae=await sn(Y);let W=[];ae.exists()?W=[...ae.data().items||[]]:await zr(Y,{items:[],createdAt:new Date,updatedAt:new Date,total:0});const de={productId:q.id,quantity:1,price:Number(q.price)||0,name:String(q.name)||"Unnamed Product",image:q.imageUrl||""},ce=W.findIndex(x=>x&&x.productId===q.id);ce>=0?(W[ce].quantity+=1,ye.success(`Added another ${q.name} to cart`)):(W.push(de),ye.success(`${q.name} added to cart`));const le=W.reduce((x,R)=>x+(R.price||0)*(R.quantity||0),0);return await gi(Y,{items:W.filter(x=>x),updatedAt:new Date,total:le}),ye.success("Item added to cart successfully!"),p(W),await P(z),!0}catch(z){return console.error("Error adding to cart:",z),ye.error("Failed to add item to cart"),!1}},P=async q=>{try{const z=tt(Re,"carts",q),Y=await sn(z);if(!Y.exists())return await zr(z,{items:[],createdAt:new Date,updatedAt:new Date,total:0}),p([]),[];const de=(Y.data().items||[]).filter(x=>x&&x.productId&&typeof x.quantity=="number");if(de.length===0)return p([]),[];const ce=de.map(x=>x.productId),le=[];for(let x=0;x<ce.length;x+=10){const R=ce.slice(x,x+10);if(R.length>0){const I=ti(Ot(Re,"products"),Zi(hg(),"in",R)),O=await Cn(I),M={};O.forEach(L=>{M[L.id]={id:L.id,...L.data()}}),de.filter(L=>R.includes(L.productId)).forEach(L=>{le.push({...L,product:M[L.productId]||{id:L.productId,name:"Product not found",price:0,imageUrl:"/placeholder.jpg"}})})}}return p(le),le}catch(z){return console.error("Error fetching cart items:",z),ye.error("Failed to load cart items"),p([]),[]}};return k.useEffect(()=>{r&&(async()=>{try{d(!0);const z=tt(Re,"products",r),Y=await sn(z);Y.exists()?n({id:Y.id,...Y.data()}):o("Product not found")}catch(z){console.error("Error fetching product:",z),o("Failed to load product details")}finally{d(!1)}})()},[r]),c?g.jsx("div",{className:"loading-container",children:g.jsx("div",{className:"loading-spinner"})}):s?g.jsx("div",{className:"error-container",children:g.jsxs("div",{className:"error-box",children:[g.jsx("h2",{className:"error-title",children:"Error"}),g.jsx("p",{className:"error-message",children:s}),g.jsx("button",{onClick:()=>window.history.back(),className:"back-button",children:"Go Back"})]})}):e?g.jsxs("div",{className:"product-details-page",children:[g.jsxs("div",{className:"product-details-container",children:[g.jsx("div",{className:"back-nav",children:g.jsx("button",{onClick:()=>window.history.back(),className:"back-link",children:" Back to Products"})}),g.jsxs("div",{className:"product-content",children:[g.jsx("div",{className:"product-image-section",children:e.imageUrl?g.jsx("div",{className:"product-image-wrapper",children:g.jsx("img",{src:e.imageUrl,alt:e.name,className:"product-image",onError:q=>{q.target.onerror=null,q.target.src="/placeholder.jpg"}})}):g.jsx("div",{className:"product-image-placeholder",children:g.jsx("span",{children:"No image available"})})}),g.jsxs("div",{className:"product-info-section",children:[e.category&&g.jsx("div",{className:"product-category",children:g.jsx("span",{children:e.category})}),g.jsx("h1",{className:"product-title",children:e.name}),g.jsxs("div",{className:"product-price",children:[g.jsxs("span",{className:"current-price",children:["",(U=e.price)==null?void 0:U.toFixed(2)]}),e.originalPrice&&e.originalPrice>e.price&&g.jsxs("div",{className:"discount-info",children:[g.jsxs("span",{className:"original-price",children:["",e.originalPrice.toFixed(2)]}),g.jsxs("span",{className:"discount-badge",children:[Math.round((1-e.price/e.originalPrice)*100),"% OFF"]})]})]}),e.description&&g.jsxs("div",{className:"product-description",children:[g.jsx("h3",{children:"Description"}),g.jsx("p",{children:e.description})]}),g.jsxs("div",{className:"product-meta",children:[e.soldCount!==void 0&&g.jsxs("div",{className:"meta-item",children:[g.jsx("span",{className:"meta-label",children:"Sold:"}),g.jsxs("span",{className:"meta-value",children:[e.soldCount," units"]})]}),e.sku&&g.jsxs("div",{className:"meta-item",children:[g.jsx("span",{className:"meta-label",children:"SKU:"}),g.jsx("span",{className:"meta-value",children:e.sku})]}),e.stock!==void 0&&g.jsxs("div",{className:"meta-item stock-info",children:[g.jsx("span",{className:"meta-label",children:"Availability:"}),g.jsx("span",{className:`meta-value ${e.stock>0?"in-stock":"out-of-stock"}`,children:e.stock>0?`In Stock (${e.stock})`:"Out of Stock"})]})]}),g.jsx("div",{className:"order-notes",children:g.jsx("textarea",{placeholder:"Add notes for this order (optional)",value:T,onChange:q=>A(q.target.value),rows:3})}),g.jsxs("div",{className:"product-actions",children:[g.jsxs("button",{className:"add-to-cart-button",onClick:()=>S(e),disabled:e.stock===0,children:[g.jsx("span",{className:"button-icon"}),g.jsx("span",{className:"button-text",children:"Add to Cart"})]}),g.jsxs("button",{className:"wishlist-button",children:[g.jsx("span",{className:"button-icon",children:""}),g.jsx("span",{className:"button-text",children:"Save for Later"})]})]})]})]})]}),g.jsx(Ad,{})]}):null},lk=()=>{const[r,e]=k.useState([]),[n,s]=k.useState(!0),[o,c]=k.useState(null),d=or();k.useEffect(()=>{(async()=>{try{const y=Ot(Re,"products"),T=ti(y,Zi("category","==","electronics")),A=await Cn(T),S=[];A.forEach(P=>{S.push({id:P.id,...P.data()})}),e(S),s(!1)}catch(y){console.error("Error fetching electronics products:",y),c("Failed to fetch products. Please try again later."),s(!1)}})()},[]);const m=p=>{d(`/product/${p}`)};return n?g.jsx("div",{className:"loading-message",children:"Loading electronics products..."}):o?g.jsx("div",{className:"error-message",children:o}):r.length===0?g.jsx("div",{className:"no-products-message",children:"No electronics products found."}):g.jsxs("div",{className:"electronics-container",children:[g.jsx("h1",{className:"electronics-title",children:"Electronics Products"}),g.jsx("div",{className:"products-grid",children:r.map(p=>{var y;return g.jsxs("div",{className:"product-card",children:[p.imageUrl&&g.jsx("img",{src:p.imageUrl,alt:p.name,className:"product-image",onError:T=>{T.target.onerror=null,T.target.src="/placeholder-image.png"}}),g.jsx("h2",{className:"product-name",children:p.name}),g.jsx("p",{className:"product-description",children:p.description}),g.jsxs("div",{className:"product-details",children:[g.jsxs("span",{className:"product-price",children:["$",((y=p.price)==null?void 0:y.toFixed(2))||"N/A"]}),p.inStock?g.jsx("span",{className:"in-stock",children:"In Stock"}):g.jsx("span",{className:"out-of-stock",children:"Out of Stock"})]}),g.jsx("button",{className:"add-to-cart-button",onClick:()=>m(p.id),children:"Add to Cart"})]},p.id)})})]})},ck=({children:r})=>localStorage.getItem("isLoggedIn")==="true"?r:g.jsx(KE,{to:"/login"});function uk(){const[r,e]=k.useState(null),[n,s]=k.useState(!0);return k.useEffect(()=>{const o=wx(ft,d=>{e(d),d?localStorage.setItem("isLoggedIn","true"):localStorage.setItem("isLoggedIn","false"),s(!1)});return localStorage.getItem("isLoggedIn")===null&&localStorage.setItem("isLoggedIn","false"),()=>o()},[]),n?g.jsx("div",{className:"loading",children:"Loading..."}):g.jsx(kR,{children:g.jsx("div",{className:"app-container",children:g.jsxs(uR,{children:[g.jsx(Xi,{path:"/",element:g.jsx(ck,{children:g.jsx(tk,{user:r})})}),g.jsx(Xi,{path:"/login",element:g.jsx(nk,{})}),g.jsx(Xi,{path:"/categories",element:g.jsx(sk,{})}),g.jsx(Xi,{path:"/product/:productId",element:g.jsx(ok,{})}),g.jsx(Xi,{path:"/signup",element:g.jsx(ik,{})}),g.jsx(Xi,{path:"/Yourorders",element:g.jsx(ak,{})}),g.jsx(Xi,{path:"/electronics",element:g.jsx(lk,{})}),g.jsx(Xi,{path:"/profile",element:g.jsx(rk,{})}),g.jsx(Xi,{path:"*",element:g.jsx(KE,{to:"/"})})]})})})}vS.createRoot(document.getElementById("root")).render(g.jsx(k.StrictMode,{children:g.jsx(uk,{})}));
</script>
    <div id="root"></div>
  </body>
</html>
